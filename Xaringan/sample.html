<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>ITS_EATS</title>
    <meta charset="utf-8" />
    <meta name="author" content="ITS_EATS" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="my-style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


class: center, middle

background-image: url(Picture1.png)
background-position: center


.white[
#모델링  
  - 시계열 모형  
  - Decision Tree  
  - Xgboost]


---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 1. 시계열 모형  
  - 구별, 배달 음식 종류별로 구분하여 각각의 시계열 모형 추정  
  - 시간의 흐름과 관련이 없는 gender, age, dong, hangang은 설명변수에서 제외  
  
#### [중국집 배달량 구별로 시계열 모형 만들기]  

  1.구 이름 데이터 프레임 만들기


```
## ── Attaching packages ────────────────────────────────────────── tidyverse 1.2.1 ──
```

```
## ✔ ggplot2 3.2.0     ✔ purrr   0.3.2
## ✔ tibble  2.1.3     ✔ dplyr   0.8.1
## ✔ tidyr   0.8.3     ✔ stringr 1.4.0
## ✔ readr   1.3.1     ✔ forcats 0.4.0
```

```
## ── Conflicts ───────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
```


```r
gu_names &lt;- its_eats %&gt;%
  select(region)
gu_names &lt;- unique(gu_names)
rownames(gu_names) &lt;- NULL
```
  
  
  2.구별로 데이터를 할당하는데 필요한 변수들 정리  
  

```r
tsdata_chinese_names &lt;- c()
calls_chinese_names &lt;- c()
auto_names &lt;- c()
fit_names &lt;- c()
pred_names &lt;- c()
```

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 1. 시계열 모형
#### [중국집 배달량 구별로 시계열 모형 만들기] 

  3.type이 중국집인 시계열 데이터를 구별로 정리  
  

```r
covariate &lt;- c("gangsu","rain","temperature","holiday.y","KBO","soccer")
for (i in 1:25) {
  assign(paste0("tsdata_chinese_",i),
         unique(its_eats %&gt;%
           filter(type == "중국집" &amp; region == gu_names[i,1]) %&gt;%
           select(date, gangsu, rain, temperature, holiday.y, KBO, soccer)))
  assign(paste0("calls_chinese_",i),
        its_eats %&gt;%
           filter(type == "중국집" &amp; region == gu_names[i,1]) %&gt;%
           select(date, call) %&gt;%
           group_by(date) %&gt;%
           summarise(calls = sum(call)))  
  tsdata_chinese_names[i] &lt;- paste0("tsdata_chinese_",i)
  calls_chinese_names[i] &lt;- paste0("calls_chinese_",i)
  auto_names[i] &lt;- paste0("auto_",i)
  fit_names[i] &lt;- paste0("fit_",i)
  pred_names[i] &lt;- paste0("pred_",i)
  assign(paste0("tsdata_chinese_",i) ,
         ts(left_join(get(calls_chinese_names[i]),
                      get(tsdata_chinese_names[i]),
                      by = "date")))}
```
---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 1. 시계열 모형
#### [중국집 배달량 구별로 시계열 모형 만들기] 

  4.모델링  


```r
library(forecast)
```

```
## Registered S3 method overwritten by 'xts':
##   method     from
##   as.zoo.xts zoo
```

```
## Registered S3 method overwritten by 'quantmod':
##   method            from
##   as.zoo.data.frame zoo
```

```
## Registered S3 methods overwritten by 'forecast':
##   method             from    
##   fitted.fracdiff    fracdiff
##   residuals.fracdiff fracdiff
```

```r
covariate &lt;- c("gangsu","rain","temperature","holiday.y","KBO","soccer")
for (i in 1:25) {
  assign(paste0("auto_",i),
*       auto.arima(get(tsdata_chinese_names[i])[,"calls"],
*                   xreg = get(tsdata_chinese_names[i])[,covariate]))
* ord = get(auto_names[1])$arma[c(1,6,2)]
  assign(paste0("fit_",i), 
         arima(get(tsdata_chinese_names[i])[,"calls"],
               xreg = get(tsdata_chinese_names[i])[,covariate],
*              order = ord, seasonal = list(order=c(0,0,1), period =7)))}
```

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 1. 시계열 모형
#### [중국집 배달량 구별로 시계열 모형 만들기]  
   
   5. 예측과 비교 그래프 그리기 

```r
#covariate &lt;- c("gangsu","rain","temperature","holiday.y","KBO","soccer")
#for (i in 1:25) {
#  assign(paste0("pred_",i),
#         forecast(get(fit_names[i]),
#                  xreg = get(tsdata_chinese_names[i])[,covariate]))}
#par(mfrow=c(5,5))
#par(mar=c(1,1,1,1))
#for (i in 1:25) {
#  plot(get(tsdata_chinese_names[i])[,"calls"], main = gu_names[i,1])
#  lines(fitted(get(pred_names[i])), col = "skyblue")}
```

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 1. 시계열 모형
#### [중국집 배달량 구별로 시계열 모형 만들기]   
   
   5.예측과 비교 그래프 그리기 


---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 1. 시계열 모형
#### [치킨 배달량 구별로 시계열 모형 만들기] 

tsdata_chicken_names &lt;- c()
calls_chicken_names &lt;- c()
auto_names &lt;- c()
fit_names &lt;- c()
pred_names &lt;- c()
for (i in 1:25) {
  assign(paste0("tsdata_chicken_",i),
         unique(its_eats %&gt;%
           filter(type == "치킨" &amp; region == gu_names[i,1]) %&gt;%
           select(date, gangsu, rain, temperature, holiday.y, KBO, soccer)
        ))
  assign(paste0("calls_chicken_",i),
        its_eats %&gt;%
           filter(type == "치킨" &amp; region == gu_names[i,1]) %&gt;%
           select(date, call) %&gt;%
           group_by(date) %&gt;%
           summarise(calls = sum(call)))  
  tsdata_chicken_names[i] &lt;- paste0("tsdata_chicken_",i)
  calls_chicken_names[i] &lt;- paste0("calls_chicken_",i)
  auto_names[i] &lt;- paste0("auto_",i)
  fit_names[i] &lt;- paste0("fit_",i)
  pred_names[i] &lt;- paste0("pred_",i)
  assign(paste0("tsdata_chicken_",i) ,
         ts(left_join(get(calls_chicken_names[i]), get(tsdata_chicken_names[i]), by = "date")))
}

## 모델링 loop
library(forecast)
covariate &lt;- c("gangsu","rain","temperature","holiday.y","KBO","soccer")
for (i in 1:25) {
  assign(paste0("auto_",i),
         auto.arima(get(tsdata_chicken_names[i])[,"calls"],
                    xreg = get(tsdata_chicken_names[i])[,covariate]))
  ord = get(auto_names[1])$arma[c(1,6,2)]
  assign(paste0("fit_",i), 
         arima(get(tsdata_chicken_names[i])[,"calls"],
               xreg = get(tsdata_chicken_names[i])[,covariate],
               order = ord, seasonal = list(order=c(0,0,1), period =7)))
}

# 예측
for (i in 1:25) {
  assign(paste0("pred_",i),
         forecast(get(fit_names[i]), xreg = get(tsdata_chicken_names[i])[,covariate]))
}
par(mfrow=c(5,5))
par(mar=c(1,1,1,1))
for (i in 1:25) {
  plot(get(tsdata_chicken_names[i])[,"calls"], main = gu_names[i,1])
  lines(fitted(get(pred_names[i])), col = "pink")
  }


---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 1. 시계열 모형
#### [피자 배달량 구별로 시계열 모형 만들기] 

tsdata_pizza_names &lt;- c()
calls_pizza_names &lt;- c()
auto_names &lt;- c()
fit_names &lt;- c()
pred_names &lt;- c()
for (i in 1:25) {
  assign(paste0("tsdata_pizza_",i),
         unique(its_eats %&gt;%
           filter(type == "치킨" &amp; region == gu_names[i,1]) %&gt;%
           select(date, gangsu, rain, temperature, holiday.y, KBO, soccer)
        ))
  assign(paste0("calls_pizza_",i),
        its_eats %&gt;%
           filter(type == "치킨" &amp; region == gu_names[i,1]) %&gt;%
           select(date, call) %&gt;%
           group_by(date) %&gt;%
           summarise(calls = sum(call)))  
  tsdata_pizza_names[i] &lt;- paste0("tsdata_pizza_",i)
  calls_pizza_names[i] &lt;- paste0("calls_pizza_",i)
  auto_names[i] &lt;- paste0("auto_",i)
  fit_names[i] &lt;- paste0("fit_",i)
  pred_names[i] &lt;- paste0("pred_",i)
  assign(paste0("tsdata_pizza_",i) ,
         ts(left_join(get(calls_pizza_names[i]), get(tsdata_pizza_names[i]), by = "date")))
}

## 모델링 loop
library(forecast)
covariate &lt;- c("gangsu","rain","temperature","holiday.y","KBO","soccer")
for (i in 1:25) {
  assign(paste0("auto_",i),
         auto.arima(get(tsdata_pizza_names[i])[,"calls"],
                    xreg = get(tsdata_pizza_names[i])[,covariate]))
  ord = get(auto_names[1])$arma[c(1,6,2)]
  assign(paste0("fit_",i), 
         arima(get(tsdata_pizza_names[i])[,"calls"],
               xreg = get(tsdata_pizza_names[i])[,covariate],
               order = ord, seasonal = list(order=c(0,0,1), period =7)))
}

# 예측
for (i in 1:25) {
  assign(paste0("pred_",i),
         forecast(get(fit_names[i]), xreg = get(tsdata_pizza_names[i])[,covariate]))
}
par(mfrow=c(5,5))
par(mar=c(1,1,1,1))
for (i in 1:25) {
  plot(get(tsdata_pizza_names[i])[,"calls"], main = gu_names[i,1])
  lines(fitted(get(pred_names[i])), col = "light green")
  }


---

background-image: url(Picture2.png)
background-position: center
background-size: contain

### 1. 시계열 모형  

  - 전반적으로 원래의 데이터와 예측 데이터가 많이 겹쳐짐
  - 중국집 : 광진구, 도봉구, 성동구
  - 치킨 : 용산구, 종로구
  - 피자 : 마포구
  - 예측이 잘 안되는 경우가 있음
  
---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 2. Decision Tree

```
## 'data.frame':	803996 obs. of  17 variables:
##  $ date        : int  20180101 20180101 20180101 20180101 20180101 20180101 20180101 20180101 20180101 20180101 ...
##  $ day         : Factor w/ 7 levels "금","목","수",..: 4 4 4 4 4 4 4 4 4 4 ...
##  $ gender      : Factor w/ 2 levels "남","여": 1 1 1 1 1 1 2 2 2 2 ...
##  $ age         : Factor w/ 4 levels "10대","20대",..: 1 1 2 2 1 2 1 1 2 2 ...
##  $ type        : Factor w/ 3 levels "중국집","치킨",..: 1 1 1 1 1 1 1 1 1 1 ...
##  $ call        : int  5 5 16 19 5 29 5 5 6 11 ...
##  $ month       : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ hangang     : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ gangsu      : num  0 0 0 0 0 0 0 0 0 0 ...
##  $ rain        : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ temperature : num  0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 ...
##  $ holiday_name: Factor w/ 11 levels "","3.1","Buddha's_birthday",..: 11 11 11 11 11 11 11 11 11 11 ...
##  $ holiday     : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ KBO         : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ soccer      : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ longitude   : num  127 127 127 127 127 ...
##  $ latitude    : num  37.5 37.5 37.5 37.5 37.5 ...
```

```
## Rattle: A free graphical interface for data science with R.
## Version 5.2.0 Copyright (c) 2006-2018 Togaware Pty Ltd.
## Type 'rattle()' to shake, rattle, and roll your data.
```

![](sample_files/figure-html/unnamed-chunk-8-1.png)&lt;!-- --&gt;

```
## 
## Regression tree:
## rpart(formula = train$call ~ ., data = train, method = "anova", 
##     control = rpart.control(cp = 0.01, minsplit = 100))
## 
## Variables actually used in tree construction:
## [1] age       hangang   latitude  longitude
## 
## Root node error: 145496075/172166 = 845.09
## 
## n= 172166 
## 
##          CP nsplit rel error  xerror      xstd
## 1  0.069013      0   1.00000 1.00001 0.0103481
## 2  0.034999      1   0.93099 0.93101 0.0096167
## 3  0.026125      7   0.69402 0.69415 0.0082007
## 4  0.020981      8   0.66789 0.66805 0.0072792
## 5  0.020381     10   0.62593 0.63476 0.0062552
## 6  0.016716     11   0.60555 0.60576 0.0057860
## 7  0.016417     14   0.55540 0.55299 0.0054907
## 8  0.015418     16   0.52257 0.52281 0.0052975
## 9  0.013322     18   0.49173 0.49196 0.0051414
## 10 0.012488     19   0.47841 0.47779 0.0050805
## 11 0.011419     20   0.46592 0.46616 0.0049726
## 12 0.010563     21   0.45450 0.45649 0.0049170
## 13 0.010320     23   0.43338 0.43501 0.0047828
## 14 0.010088     24   0.42306 0.42435 0.0047200
## 15 0.010000     25   0.41297 0.41904 0.0046919
```

![](sample_files/figure-html/unnamed-chunk-8-2.png)&lt;!-- --&gt;![](sample_files/figure-html/unnamed-chunk-8-3.png)&lt;!-- --&gt;
  

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3. XGboost  
#### [ 중국집 배달 건수를 모델링 ]   

  - XGboost 모델에서 hyper parameter를 특정하기 전,  
    train set과 test set을 나누어 모델링 진행
  - depth = 6, eta = 0.3
  

```r
# 데이터 불러오기 &amp; 중국집 치킨 피자로 나누기.
data &lt;- read.csv("final_0618.csv",head=TRUE,  fileEncoding = "euc-kr")
data_chinese &lt;- data %&gt;% filter(type=="중국집")
data_chicken &lt;- data %&gt;% filter(type=="치킨")
data_pizza &lt;- data %&gt;% filter(type=="피자")


#----------&lt;     중국집    &gt;------------#
# 70% train, 30% test 나누기

idx_chinese &lt;- sample(1:nrow(data_chinese),nrow(data_chinese)*0.7)
train.df_chinese &lt;- data_chinese[idx_chinese,]
test.df_chinese &lt;- data_chinese[-idx_chinese,]


# sparse matrix (원핫인코딩)
library(Matrix)                                              
```

```
## 
## Attaching package: 'Matrix'
```

```
## The following object is masked from 'package:tidyr':
## 
##     expand
```

```r
sparse_matrix_train_chinese &lt;- sparse.model.matrix(call ~ -1+day+gender+age+month+
                                                     longitude+latitude+gangsu+rain+
                                                     temperature+holiday+KBO+soccer,
                                                   data = train.df_chinese)
sparse_matrix_test_chinese  &lt;- sparse.model.matrix(call ~ -1+day+gender+age+month+
                                                    longitude+latitude+gangsu+rain+
                                                    temperature+holiday+KBO+soccer,
                                                  data =  test.df_chinese)

# output vector를 지정해주기 및, observation vector 생성
output_vector_chinese = train.df_chinese[,"call"]
obs_chinese &lt;- test.df_chinese[,"call"]


# 모델링
library(xgboost)
```

```
## 
## Attaching package: 'xgboost'
```

```
## The following object is masked from 'package:rattle':
## 
##     xgboost
```

```
## The following object is masked from 'package:dplyr':
## 
##     slice
```

```r
xgb_chinese &lt;- xgboost(data = sparse_matrix_train_chinese,
                       label = output_vector_chinese,
                       max_depth = 6, eta = 0.3, nthread = 3, nrounds = 500,
                       objective = "count:poisson")
```

```
## [1]	train-poisson-nloglik:60.172714 
## [2]	train-poisson-nloglik:56.405308 
## [3]	train-poisson-nloglik:52.638988 
## [4]	train-poisson-nloglik:48.950703 
## [5]	train-poisson-nloglik:45.384064 
## [6]	train-poisson-nloglik:41.765320 
## [7]	train-poisson-nloglik:38.326698 
## [8]	train-poisson-nloglik:34.973431 
## [9]	train-poisson-nloglik:31.690010 
## [10]	train-poisson-nloglik:28.602589 
## [11]	train-poisson-nloglik:25.667231 
## [12]	train-poisson-nloglik:22.973967 
## [13]	train-poisson-nloglik:20.549868 
## [14]	train-poisson-nloglik:18.356667 
## [15]	train-poisson-nloglik:16.420664 
## [16]	train-poisson-nloglik:14.673810 
## [17]	train-poisson-nloglik:13.195713 
## [18]	train-poisson-nloglik:11.891382 
## [19]	train-poisson-nloglik:10.765119 
## [20]	train-poisson-nloglik:9.867288 
## [21]	train-poisson-nloglik:8.955310 
## [22]	train-poisson-nloglik:8.287602 
## [23]	train-poisson-nloglik:7.661305 
## [24]	train-poisson-nloglik:6.932707 
## [25]	train-poisson-nloglik:6.662766 
## [26]	train-poisson-nloglik:6.465403 
## [27]	train-poisson-nloglik:6.299905 
## [28]	train-poisson-nloglik:5.960481 
## [29]	train-poisson-nloglik:5.801265 
## [30]	train-poisson-nloglik:5.677227 
## [31]	train-poisson-nloglik:5.493283 
## [32]	train-poisson-nloglik:5.318213 
## [33]	train-poisson-nloglik:5.220134 
## [34]	train-poisson-nloglik:5.104477 
## [35]	train-poisson-nloglik:4.916918 
## [36]	train-poisson-nloglik:4.836585 
## [37]	train-poisson-nloglik:4.774087 
## [38]	train-poisson-nloglik:4.675895 
## [39]	train-poisson-nloglik:4.580281 
## [40]	train-poisson-nloglik:4.472924 
## [41]	train-poisson-nloglik:4.404420 
## [42]	train-poisson-nloglik:4.341551 
## [43]	train-poisson-nloglik:4.262658 
## [44]	train-poisson-nloglik:4.184937 
## [45]	train-poisson-nloglik:4.078735 
## [46]	train-poisson-nloglik:4.051612 
## [47]	train-poisson-nloglik:4.002502 
## [48]	train-poisson-nloglik:3.910903 
## [49]	train-poisson-nloglik:3.875947 
## [50]	train-poisson-nloglik:3.847168 
## [51]	train-poisson-nloglik:3.791621 
## [52]	train-poisson-nloglik:3.778249 
## [53]	train-poisson-nloglik:3.724723 
## [54]	train-poisson-nloglik:3.684217 
## [55]	train-poisson-nloglik:3.658006 
## [56]	train-poisson-nloglik:3.644455 
## [57]	train-poisson-nloglik:3.615975 
## [58]	train-poisson-nloglik:3.582953 
## [59]	train-poisson-nloglik:3.543154 
## [60]	train-poisson-nloglik:3.503771 
## [61]	train-poisson-nloglik:3.493344 
## [62]	train-poisson-nloglik:3.477348 
## [63]	train-poisson-nloglik:3.464314 
## [64]	train-poisson-nloglik:3.441154 
## [65]	train-poisson-nloglik:3.424624 
## [66]	train-poisson-nloglik:3.412606 
## [67]	train-poisson-nloglik:3.403604 
## [68]	train-poisson-nloglik:3.383117 
## [69]	train-poisson-nloglik:3.377161 
## [70]	train-poisson-nloglik:3.371776 
## [71]	train-poisson-nloglik:3.350689 
## [72]	train-poisson-nloglik:3.339490 
## [73]	train-poisson-nloglik:3.299876 
## [74]	train-poisson-nloglik:3.280290 
## [75]	train-poisson-nloglik:3.254372 
## [76]	train-poisson-nloglik:3.230306 
## [77]	train-poisson-nloglik:3.208115 
## [78]	train-poisson-nloglik:3.198646 
## [79]	train-poisson-nloglik:3.193034 
## [80]	train-poisson-nloglik:3.187317 
## [81]	train-poisson-nloglik:3.179868 
## [82]	train-poisson-nloglik:3.166543 
## [83]	train-poisson-nloglik:3.149885 
## [84]	train-poisson-nloglik:3.139398 
## [85]	train-poisson-nloglik:3.135780 
## [86]	train-poisson-nloglik:3.122982 
## [87]	train-poisson-nloglik:3.114652 
## [88]	train-poisson-nloglik:3.108054 
## [89]	train-poisson-nloglik:3.104992 
## [90]	train-poisson-nloglik:3.095679 
## [91]	train-poisson-nloglik:3.085448 
## [92]	train-poisson-nloglik:3.081824 
## [93]	train-poisson-nloglik:3.075382 
## [94]	train-poisson-nloglik:3.063683 
## [95]	train-poisson-nloglik:3.060109 
## [96]	train-poisson-nloglik:3.056972 
## [97]	train-poisson-nloglik:3.042948 
## [98]	train-poisson-nloglik:3.036326 
## [99]	train-poisson-nloglik:3.032972 
## [100]	train-poisson-nloglik:3.029578 
## [101]	train-poisson-nloglik:3.028229 
## [102]	train-poisson-nloglik:3.025034 
## [103]	train-poisson-nloglik:3.021555 
## [104]	train-poisson-nloglik:3.012121 
## [105]	train-poisson-nloglik:3.010038 
## [106]	train-poisson-nloglik:3.007131 
## [107]	train-poisson-nloglik:3.000255 
## [108]	train-poisson-nloglik:2.992710 
## [109]	train-poisson-nloglik:2.990007 
## [110]	train-poisson-nloglik:2.983500 
## [111]	train-poisson-nloglik:2.976565 
## [112]	train-poisson-nloglik:2.972847 
## [113]	train-poisson-nloglik:2.971166 
## [114]	train-poisson-nloglik:2.961379 
## [115]	train-poisson-nloglik:2.952834 
## [116]	train-poisson-nloglik:2.940396 
## [117]	train-poisson-nloglik:2.935761 
## [118]	train-poisson-nloglik:2.927676 
## [119]	train-poisson-nloglik:2.925678 
## [120]	train-poisson-nloglik:2.921467 
## [121]	train-poisson-nloglik:2.907907 
## [122]	train-poisson-nloglik:2.901988 
## [123]	train-poisson-nloglik:2.899577 
## [124]	train-poisson-nloglik:2.897172 
## [125]	train-poisson-nloglik:2.895019 
## [126]	train-poisson-nloglik:2.893454 
## [127]	train-poisson-nloglik:2.890993 
## [128]	train-poisson-nloglik:2.883836 
## [129]	train-poisson-nloglik:2.880108 
## [130]	train-poisson-nloglik:2.878280 
## [131]	train-poisson-nloglik:2.874733 
## [132]	train-poisson-nloglik:2.872885 
## [133]	train-poisson-nloglik:2.870244 
## [134]	train-poisson-nloglik:2.867777 
## [135]	train-poisson-nloglik:2.867056 
## [136]	train-poisson-nloglik:2.860833 
## [137]	train-poisson-nloglik:2.857177 
## [138]	train-poisson-nloglik:2.854308 
## [139]	train-poisson-nloglik:2.850438 
## [140]	train-poisson-nloglik:2.848585 
## [141]	train-poisson-nloglik:2.844838 
## [142]	train-poisson-nloglik:2.843650 
## [143]	train-poisson-nloglik:2.837756 
## [144]	train-poisson-nloglik:2.834802 
## [145]	train-poisson-nloglik:2.828315 
## [146]	train-poisson-nloglik:2.827620 
## [147]	train-poisson-nloglik:2.825296 
## [148]	train-poisson-nloglik:2.822814 
## [149]	train-poisson-nloglik:2.818641 
## [150]	train-poisson-nloglik:2.817589 
## [151]	train-poisson-nloglik:2.815598 
## [152]	train-poisson-nloglik:2.815117 
## [153]	train-poisson-nloglik:2.811346 
## [154]	train-poisson-nloglik:2.810443 
## [155]	train-poisson-nloglik:2.804645 
## [156]	train-poisson-nloglik:2.803550 
## [157]	train-poisson-nloglik:2.802750 
## [158]	train-poisson-nloglik:2.802280 
## [159]	train-poisson-nloglik:2.800710 
## [160]	train-poisson-nloglik:2.799451 
## [161]	train-poisson-nloglik:2.794332 
## [162]	train-poisson-nloglik:2.792345 
## [163]	train-poisson-nloglik:2.788567 
## [164]	train-poisson-nloglik:2.787957 
## [165]	train-poisson-nloglik:2.784172 
## [166]	train-poisson-nloglik:2.779372 
## [167]	train-poisson-nloglik:2.777442 
## [168]	train-poisson-nloglik:2.776375 
## [169]	train-poisson-nloglik:2.774781 
## [170]	train-poisson-nloglik:2.773664 
## [171]	train-poisson-nloglik:2.772196 
## [172]	train-poisson-nloglik:2.769344 
## [173]	train-poisson-nloglik:2.768380 
## [174]	train-poisson-nloglik:2.767740 
## [175]	train-poisson-nloglik:2.767109 
## [176]	train-poisson-nloglik:2.766344 
## [177]	train-poisson-nloglik:2.765339 
## [178]	train-poisson-nloglik:2.764180 
## [179]	train-poisson-nloglik:2.763204 
## [180]	train-poisson-nloglik:2.762114 
## [181]	train-poisson-nloglik:2.759620 
## [182]	train-poisson-nloglik:2.758404 
## [183]	train-poisson-nloglik:2.757275 
## [184]	train-poisson-nloglik:2.756055 
## [185]	train-poisson-nloglik:2.755285 
## [186]	train-poisson-nloglik:2.754312 
## [187]	train-poisson-nloglik:2.754040 
## [188]	train-poisson-nloglik:2.752914 
## [189]	train-poisson-nloglik:2.752625 
## [190]	train-poisson-nloglik:2.752296 
## [191]	train-poisson-nloglik:2.752060 
## [192]	train-poisson-nloglik:2.751914 
## [193]	train-poisson-nloglik:2.751834 
## [194]	train-poisson-nloglik:2.750576 
## [195]	train-poisson-nloglik:2.749451 
## [196]	train-poisson-nloglik:2.748841 
## [197]	train-poisson-nloglik:2.748402 
## [198]	train-poisson-nloglik:2.747859 
## [199]	train-poisson-nloglik:2.747367 
## [200]	train-poisson-nloglik:2.746523 
## [201]	train-poisson-nloglik:2.746227 
## [202]	train-poisson-nloglik:2.746026 
## [203]	train-poisson-nloglik:2.745901 
## [204]	train-poisson-nloglik:2.744734 
## [205]	train-poisson-nloglik:2.743515 
## [206]	train-poisson-nloglik:2.742875 
## [207]	train-poisson-nloglik:2.742091 
## [208]	train-poisson-nloglik:2.741486 
## [209]	train-poisson-nloglik:2.740444 
## [210]	train-poisson-nloglik:2.738782 
## [211]	train-poisson-nloglik:2.738212 
## [212]	train-poisson-nloglik:2.737436 
## [213]	train-poisson-nloglik:2.737194 
## [214]	train-poisson-nloglik:2.736748 
## [215]	train-poisson-nloglik:2.735817 
## [216]	train-poisson-nloglik:2.734175 
## [217]	train-poisson-nloglik:2.733756 
## [218]	train-poisson-nloglik:2.733174 
## [219]	train-poisson-nloglik:2.733002 
## [220]	train-poisson-nloglik:2.732928 
## [221]	train-poisson-nloglik:2.731417 
## [222]	train-poisson-nloglik:2.731004 
## [223]	train-poisson-nloglik:2.729620 
## [224]	train-poisson-nloglik:2.729418 
## [225]	train-poisson-nloglik:2.729068 
## [226]	train-poisson-nloglik:2.728989 
## [227]	train-poisson-nloglik:2.728806 
## [228]	train-poisson-nloglik:2.728219 
## [229]	train-poisson-nloglik:2.726549 
## [230]	train-poisson-nloglik:2.726125 
## [231]	train-poisson-nloglik:2.725770 
## [232]	train-poisson-nloglik:2.725518 
## [233]	train-poisson-nloglik:2.724657 
## [234]	train-poisson-nloglik:2.723550 
## [235]	train-poisson-nloglik:2.721420 
## [236]	train-poisson-nloglik:2.721194 
## [237]	train-poisson-nloglik:2.720990 
## [238]	train-poisson-nloglik:2.720208 
## [239]	train-poisson-nloglik:2.720014 
## [240]	train-poisson-nloglik:2.719241 
## [241]	train-poisson-nloglik:2.717437 
## [242]	train-poisson-nloglik:2.717067 
## [243]	train-poisson-nloglik:2.715976 
## [244]	train-poisson-nloglik:2.715034 
## [245]	train-poisson-nloglik:2.714818 
## [246]	train-poisson-nloglik:2.714296 
## [247]	train-poisson-nloglik:2.714078 
## [248]	train-poisson-nloglik:2.713407 
## [249]	train-poisson-nloglik:2.712349 
## [250]	train-poisson-nloglik:2.712141 
## [251]	train-poisson-nloglik:2.712074 
## [252]	train-poisson-nloglik:2.711112 
## [253]	train-poisson-nloglik:2.710118 
## [254]	train-poisson-nloglik:2.708912 
## [255]	train-poisson-nloglik:2.708413 
## [256]	train-poisson-nloglik:2.708011 
## [257]	train-poisson-nloglik:2.707753 
## [258]	train-poisson-nloglik:2.706929 
## [259]	train-poisson-nloglik:2.706115 
## [260]	train-poisson-nloglik:2.705480 
## [261]	train-poisson-nloglik:2.705252 
## [262]	train-poisson-nloglik:2.704538 
## [263]	train-poisson-nloglik:2.703760 
## [264]	train-poisson-nloglik:2.703191 
## [265]	train-poisson-nloglik:2.702931 
## [266]	train-poisson-nloglik:2.702449 
## [267]	train-poisson-nloglik:2.702125 
## [268]	train-poisson-nloglik:2.702073 
## [269]	train-poisson-nloglik:2.701643 
## [270]	train-poisson-nloglik:2.700667 
## [271]	train-poisson-nloglik:2.700380 
## [272]	train-poisson-nloglik:2.700053 
## [273]	train-poisson-nloglik:2.699123 
## [274]	train-poisson-nloglik:2.698809 
## [275]	train-poisson-nloglik:2.698765 
## [276]	train-poisson-nloglik:2.698547 
## [277]	train-poisson-nloglik:2.698234 
## [278]	train-poisson-nloglik:2.697925 
## [279]	train-poisson-nloglik:2.697375 
## [280]	train-poisson-nloglik:2.696746 
## [281]	train-poisson-nloglik:2.696289 
## [282]	train-poisson-nloglik:2.696204 
## [283]	train-poisson-nloglik:2.695890 
## [284]	train-poisson-nloglik:2.695194 
## [285]	train-poisson-nloglik:2.695073 
## [286]	train-poisson-nloglik:2.694904 
## [287]	train-poisson-nloglik:2.694819 
## [288]	train-poisson-nloglik:2.693927 
## [289]	train-poisson-nloglik:2.693579 
## [290]	train-poisson-nloglik:2.693306 
## [291]	train-poisson-nloglik:2.692358 
## [292]	train-poisson-nloglik:2.690823 
## [293]	train-poisson-nloglik:2.690508 
## [294]	train-poisson-nloglik:2.690313 
## [295]	train-poisson-nloglik:2.690035 
## [296]	train-poisson-nloglik:2.689631 
## [297]	train-poisson-nloglik:2.689347 
## [298]	train-poisson-nloglik:2.689131 
## [299]	train-poisson-nloglik:2.688612 
## [300]	train-poisson-nloglik:2.687962 
## [301]	train-poisson-nloglik:2.687609 
## [302]	train-poisson-nloglik:2.687215 
## [303]	train-poisson-nloglik:2.686708 
## [304]	train-poisson-nloglik:2.686288 
## [305]	train-poisson-nloglik:2.686061 
## [306]	train-poisson-nloglik:2.685404 
## [307]	train-poisson-nloglik:2.685306 
## [308]	train-poisson-nloglik:2.684978 
## [309]	train-poisson-nloglik:2.684637 
## [310]	train-poisson-nloglik:2.684277 
## [311]	train-poisson-nloglik:2.683943 
## [312]	train-poisson-nloglik:2.683394 
## [313]	train-poisson-nloglik:2.683169 
## [314]	train-poisson-nloglik:2.683041 
## [315]	train-poisson-nloglik:2.682744 
## [316]	train-poisson-nloglik:2.682579 
## [317]	train-poisson-nloglik:2.682480 
## [318]	train-poisson-nloglik:2.681929 
## [319]	train-poisson-nloglik:2.681454 
## [320]	train-poisson-nloglik:2.681368 
## [321]	train-poisson-nloglik:2.679928 
## [322]	train-poisson-nloglik:2.679869 
## [323]	train-poisson-nloglik:2.679764 
## [324]	train-poisson-nloglik:2.679522 
## [325]	train-poisson-nloglik:2.679410 
## [326]	train-poisson-nloglik:2.679119 
## [327]	train-poisson-nloglik:2.678470 
## [328]	train-poisson-nloglik:2.677939 
## [329]	train-poisson-nloglik:2.677719 
## [330]	train-poisson-nloglik:2.677684 
## [331]	train-poisson-nloglik:2.677610 
## [332]	train-poisson-nloglik:2.677454 
## [333]	train-poisson-nloglik:2.677132 
## [334]	train-poisson-nloglik:2.676360 
## [335]	train-poisson-nloglik:2.675832 
## [336]	train-poisson-nloglik:2.675471 
## [337]	train-poisson-nloglik:2.675052 
## [338]	train-poisson-nloglik:2.674607 
## [339]	train-poisson-nloglik:2.674394 
## [340]	train-poisson-nloglik:2.674167 
## [341]	train-poisson-nloglik:2.674046 
## [342]	train-poisson-nloglik:2.673999 
## [343]	train-poisson-nloglik:2.673740 
## [344]	train-poisson-nloglik:2.673450 
## [345]	train-poisson-nloglik:2.673388 
## [346]	train-poisson-nloglik:2.672997 
## [347]	train-poisson-nloglik:2.672703 
## [348]	train-poisson-nloglik:2.672305 
## [349]	train-poisson-nloglik:2.672117 
## [350]	train-poisson-nloglik:2.671664 
## [351]	train-poisson-nloglik:2.671228 
## [352]	train-poisson-nloglik:2.668961 
## [353]	train-poisson-nloglik:2.668600 
## [354]	train-poisson-nloglik:2.668293 
## [355]	train-poisson-nloglik:2.667972 
## [356]	train-poisson-nloglik:2.667348 
## [357]	train-poisson-nloglik:2.665015 
## [358]	train-poisson-nloglik:2.664584 
## [359]	train-poisson-nloglik:2.664330 
## [360]	train-poisson-nloglik:2.663946 
## [361]	train-poisson-nloglik:2.663587 
## [362]	train-poisson-nloglik:2.663313 
## [363]	train-poisson-nloglik:2.663071 
## [364]	train-poisson-nloglik:2.661996 
## [365]	train-poisson-nloglik:2.661525 
## [366]	train-poisson-nloglik:2.661338 
## [367]	train-poisson-nloglik:2.660673 
## [368]	train-poisson-nloglik:2.660542 
## [369]	train-poisson-nloglik:2.660477 
## [370]	train-poisson-nloglik:2.660143 
## [371]	train-poisson-nloglik:2.660118 
## [372]	train-poisson-nloglik:2.660052 
## [373]	train-poisson-nloglik:2.659441 
## [374]	train-poisson-nloglik:2.659118 
## [375]	train-poisson-nloglik:2.659031 
## [376]	train-poisson-nloglik:2.658787 
## [377]	train-poisson-nloglik:2.658604 
## [378]	train-poisson-nloglik:2.658427 
## [379]	train-poisson-nloglik:2.658064 
## [380]	train-poisson-nloglik:2.658009 
## [381]	train-poisson-nloglik:2.657814 
## [382]	train-poisson-nloglik:2.657575 
## [383]	train-poisson-nloglik:2.656872 
## [384]	train-poisson-nloglik:2.656662 
## [385]	train-poisson-nloglik:2.656483 
## [386]	train-poisson-nloglik:2.656400 
## [387]	train-poisson-nloglik:2.656319 
## [388]	train-poisson-nloglik:2.655575 
## [389]	train-poisson-nloglik:2.655476 
## [390]	train-poisson-nloglik:2.655113 
## [391]	train-poisson-nloglik:2.655055 
## [392]	train-poisson-nloglik:2.654882 
## [393]	train-poisson-nloglik:2.654401 
## [394]	train-poisson-nloglik:2.654060 
## [395]	train-poisson-nloglik:2.653992 
## [396]	train-poisson-nloglik:2.653827 
## [397]	train-poisson-nloglik:2.653523 
## [398]	train-poisson-nloglik:2.652978 
## [399]	train-poisson-nloglik:2.652599 
## [400]	train-poisson-nloglik:2.652366 
## [401]	train-poisson-nloglik:2.652259 
## [402]	train-poisson-nloglik:2.651932 
## [403]	train-poisson-nloglik:2.651728 
## [404]	train-poisson-nloglik:2.651272 
## [405]	train-poisson-nloglik:2.651046 
## [406]	train-poisson-nloglik:2.650951 
## [407]	train-poisson-nloglik:2.650604 
## [408]	train-poisson-nloglik:2.650248 
## [409]	train-poisson-nloglik:2.650065 
## [410]	train-poisson-nloglik:2.649888 
## [411]	train-poisson-nloglik:2.649791 
## [412]	train-poisson-nloglik:2.649472 
## [413]	train-poisson-nloglik:2.649117 
## [414]	train-poisson-nloglik:2.648861 
## [415]	train-poisson-nloglik:2.648623 
## [416]	train-poisson-nloglik:2.647021 
## [417]	train-poisson-nloglik:2.646706 
## [418]	train-poisson-nloglik:2.646505 
## [419]	train-poisson-nloglik:2.646307 
## [420]	train-poisson-nloglik:2.646269 
## [421]	train-poisson-nloglik:2.646012 
## [422]	train-poisson-nloglik:2.645612 
## [423]	train-poisson-nloglik:2.645298 
## [424]	train-poisson-nloglik:2.645067 
## [425]	train-poisson-nloglik:2.644930 
## [426]	train-poisson-nloglik:2.644713 
## [427]	train-poisson-nloglik:2.644693 
## [428]	train-poisson-nloglik:2.644565 
## [429]	train-poisson-nloglik:2.644385 
## [430]	train-poisson-nloglik:2.644059 
## [431]	train-poisson-nloglik:2.643846 
## [432]	train-poisson-nloglik:2.643751 
## [433]	train-poisson-nloglik:2.643558 
## [434]	train-poisson-nloglik:2.643329 
## [435]	train-poisson-nloglik:2.643119 
## [436]	train-poisson-nloglik:2.642985 
## [437]	train-poisson-nloglik:2.642727 
## [438]	train-poisson-nloglik:2.642500 
## [439]	train-poisson-nloglik:2.642321 
## [440]	train-poisson-nloglik:2.642150 
## [441]	train-poisson-nloglik:2.641755 
## [442]	train-poisson-nloglik:2.641653 
## [443]	train-poisson-nloglik:2.641493 
## [444]	train-poisson-nloglik:2.641223 
## [445]	train-poisson-nloglik:2.641014 
## [446]	train-poisson-nloglik:2.640883 
## [447]	train-poisson-nloglik:2.640424 
## [448]	train-poisson-nloglik:2.640287 
## [449]	train-poisson-nloglik:2.640205 
## [450]	train-poisson-nloglik:2.640116 
## [451]	train-poisson-nloglik:2.640054 
## [452]	train-poisson-nloglik:2.639941 
## [453]	train-poisson-nloglik:2.639928 
## [454]	train-poisson-nloglik:2.639877 
## [455]	train-poisson-nloglik:2.639713 
## [456]	train-poisson-nloglik:2.639549 
## [457]	train-poisson-nloglik:2.639120 
## [458]	train-poisson-nloglik:2.638819 
## [459]	train-poisson-nloglik:2.638371 
## [460]	train-poisson-nloglik:2.638090 
## [461]	train-poisson-nloglik:2.637949 
## [462]	train-poisson-nloglik:2.637878 
## [463]	train-poisson-nloglik:2.637462 
## [464]	train-poisson-nloglik:2.637246 
## [465]	train-poisson-nloglik:2.637126 
## [466]	train-poisson-nloglik:2.636743 
## [467]	train-poisson-nloglik:2.636199 
## [468]	train-poisson-nloglik:2.635828 
## [469]	train-poisson-nloglik:2.635640 
## [470]	train-poisson-nloglik:2.635583 
## [471]	train-poisson-nloglik:2.635019 
## [472]	train-poisson-nloglik:2.634674 
## [473]	train-poisson-nloglik:2.634580 
## [474]	train-poisson-nloglik:2.634466 
## [475]	train-poisson-nloglik:2.634229 
## [476]	train-poisson-nloglik:2.633892 
## [477]	train-poisson-nloglik:2.633757 
## [478]	train-poisson-nloglik:2.633683 
## [479]	train-poisson-nloglik:2.633408 
## [480]	train-poisson-nloglik:2.633153 
## [481]	train-poisson-nloglik:2.632313 
## [482]	train-poisson-nloglik:2.632245 
## [483]	train-poisson-nloglik:2.632207 
## [484]	train-poisson-nloglik:2.631871 
## [485]	train-poisson-nloglik:2.631763 
## [486]	train-poisson-nloglik:2.631651 
## [487]	train-poisson-nloglik:2.631427 
## [488]	train-poisson-nloglik:2.631376 
## [489]	train-poisson-nloglik:2.631249 
## [490]	train-poisson-nloglik:2.630947 
## [491]	train-poisson-nloglik:2.630741 
## [492]	train-poisson-nloglik:2.630523 
## [493]	train-poisson-nloglik:2.630264 
## [494]	train-poisson-nloglik:2.630093 
## [495]	train-poisson-nloglik:2.629638 
## [496]	train-poisson-nloglik:2.629495 
## [497]	train-poisson-nloglik:2.629406 
## [498]	train-poisson-nloglik:2.629367 
## [499]	train-poisson-nloglik:2.629345 
## [500]	train-poisson-nloglik:2.629185
```

```r
# 모델링 결과
library(caret)
```

```
## Loading required package: lattice
```

```
## 
## Attaching package: 'caret'
```

```
## The following object is masked from 'package:purrr':
## 
##     lift
```

```r
pred_chinese &lt;- predict(xgb_chinese,sparse_matrix_test_chinese)
caret::MAE(pred_chinese,obs_chinese)
```

```
## [1] 3.419518
```

```r
caret::RMSE(pred_chinese,obs_chinese)
```

```
## [1] 6.503665
```

```r
# Variable Importance Plot
importance_chinese &lt;- xgb.importance(feature_names = colnames(sparse_matrix_train_chinese),
                                     model = xgb_chinese)
head(importance_chinese)
```

```
##        Feature       Gain      Cover  Frequency
## 1:    latitude 0.39461431 0.39941817 0.26286841
## 2:   longitude 0.36175451 0.25734895 0.21657423
## 3: age30대40대 0.10372565 0.01905902 0.05880735
## 4: age50대이상 0.05961145 0.01541235 0.04129807
## 5:     age20대 0.02500810 0.01524432 0.04074804
## 6:       month 0.02148898 0.02913655 0.05802814
```

```r
importance_chinese &lt;- importance_chinese %&gt;%
  as.data.frame() %&gt;% 
  arrange(desc(Gain)) %&gt;% 
  mutate(Feature = as.factor(Feature))
  

varImp_chinese &lt;- ggplot(data = importance_chinese[1:15,],
       aes(x=reorder(Feature,Gain), y=Gain,
           fill=reorder(Feature,Gain),color=reorder(Feature,Gain))) + 
  geom_bar(stat="identity",show.legend = F) + coord_flip() +
  ylab("Variable Importance") +
  xlab("") +
  ggtitle("Variable Importance Plot by Gain") +
  scale_fill_viridis_d(option = "plasma",direction=-1,begin=0.3) + 
  theme_bw()

theme_update(text=element_text(family="NanumGothic"))
theme_set(theme_gray(base_family='NanumGothic'))
par(family="NanumGothic")
library(extrafont)
```

```
## Registering fonts with R
```

```r
font_import()
```

```
## Importing fonts may take a few minutes, depending on the number of fonts and the speed of the system.
## Continue? [y/n]
```

```
## Exiting.
```

```r
varImp_chinese  
```

![](sample_files/figure-html/unnamed-chunk-9-1.png)&lt;!-- --&gt;

```r
#----------&lt;    치킨집   &gt;------------#


# 70% train, 30% test 나누기

idx_chicken &lt;- sample(1:nrow(data_chicken),nrow(data_chicken)*0.7)
train.df_chicken &lt;- data_chicken[idx_chicken,]
test.df_chicken &lt;- data_chicken[-idx_chicken,]


# sparse matrix (원핫인코딩)
library(Matrix)                                              
sparse_matrix_train_chicken &lt;- sparse.model.matrix(call ~ -1+day+gender+age+month+
                                                     longitude+latitude+gangsu+rain+
                                                     temperature+holiday+KBO+soccer,
                                                   data = train.df_chicken)
sparse_matrix_test_chicken  &lt;- sparse.model.matrix(call ~ -1+day+gender+age+month+
                                                     longitude+latitude+gangsu+rain+
                                                     temperature+holiday+KBO+soccer,
                                                   data =  test.df_chicken)

# output vector를 지정해주기 및, observation vector 생성
output_vector_chicken = train.df_chicken[,"call"]
obs_chicken &lt;- test.df_chicken[,"call"]


# 모델링
library(xgboost)
xgb_chicken &lt;- xgboost(data = sparse_matrix_train_chicken,
                       label = output_vector_chicken,
                       max_depth = 6, eta = 0.3, nthread = 3, nrounds = 500,
                       objective = "count:poisson")
```

```
## [1]	train-poisson-nloglik:55.189785 
## [2]	train-poisson-nloglik:51.699234 
## [3]	train-poisson-nloglik:48.204407 
## [4]	train-poisson-nloglik:44.789066 
## [5]	train-poisson-nloglik:41.502148 
## [6]	train-poisson-nloglik:38.155296 
## [7]	train-poisson-nloglik:34.982731 
## [8]	train-poisson-nloglik:31.900204 
## [9]	train-poisson-nloglik:28.889359 
## [10]	train-poisson-nloglik:26.074192 
## [11]	train-poisson-nloglik:23.411726 
## [12]	train-poisson-nloglik:21.064798 
## [13]	train-poisson-nloglik:18.946871 
## [14]	train-poisson-nloglik:17.056080 
## [15]	train-poisson-nloglik:15.482821 
## [16]	train-poisson-nloglik:14.054835 
## [17]	train-poisson-nloglik:12.718084 
## [18]	train-poisson-nloglik:11.663622 
## [19]	train-poisson-nloglik:10.715467 
## [20]	train-poisson-nloglik:9.964520 
## [21]	train-poisson-nloglik:9.267046 
## [22]	train-poisson-nloglik:8.732508 
## [23]	train-poisson-nloglik:8.360110 
## [24]	train-poisson-nloglik:7.846823 
## [25]	train-poisson-nloglik:7.500715 
## [26]	train-poisson-nloglik:7.161524 
## [27]	train-poisson-nloglik:6.980927 
## [28]	train-poisson-nloglik:6.862864 
## [29]	train-poisson-nloglik:6.646163 
## [30]	train-poisson-nloglik:6.445910 
## [31]	train-poisson-nloglik:6.184900 
## [32]	train-poisson-nloglik:5.975807 
## [33]	train-poisson-nloglik:5.813043 
## [34]	train-poisson-nloglik:5.555369 
## [35]	train-poisson-nloglik:5.476107 
## [36]	train-poisson-nloglik:5.409504 
## [37]	train-poisson-nloglik:5.081963 
## [38]	train-poisson-nloglik:4.831079 
## [39]	train-poisson-nloglik:4.769712 
## [40]	train-poisson-nloglik:4.587963 
## [41]	train-poisson-nloglik:4.554064 
## [42]	train-poisson-nloglik:4.452699 
## [43]	train-poisson-nloglik:4.401228 
## [44]	train-poisson-nloglik:4.279131 
## [45]	train-poisson-nloglik:4.257708 
## [46]	train-poisson-nloglik:4.104053 
## [47]	train-poisson-nloglik:4.050104 
## [48]	train-poisson-nloglik:3.984967 
## [49]	train-poisson-nloglik:3.946518 
## [50]	train-poisson-nloglik:3.846862 
## [51]	train-poisson-nloglik:3.828154 
## [52]	train-poisson-nloglik:3.773480 
## [53]	train-poisson-nloglik:3.746698 
## [54]	train-poisson-nloglik:3.719005 
## [55]	train-poisson-nloglik:3.655983 
## [56]	train-poisson-nloglik:3.641346 
## [57]	train-poisson-nloglik:3.606191 
## [58]	train-poisson-nloglik:3.586116 
## [59]	train-poisson-nloglik:3.568115 
## [60]	train-poisson-nloglik:3.532074 
## [61]	train-poisson-nloglik:3.510216 
## [62]	train-poisson-nloglik:3.459534 
## [63]	train-poisson-nloglik:3.450959 
## [64]	train-poisson-nloglik:3.427922 
## [65]	train-poisson-nloglik:3.383322 
## [66]	train-poisson-nloglik:3.369322 
## [67]	train-poisson-nloglik:3.360683 
## [68]	train-poisson-nloglik:3.347078 
## [69]	train-poisson-nloglik:3.340782 
## [70]	train-poisson-nloglik:3.323681 
## [71]	train-poisson-nloglik:3.306161 
## [72]	train-poisson-nloglik:3.294769 
## [73]	train-poisson-nloglik:3.290921 
## [74]	train-poisson-nloglik:3.280262 
## [75]	train-poisson-nloglik:3.270684 
## [76]	train-poisson-nloglik:3.259135 
## [77]	train-poisson-nloglik:3.254807 
## [78]	train-poisson-nloglik:3.235222 
## [79]	train-poisson-nloglik:3.201657 
## [80]	train-poisson-nloglik:3.191276 
## [81]	train-poisson-nloglik:3.179792 
## [82]	train-poisson-nloglik:3.159280 
## [83]	train-poisson-nloglik:3.150688 
## [84]	train-poisson-nloglik:3.145069 
## [85]	train-poisson-nloglik:3.139600 
## [86]	train-poisson-nloglik:3.127853 
## [87]	train-poisson-nloglik:3.118486 
## [88]	train-poisson-nloglik:3.114650 
## [89]	train-poisson-nloglik:3.107241 
## [90]	train-poisson-nloglik:3.096192 
## [91]	train-poisson-nloglik:3.093244 
## [92]	train-poisson-nloglik:3.083690 
## [93]	train-poisson-nloglik:3.080216 
## [94]	train-poisson-nloglik:3.075011 
## [95]	train-poisson-nloglik:3.064387 
## [96]	train-poisson-nloglik:3.057448 
## [97]	train-poisson-nloglik:3.041991 
## [98]	train-poisson-nloglik:3.037946 
## [99]	train-poisson-nloglik:3.027913 
## [100]	train-poisson-nloglik:3.024945 
## [101]	train-poisson-nloglik:3.020584 
## [102]	train-poisson-nloglik:3.009548 
## [103]	train-poisson-nloglik:3.006770 
## [104]	train-poisson-nloglik:2.994471 
## [105]	train-poisson-nloglik:2.989761 
## [106]	train-poisson-nloglik:2.981586 
## [107]	train-poisson-nloglik:2.977265 
## [108]	train-poisson-nloglik:2.974218 
## [109]	train-poisson-nloglik:2.964430 
## [110]	train-poisson-nloglik:2.958139 
## [111]	train-poisson-nloglik:2.953552 
## [112]	train-poisson-nloglik:2.949229 
## [113]	train-poisson-nloglik:2.941260 
## [114]	train-poisson-nloglik:2.938710 
## [115]	train-poisson-nloglik:2.935110 
## [116]	train-poisson-nloglik:2.929351 
## [117]	train-poisson-nloglik:2.921211 
## [118]	train-poisson-nloglik:2.918710 
## [119]	train-poisson-nloglik:2.915565 
## [120]	train-poisson-nloglik:2.910518 
## [121]	train-poisson-nloglik:2.909447 
## [122]	train-poisson-nloglik:2.903925 
## [123]	train-poisson-nloglik:2.897338 
## [124]	train-poisson-nloglik:2.893870 
## [125]	train-poisson-nloglik:2.891482 
## [126]	train-poisson-nloglik:2.890537 
## [127]	train-poisson-nloglik:2.887218 
## [128]	train-poisson-nloglik:2.886284 
## [129]	train-poisson-nloglik:2.884399 
## [130]	train-poisson-nloglik:2.882130 
## [131]	train-poisson-nloglik:2.878759 
## [132]	train-poisson-nloglik:2.877134 
## [133]	train-poisson-nloglik:2.875403 
## [134]	train-poisson-nloglik:2.874023 
## [135]	train-poisson-nloglik:2.869128 
## [136]	train-poisson-nloglik:2.864786 
## [137]	train-poisson-nloglik:2.863958 
## [138]	train-poisson-nloglik:2.861579 
## [139]	train-poisson-nloglik:2.860132 
## [140]	train-poisson-nloglik:2.857677 
## [141]	train-poisson-nloglik:2.855415 
## [142]	train-poisson-nloglik:2.853860 
## [143]	train-poisson-nloglik:2.852943 
## [144]	train-poisson-nloglik:2.851398 
## [145]	train-poisson-nloglik:2.849123 
## [146]	train-poisson-nloglik:2.842769 
## [147]	train-poisson-nloglik:2.840306 
## [148]	train-poisson-nloglik:2.836129 
## [149]	train-poisson-nloglik:2.828589 
## [150]	train-poisson-nloglik:2.826292 
## [151]	train-poisson-nloglik:2.823579 
## [152]	train-poisson-nloglik:2.822213 
## [153]	train-poisson-nloglik:2.819918 
## [154]	train-poisson-nloglik:2.815882 
## [155]	train-poisson-nloglik:2.811993 
## [156]	train-poisson-nloglik:2.808852 
## [157]	train-poisson-nloglik:2.807440 
## [158]	train-poisson-nloglik:2.806722 
## [159]	train-poisson-nloglik:2.804028 
## [160]	train-poisson-nloglik:2.803391 
## [161]	train-poisson-nloglik:2.801174 
## [162]	train-poisson-nloglik:2.799274 
## [163]	train-poisson-nloglik:2.795822 
## [164]	train-poisson-nloglik:2.792455 
## [165]	train-poisson-nloglik:2.791283 
## [166]	train-poisson-nloglik:2.790162 
## [167]	train-poisson-nloglik:2.788969 
## [168]	train-poisson-nloglik:2.786928 
## [169]	train-poisson-nloglik:2.785431 
## [170]	train-poisson-nloglik:2.782861 
## [171]	train-poisson-nloglik:2.781990 
## [172]	train-poisson-nloglik:2.781232 
## [173]	train-poisson-nloglik:2.780129 
## [174]	train-poisson-nloglik:2.779526 
## [175]	train-poisson-nloglik:2.778349 
## [176]	train-poisson-nloglik:2.777503 
## [177]	train-poisson-nloglik:2.773345 
## [178]	train-poisson-nloglik:2.772536 
## [179]	train-poisson-nloglik:2.770385 
## [180]	train-poisson-nloglik:2.767728 
## [181]	train-poisson-nloglik:2.765925 
## [182]	train-poisson-nloglik:2.764312 
## [183]	train-poisson-nloglik:2.763248 
## [184]	train-poisson-nloglik:2.760905 
## [185]	train-poisson-nloglik:2.757708 
## [186]	train-poisson-nloglik:2.755994 
## [187]	train-poisson-nloglik:2.754815 
## [188]	train-poisson-nloglik:2.753325 
## [189]	train-poisson-nloglik:2.751255 
## [190]	train-poisson-nloglik:2.750799 
## [191]	train-poisson-nloglik:2.749741 
## [192]	train-poisson-nloglik:2.749075 
## [193]	train-poisson-nloglik:2.747134 
## [194]	train-poisson-nloglik:2.746752 
## [195]	train-poisson-nloglik:2.745682 
## [196]	train-poisson-nloglik:2.743110 
## [197]	train-poisson-nloglik:2.740933 
## [198]	train-poisson-nloglik:2.738719 
## [199]	train-poisson-nloglik:2.737525 
## [200]	train-poisson-nloglik:2.736660 
## [201]	train-poisson-nloglik:2.735532 
## [202]	train-poisson-nloglik:2.734054 
## [203]	train-poisson-nloglik:2.732116 
## [204]	train-poisson-nloglik:2.731480 
## [205]	train-poisson-nloglik:2.731293 
## [206]	train-poisson-nloglik:2.730963 
## [207]	train-poisson-nloglik:2.730285 
## [208]	train-poisson-nloglik:2.728946 
## [209]	train-poisson-nloglik:2.726181 
## [210]	train-poisson-nloglik:2.725426 
## [211]	train-poisson-nloglik:2.724293 
## [212]	train-poisson-nloglik:2.723865 
## [213]	train-poisson-nloglik:2.723185 
## [214]	train-poisson-nloglik:2.722841 
## [215]	train-poisson-nloglik:2.720617 
## [216]	train-poisson-nloglik:2.719722 
## [217]	train-poisson-nloglik:2.718773 
## [218]	train-poisson-nloglik:2.718344 
## [219]	train-poisson-nloglik:2.717976 
## [220]	train-poisson-nloglik:2.716331 
## [221]	train-poisson-nloglik:2.714318 
## [222]	train-poisson-nloglik:2.714170 
## [223]	train-poisson-nloglik:2.713911 
## [224]	train-poisson-nloglik:2.713190 
## [225]	train-poisson-nloglik:2.712095 
## [226]	train-poisson-nloglik:2.709049 
## [227]	train-poisson-nloglik:2.708277 
## [228]	train-poisson-nloglik:2.706652 
## [229]	train-poisson-nloglik:2.705759 
## [230]	train-poisson-nloglik:2.705137 
## [231]	train-poisson-nloglik:2.704265 
## [232]	train-poisson-nloglik:2.702396 
## [233]	train-poisson-nloglik:2.701252 
## [234]	train-poisson-nloglik:2.700814 
## [235]	train-poisson-nloglik:2.700127 
## [236]	train-poisson-nloglik:2.699410 
## [237]	train-poisson-nloglik:2.698754 
## [238]	train-poisson-nloglik:2.698008 
## [239]	train-poisson-nloglik:2.697735 
## [240]	train-poisson-nloglik:2.697376 
## [241]	train-poisson-nloglik:2.696081 
## [242]	train-poisson-nloglik:2.695559 
## [243]	train-poisson-nloglik:2.694412 
## [244]	train-poisson-nloglik:2.692910 
## [245]	train-poisson-nloglik:2.691703 
## [246]	train-poisson-nloglik:2.688571 
## [247]	train-poisson-nloglik:2.687582 
## [248]	train-poisson-nloglik:2.686965 
## [249]	train-poisson-nloglik:2.686576 
## [250]	train-poisson-nloglik:2.685832 
## [251]	train-poisson-nloglik:2.685238 
## [252]	train-poisson-nloglik:2.683647 
## [253]	train-poisson-nloglik:2.682481 
## [254]	train-poisson-nloglik:2.682081 
## [255]	train-poisson-nloglik:2.681023 
## [256]	train-poisson-nloglik:2.680812 
## [257]	train-poisson-nloglik:2.680750 
## [258]	train-poisson-nloglik:2.680536 
## [259]	train-poisson-nloglik:2.680058 
## [260]	train-poisson-nloglik:2.679943 
## [261]	train-poisson-nloglik:2.678876 
## [262]	train-poisson-nloglik:2.678299 
## [263]	train-poisson-nloglik:2.677349 
## [264]	train-poisson-nloglik:2.675072 
## [265]	train-poisson-nloglik:2.674678 
## [266]	train-poisson-nloglik:2.672928 
## [267]	train-poisson-nloglik:2.671578 
## [268]	train-poisson-nloglik:2.671206 
## [269]	train-poisson-nloglik:2.670077 
## [270]	train-poisson-nloglik:2.669600 
## [271]	train-poisson-nloglik:2.668868 
## [272]	train-poisson-nloglik:2.668032 
## [273]	train-poisson-nloglik:2.667871 
## [274]	train-poisson-nloglik:2.666900 
## [275]	train-poisson-nloglik:2.666182 
## [276]	train-poisson-nloglik:2.665454 
## [277]	train-poisson-nloglik:2.664933 
## [278]	train-poisson-nloglik:2.664812 
## [279]	train-poisson-nloglik:2.664430 
## [280]	train-poisson-nloglik:2.664019 
## [281]	train-poisson-nloglik:2.662857 
## [282]	train-poisson-nloglik:2.661420 
## [283]	train-poisson-nloglik:2.661111 
## [284]	train-poisson-nloglik:2.660688 
## [285]	train-poisson-nloglik:2.660521 
## [286]	train-poisson-nloglik:2.659876 
## [287]	train-poisson-nloglik:2.659535 
## [288]	train-poisson-nloglik:2.658530 
## [289]	train-poisson-nloglik:2.657961 
## [290]	train-poisson-nloglik:2.656338 
## [291]	train-poisson-nloglik:2.655475 
## [292]	train-poisson-nloglik:2.654845 
## [293]	train-poisson-nloglik:2.653976 
## [294]	train-poisson-nloglik:2.653574 
## [295]	train-poisson-nloglik:2.652953 
## [296]	train-poisson-nloglik:2.652642 
## [297]	train-poisson-nloglik:2.652161 
## [298]	train-poisson-nloglik:2.651551 
## [299]	train-poisson-nloglik:2.650868 
## [300]	train-poisson-nloglik:2.650477 
## [301]	train-poisson-nloglik:2.650143 
## [302]	train-poisson-nloglik:2.649838 
## [303]	train-poisson-nloglik:2.648678 
## [304]	train-poisson-nloglik:2.647522 
## [305]	train-poisson-nloglik:2.646841 
## [306]	train-poisson-nloglik:2.645961 
## [307]	train-poisson-nloglik:2.645336 
## [308]	train-poisson-nloglik:2.645111 
## [309]	train-poisson-nloglik:2.643019 
## [310]	train-poisson-nloglik:2.642280 
## [311]	train-poisson-nloglik:2.642009 
## [312]	train-poisson-nloglik:2.641691 
## [313]	train-poisson-nloglik:2.641164 
## [314]	train-poisson-nloglik:2.640708 
## [315]	train-poisson-nloglik:2.640303 
## [316]	train-poisson-nloglik:2.640195 
## [317]	train-poisson-nloglik:2.638941 
## [318]	train-poisson-nloglik:2.637902 
## [319]	train-poisson-nloglik:2.637444 
## [320]	train-poisson-nloglik:2.636945 
## [321]	train-poisson-nloglik:2.636422 
## [322]	train-poisson-nloglik:2.636086 
## [323]	train-poisson-nloglik:2.635935 
## [324]	train-poisson-nloglik:2.635690 
## [325]	train-poisson-nloglik:2.635254 
## [326]	train-poisson-nloglik:2.634826 
## [327]	train-poisson-nloglik:2.634228 
## [328]	train-poisson-nloglik:2.633435 
## [329]	train-poisson-nloglik:2.633223 
## [330]	train-poisson-nloglik:2.632884 
## [331]	train-poisson-nloglik:2.632582 
## [332]	train-poisson-nloglik:2.632323 
## [333]	train-poisson-nloglik:2.632254 
## [334]	train-poisson-nloglik:2.631733 
## [335]	train-poisson-nloglik:2.631300 
## [336]	train-poisson-nloglik:2.630893 
## [337]	train-poisson-nloglik:2.630652 
## [338]	train-poisson-nloglik:2.629980 
## [339]	train-poisson-nloglik:2.629737 
## [340]	train-poisson-nloglik:2.629533 
## [341]	train-poisson-nloglik:2.629276 
## [342]	train-poisson-nloglik:2.628868 
## [343]	train-poisson-nloglik:2.628504 
## [344]	train-poisson-nloglik:2.628154 
## [345]	train-poisson-nloglik:2.627991 
## [346]	train-poisson-nloglik:2.627432 
## [347]	train-poisson-nloglik:2.626826 
## [348]	train-poisson-nloglik:2.626712 
## [349]	train-poisson-nloglik:2.626350 
## [350]	train-poisson-nloglik:2.625994 
## [351]	train-poisson-nloglik:2.625891 
## [352]	train-poisson-nloglik:2.625823 
## [353]	train-poisson-nloglik:2.625586 
## [354]	train-poisson-nloglik:2.625265 
## [355]	train-poisson-nloglik:2.624958 
## [356]	train-poisson-nloglik:2.624617 
## [357]	train-poisson-nloglik:2.624365 
## [358]	train-poisson-nloglik:2.623865 
## [359]	train-poisson-nloglik:2.623159 
## [360]	train-poisson-nloglik:2.622473 
## [361]	train-poisson-nloglik:2.622065 
## [362]	train-poisson-nloglik:2.621793 
## [363]	train-poisson-nloglik:2.620570 
## [364]	train-poisson-nloglik:2.620384 
## [365]	train-poisson-nloglik:2.619950 
## [366]	train-poisson-nloglik:2.619411 
## [367]	train-poisson-nloglik:2.618112 
## [368]	train-poisson-nloglik:2.617811 
## [369]	train-poisson-nloglik:2.617235 
## [370]	train-poisson-nloglik:2.616748 
## [371]	train-poisson-nloglik:2.616630 
## [372]	train-poisson-nloglik:2.616168 
## [373]	train-poisson-nloglik:2.616022 
## [374]	train-poisson-nloglik:2.615886 
## [375]	train-poisson-nloglik:2.615609 
## [376]	train-poisson-nloglik:2.615449 
## [377]	train-poisson-nloglik:2.615206 
## [378]	train-poisson-nloglik:2.614992 
## [379]	train-poisson-nloglik:2.614963 
## [380]	train-poisson-nloglik:2.614773 
## [381]	train-poisson-nloglik:2.614379 
## [382]	train-poisson-nloglik:2.614059 
## [383]	train-poisson-nloglik:2.613820 
## [384]	train-poisson-nloglik:2.613605 
## [385]	train-poisson-nloglik:2.613431 
## [386]	train-poisson-nloglik:2.613166 
## [387]	train-poisson-nloglik:2.613017 
## [388]	train-poisson-nloglik:2.612852 
## [389]	train-poisson-nloglik:2.612481 
## [390]	train-poisson-nloglik:2.612347 
## [391]	train-poisson-nloglik:2.612206 
## [392]	train-poisson-nloglik:2.611742 
## [393]	train-poisson-nloglik:2.611428 
## [394]	train-poisson-nloglik:2.611295 
## [395]	train-poisson-nloglik:2.611140 
## [396]	train-poisson-nloglik:2.611001 
## [397]	train-poisson-nloglik:2.610902 
## [398]	train-poisson-nloglik:2.610813 
## [399]	train-poisson-nloglik:2.610639 
## [400]	train-poisson-nloglik:2.610354 
## [401]	train-poisson-nloglik:2.609688 
## [402]	train-poisson-nloglik:2.609312 
## [403]	train-poisson-nloglik:2.609052 
## [404]	train-poisson-nloglik:2.608672 
## [405]	train-poisson-nloglik:2.608362 
## [406]	train-poisson-nloglik:2.608104 
## [407]	train-poisson-nloglik:2.607531 
## [408]	train-poisson-nloglik:2.607276 
## [409]	train-poisson-nloglik:2.606908 
## [410]	train-poisson-nloglik:2.606465 
## [411]	train-poisson-nloglik:2.606153 
## [412]	train-poisson-nloglik:2.605181 
## [413]	train-poisson-nloglik:2.604971 
## [414]	train-poisson-nloglik:2.604727 
## [415]	train-poisson-nloglik:2.604163 
## [416]	train-poisson-nloglik:2.603903 
## [417]	train-poisson-nloglik:2.603882 
## [418]	train-poisson-nloglik:2.603510 
## [419]	train-poisson-nloglik:2.603056 
## [420]	train-poisson-nloglik:2.602868 
## [421]	train-poisson-nloglik:2.602851 
## [422]	train-poisson-nloglik:2.602314 
## [423]	train-poisson-nloglik:2.602023 
## [424]	train-poisson-nloglik:2.601503 
## [425]	train-poisson-nloglik:2.600408 
## [426]	train-poisson-nloglik:2.600120 
## [427]	train-poisson-nloglik:2.599729 
## [428]	train-poisson-nloglik:2.599277 
## [429]	train-poisson-nloglik:2.598865 
## [430]	train-poisson-nloglik:2.598551 
## [431]	train-poisson-nloglik:2.598321 
## [432]	train-poisson-nloglik:2.598004 
## [433]	train-poisson-nloglik:2.597561 
## [434]	train-poisson-nloglik:2.597364 
## [435]	train-poisson-nloglik:2.597090 
## [436]	train-poisson-nloglik:2.596991 
## [437]	train-poisson-nloglik:2.596593 
## [438]	train-poisson-nloglik:2.596356 
## [439]	train-poisson-nloglik:2.596123 
## [440]	train-poisson-nloglik:2.595732 
## [441]	train-poisson-nloglik:2.595293 
## [442]	train-poisson-nloglik:2.595134 
## [443]	train-poisson-nloglik:2.594866 
## [444]	train-poisson-nloglik:2.594823 
## [445]	train-poisson-nloglik:2.594601 
## [446]	train-poisson-nloglik:2.594553 
## [447]	train-poisson-nloglik:2.594208 
## [448]	train-poisson-nloglik:2.593991 
## [449]	train-poisson-nloglik:2.593373 
## [450]	train-poisson-nloglik:2.592943 
## [451]	train-poisson-nloglik:2.592773 
## [452]	train-poisson-nloglik:2.592469 
## [453]	train-poisson-nloglik:2.592150 
## [454]	train-poisson-nloglik:2.591821 
## [455]	train-poisson-nloglik:2.591548 
## [456]	train-poisson-nloglik:2.591299 
## [457]	train-poisson-nloglik:2.591021 
## [458]	train-poisson-nloglik:2.590861 
## [459]	train-poisson-nloglik:2.590552 
## [460]	train-poisson-nloglik:2.590403 
## [461]	train-poisson-nloglik:2.590029 
## [462]	train-poisson-nloglik:2.589757 
## [463]	train-poisson-nloglik:2.589557 
## [464]	train-poisson-nloglik:2.589417 
## [465]	train-poisson-nloglik:2.588963 
## [466]	train-poisson-nloglik:2.588903 
## [467]	train-poisson-nloglik:2.588429 
## [468]	train-poisson-nloglik:2.587722 
## [469]	train-poisson-nloglik:2.587379 
## [470]	train-poisson-nloglik:2.586872 
## [471]	train-poisson-nloglik:2.586543 
## [472]	train-poisson-nloglik:2.586509 
## [473]	train-poisson-nloglik:2.586260 
## [474]	train-poisson-nloglik:2.585932 
## [475]	train-poisson-nloglik:2.585610 
## [476]	train-poisson-nloglik:2.585323 
## [477]	train-poisson-nloglik:2.585062 
## [478]	train-poisson-nloglik:2.584940 
## [479]	train-poisson-nloglik:2.584401 
## [480]	train-poisson-nloglik:2.583965 
## [481]	train-poisson-nloglik:2.583690 
## [482]	train-poisson-nloglik:2.583161 
## [483]	train-poisson-nloglik:2.583077 
## [484]	train-poisson-nloglik:2.582865 
## [485]	train-poisson-nloglik:2.582256 
## [486]	train-poisson-nloglik:2.581866 
## [487]	train-poisson-nloglik:2.581692 
## [488]	train-poisson-nloglik:2.581397 
## [489]	train-poisson-nloglik:2.581186 
## [490]	train-poisson-nloglik:2.580897 
## [491]	train-poisson-nloglik:2.580594 
## [492]	train-poisson-nloglik:2.579652 
## [493]	train-poisson-nloglik:2.579258 
## [494]	train-poisson-nloglik:2.579010 
## [495]	train-poisson-nloglik:2.578785 
## [496]	train-poisson-nloglik:2.578450 
## [497]	train-poisson-nloglik:2.578322 
## [498]	train-poisson-nloglik:2.578292 
## [499]	train-poisson-nloglik:2.578100 
## [500]	train-poisson-nloglik:2.578038
```

```r
# 모델링 결과
library(caret)
pred_chicken &lt;- predict(xgb_chicken,sparse_matrix_test_chicken)
caret::MAE(pred_chicken,obs_chicken)
```

```
## [1] 3.27397
```

```r
caret::RMSE(pred_chicken,obs_chicken)
```

```
## [1] 7.37531
```

```r
# Variable Importance Plot
importance_chicken &lt;- xgb.importance(feature_names = colnames(sparse_matrix_train_chicken),
                                     model = xgb_chicken)
head(importance_chicken)
```

```
##        Feature       Gain      Cover  Frequency
## 1:    latitude 0.37900554 0.27197216 0.17043857
## 2:   longitude 0.34671382 0.25361420 0.19889521
## 3: age30대40대 0.16755164 0.02473558 0.07445598
## 4:       month 0.02642778 0.04618919 0.06769334
## 5: age50대이상 0.01749036 0.01234486 0.04536324
## 6: temperature 0.01439344 0.20726653 0.14101105
```

```r
importance_chicken &lt;- importance_chicken %&gt;%
  as.data.frame() %&gt;% 
  arrange(desc(Gain)) %&gt;% 
  mutate(Feature = as.factor(Feature))


varImp_chicken &lt;- ggplot(data = importance_chicken[1:15,],
                         aes(x=reorder(Feature,Gain), y=Gain,
                             fill=reorder(Feature,Gain),color=reorder(Feature,Gain))) + 
  geom_bar(stat="identity",show.legend = F) + coord_flip() +
  ylab("Variable Importance") +
  xlab("") +
  ggtitle("Variable Importance Plot by Gain") +
  scale_fill_viridis_d(option = "plasma",direction=-1,begin=0.3) + 
  theme_bw()
varImp_chicken  
```

![](sample_files/figure-html/unnamed-chunk-9-2.png)&lt;!-- --&gt;

```r
#----------&lt;    피자   &gt;------------#


# 70% train, 30% test 나누기

idx_pizza &lt;- sample(1:nrow(data_pizza),nrow(data_pizza)*0.7)
train.df_pizza &lt;- data_pizza[idx_pizza,]
test.df_pizza &lt;- data_pizza[-idx_pizza,]


# sparse matrix (원핫인코딩)
library(Matrix)                                              
sparse_matrix_train_pizza &lt;- sparse.model.matrix(call ~ -1+day+gender+age+month+
                                                     longitude+latitude+gangsu+rain+
                                                     temperature+holiday+KBO+soccer,
                                                   data = train.df_pizza)
sparse_matrix_test_pizza  &lt;- sparse.model.matrix(call ~ -1+day+gender+age+month+
                                                     longitude+latitude+gangsu+rain+
                                                     temperature+holiday+KBO+soccer,
                                                   data =  test.df_pizza)

# output vector를 지정해주기 및, observation vector 생성
output_vector_pizza = train.df_pizza[,"call"]
obs_pizza &lt;- test.df_pizza[,"call"]


# 모델링
library(xgboost)
xgb_pizza &lt;- xgboost(data = sparse_matrix_train_pizza,
                       label = output_vector_pizza,
                       max_depth = 6, eta = 0.3, nthread = 3, nrounds = 500,
                       objective = "count:poisson")
```

```
## [1]	train-poisson-nloglik:22.611811 
## [2]	train-poisson-nloglik:20.751417 
## [3]	train-poisson-nloglik:18.885378 
## [4]	train-poisson-nloglik:17.105045 
## [5]	train-poisson-nloglik:15.336618 
## [6]	train-poisson-nloglik:13.667724 
## [7]	train-poisson-nloglik:12.053724 
## [8]	train-poisson-nloglik:10.528688 
## [9]	train-poisson-nloglik:9.145591 
## [10]	train-poisson-nloglik:7.944362 
## [11]	train-poisson-nloglik:6.946511 
## [12]	train-poisson-nloglik:6.132118 
## [13]	train-poisson-nloglik:5.499245 
## [14]	train-poisson-nloglik:5.012472 
## [15]	train-poisson-nloglik:4.648402 
## [16]	train-poisson-nloglik:4.363767 
## [17]	train-poisson-nloglik:4.121897 
## [18]	train-poisson-nloglik:3.877476 
## [19]	train-poisson-nloglik:3.711232 
## [20]	train-poisson-nloglik:3.587836 
## [21]	train-poisson-nloglik:3.489351 
## [22]	train-poisson-nloglik:3.411356 
## [23]	train-poisson-nloglik:3.320173 
## [24]	train-poisson-nloglik:3.275444 
## [25]	train-poisson-nloglik:3.184697 
## [26]	train-poisson-nloglik:3.151923 
## [27]	train-poisson-nloglik:3.096121 
## [28]	train-poisson-nloglik:3.013094 
## [29]	train-poisson-nloglik:2.983548 
## [30]	train-poisson-nloglik:2.935638 
## [31]	train-poisson-nloglik:2.878466 
## [32]	train-poisson-nloglik:2.857391 
## [33]	train-poisson-nloglik:2.825646 
## [34]	train-poisson-nloglik:2.798335 
## [35]	train-poisson-nloglik:2.776864 
## [36]	train-poisson-nloglik:2.766024 
## [37]	train-poisson-nloglik:2.738961 
## [38]	train-poisson-nloglik:2.723468 
## [39]	train-poisson-nloglik:2.694962 
## [40]	train-poisson-nloglik:2.676718 
## [41]	train-poisson-nloglik:2.642570 
## [42]	train-poisson-nloglik:2.616394 
## [43]	train-poisson-nloglik:2.605634 
## [44]	train-poisson-nloglik:2.583385 
## [45]	train-poisson-nloglik:2.576680 
## [46]	train-poisson-nloglik:2.567759 
## [47]	train-poisson-nloglik:2.551707 
## [48]	train-poisson-nloglik:2.544726 
## [49]	train-poisson-nloglik:2.519177 
## [50]	train-poisson-nloglik:2.511644 
## [51]	train-poisson-nloglik:2.505729 
## [52]	train-poisson-nloglik:2.495070 
## [53]	train-poisson-nloglik:2.487238 
## [54]	train-poisson-nloglik:2.481858 
## [55]	train-poisson-nloglik:2.477785 
## [56]	train-poisson-nloglik:2.469761 
## [57]	train-poisson-nloglik:2.465571 
## [58]	train-poisson-nloglik:2.462847 
## [59]	train-poisson-nloglik:2.458784 
## [60]	train-poisson-nloglik:2.452380 
## [61]	train-poisson-nloglik:2.447291 
## [62]	train-poisson-nloglik:2.441793 
## [63]	train-poisson-nloglik:2.437812 
## [64]	train-poisson-nloglik:2.432085 
## [65]	train-poisson-nloglik:2.430371 
## [66]	train-poisson-nloglik:2.421722 
## [67]	train-poisson-nloglik:2.417165 
## [68]	train-poisson-nloglik:2.410057 
## [69]	train-poisson-nloglik:2.407635 
## [70]	train-poisson-nloglik:2.404205 
## [71]	train-poisson-nloglik:2.402531 
## [72]	train-poisson-nloglik:2.400836 
## [73]	train-poisson-nloglik:2.398420 
## [74]	train-poisson-nloglik:2.393648 
## [75]	train-poisson-nloglik:2.389968 
## [76]	train-poisson-nloglik:2.387993 
## [77]	train-poisson-nloglik:2.382970 
## [78]	train-poisson-nloglik:2.381856 
## [79]	train-poisson-nloglik:2.378745 
## [80]	train-poisson-nloglik:2.374446 
## [81]	train-poisson-nloglik:2.371371 
## [82]	train-poisson-nloglik:2.369030 
## [83]	train-poisson-nloglik:2.367874 
## [84]	train-poisson-nloglik:2.365387 
## [85]	train-poisson-nloglik:2.363716 
## [86]	train-poisson-nloglik:2.360266 
## [87]	train-poisson-nloglik:2.357606 
## [88]	train-poisson-nloglik:2.356268 
## [89]	train-poisson-nloglik:2.354919 
## [90]	train-poisson-nloglik:2.352728 
## [91]	train-poisson-nloglik:2.351662 
## [92]	train-poisson-nloglik:2.350789 
## [93]	train-poisson-nloglik:2.349773 
## [94]	train-poisson-nloglik:2.347883 
## [95]	train-poisson-nloglik:2.345992 
## [96]	train-poisson-nloglik:2.344684 
## [97]	train-poisson-nloglik:2.342707 
## [98]	train-poisson-nloglik:2.341792 
## [99]	train-poisson-nloglik:2.340213 
## [100]	train-poisson-nloglik:2.339074 
## [101]	train-poisson-nloglik:2.338145 
## [102]	train-poisson-nloglik:2.336976 
## [103]	train-poisson-nloglik:2.336538 
## [104]	train-poisson-nloglik:2.335436 
## [105]	train-poisson-nloglik:2.333378 
## [106]	train-poisson-nloglik:2.332624 
## [107]	train-poisson-nloglik:2.329370 
## [108]	train-poisson-nloglik:2.328379 
## [109]	train-poisson-nloglik:2.327443 
## [110]	train-poisson-nloglik:2.326980 
## [111]	train-poisson-nloglik:2.324926 
## [112]	train-poisson-nloglik:2.323813 
## [113]	train-poisson-nloglik:2.323345 
## [114]	train-poisson-nloglik:2.321763 
## [115]	train-poisson-nloglik:2.321182 
## [116]	train-poisson-nloglik:2.320908 
## [117]	train-poisson-nloglik:2.319864 
## [118]	train-poisson-nloglik:2.318071 
## [119]	train-poisson-nloglik:2.316238 
## [120]	train-poisson-nloglik:2.315636 
## [121]	train-poisson-nloglik:2.313822 
## [122]	train-poisson-nloglik:2.313178 
## [123]	train-poisson-nloglik:2.310848 
## [124]	train-poisson-nloglik:2.309595 
## [125]	train-poisson-nloglik:2.308519 
## [126]	train-poisson-nloglik:2.308220 
## [127]	train-poisson-nloglik:2.306939 
## [128]	train-poisson-nloglik:2.306613 
## [129]	train-poisson-nloglik:2.304921 
## [130]	train-poisson-nloglik:2.304692 
## [131]	train-poisson-nloglik:2.304219 
## [132]	train-poisson-nloglik:2.302796 
## [133]	train-poisson-nloglik:2.302140 
## [134]	train-poisson-nloglik:2.301131 
## [135]	train-poisson-nloglik:2.300117 
## [136]	train-poisson-nloglik:2.298990 
## [137]	train-poisson-nloglik:2.298763 
## [138]	train-poisson-nloglik:2.298169 
## [139]	train-poisson-nloglik:2.297762 
## [140]	train-poisson-nloglik:2.296985 
## [141]	train-poisson-nloglik:2.296751 
## [142]	train-poisson-nloglik:2.295354 
## [143]	train-poisson-nloglik:2.294809 
## [144]	train-poisson-nloglik:2.293112 
## [145]	train-poisson-nloglik:2.292396 
## [146]	train-poisson-nloglik:2.292034 
## [147]	train-poisson-nloglik:2.291339 
## [148]	train-poisson-nloglik:2.289792 
## [149]	train-poisson-nloglik:2.289218 
## [150]	train-poisson-nloglik:2.288866 
## [151]	train-poisson-nloglik:2.288268 
## [152]	train-poisson-nloglik:2.288129 
## [153]	train-poisson-nloglik:2.287821 
## [154]	train-poisson-nloglik:2.286994 
## [155]	train-poisson-nloglik:2.285954 
## [156]	train-poisson-nloglik:2.285341 
## [157]	train-poisson-nloglik:2.285005 
## [158]	train-poisson-nloglik:2.284210 
## [159]	train-poisson-nloglik:2.283786 
## [160]	train-poisson-nloglik:2.283288 
## [161]	train-poisson-nloglik:2.283159 
## [162]	train-poisson-nloglik:2.282932 
## [163]	train-poisson-nloglik:2.282231 
## [164]	train-poisson-nloglik:2.282122 
## [165]	train-poisson-nloglik:2.281450 
## [166]	train-poisson-nloglik:2.280474 
## [167]	train-poisson-nloglik:2.280216 
## [168]	train-poisson-nloglik:2.280053 
## [169]	train-poisson-nloglik:2.279783 
## [170]	train-poisson-nloglik:2.279549 
## [171]	train-poisson-nloglik:2.279080 
## [172]	train-poisson-nloglik:2.278497 
## [173]	train-poisson-nloglik:2.278263 
## [174]	train-poisson-nloglik:2.277694 
## [175]	train-poisson-nloglik:2.277523 
## [176]	train-poisson-nloglik:2.277192 
## [177]	train-poisson-nloglik:2.276361 
## [178]	train-poisson-nloglik:2.275726 
## [179]	train-poisson-nloglik:2.275457 
## [180]	train-poisson-nloglik:2.275359 
## [181]	train-poisson-nloglik:2.275139 
## [182]	train-poisson-nloglik:2.274467 
## [183]	train-poisson-nloglik:2.273306 
## [184]	train-poisson-nloglik:2.273093 
## [185]	train-poisson-nloglik:2.272676 
## [186]	train-poisson-nloglik:2.272415 
## [187]	train-poisson-nloglik:2.272306 
## [188]	train-poisson-nloglik:2.272125 
## [189]	train-poisson-nloglik:2.271500 
## [190]	train-poisson-nloglik:2.271154 
## [191]	train-poisson-nloglik:2.270202 
## [192]	train-poisson-nloglik:2.269765 
## [193]	train-poisson-nloglik:2.269287 
## [194]	train-poisson-nloglik:2.269042 
## [195]	train-poisson-nloglik:2.268915 
## [196]	train-poisson-nloglik:2.268659 
## [197]	train-poisson-nloglik:2.268358 
## [198]	train-poisson-nloglik:2.268124 
## [199]	train-poisson-nloglik:2.268071 
## [200]	train-poisson-nloglik:2.267713 
## [201]	train-poisson-nloglik:2.267235 
## [202]	train-poisson-nloglik:2.266908 
## [203]	train-poisson-nloglik:2.266194 
## [204]	train-poisson-nloglik:2.265795 
## [205]	train-poisson-nloglik:2.265426 
## [206]	train-poisson-nloglik:2.265124 
## [207]	train-poisson-nloglik:2.264189 
## [208]	train-poisson-nloglik:2.264038 
## [209]	train-poisson-nloglik:2.263747 
## [210]	train-poisson-nloglik:2.263683 
## [211]	train-poisson-nloglik:2.263210 
## [212]	train-poisson-nloglik:2.262725 
## [213]	train-poisson-nloglik:2.262505 
## [214]	train-poisson-nloglik:2.262067 
## [215]	train-poisson-nloglik:2.261849 
## [216]	train-poisson-nloglik:2.261640 
## [217]	train-poisson-nloglik:2.261355 
## [218]	train-poisson-nloglik:2.260891 
## [219]	train-poisson-nloglik:2.260752 
## [220]	train-poisson-nloglik:2.260599 
## [221]	train-poisson-nloglik:2.260220 
## [222]	train-poisson-nloglik:2.259459 
## [223]	train-poisson-nloglik:2.258940 
## [224]	train-poisson-nloglik:2.258868 
## [225]	train-poisson-nloglik:2.258583 
## [226]	train-poisson-nloglik:2.258490 
## [227]	train-poisson-nloglik:2.258056 
## [228]	train-poisson-nloglik:2.257810 
## [229]	train-poisson-nloglik:2.257538 
## [230]	train-poisson-nloglik:2.257421 
## [231]	train-poisson-nloglik:2.256978 
## [232]	train-poisson-nloglik:2.256626 
## [233]	train-poisson-nloglik:2.256346 
## [234]	train-poisson-nloglik:2.256069 
## [235]	train-poisson-nloglik:2.255758 
## [236]	train-poisson-nloglik:2.255516 
## [237]	train-poisson-nloglik:2.255141 
## [238]	train-poisson-nloglik:2.254781 
## [239]	train-poisson-nloglik:2.254591 
## [240]	train-poisson-nloglik:2.254368 
## [241]	train-poisson-nloglik:2.254112 
## [242]	train-poisson-nloglik:2.253788 
## [243]	train-poisson-nloglik:2.253548 
## [244]	train-poisson-nloglik:2.253307 
## [245]	train-poisson-nloglik:2.252964 
## [246]	train-poisson-nloglik:2.252690 
## [247]	train-poisson-nloglik:2.252151 
## [248]	train-poisson-nloglik:2.251628 
## [249]	train-poisson-nloglik:2.251262 
## [250]	train-poisson-nloglik:2.250784 
## [251]	train-poisson-nloglik:2.250422 
## [252]	train-poisson-nloglik:2.249969 
## [253]	train-poisson-nloglik:2.249660 
## [254]	train-poisson-nloglik:2.249551 
## [255]	train-poisson-nloglik:2.249441 
## [256]	train-poisson-nloglik:2.249134 
## [257]	train-poisson-nloglik:2.248906 
## [258]	train-poisson-nloglik:2.248828 
## [259]	train-poisson-nloglik:2.248761 
## [260]	train-poisson-nloglik:2.248594 
## [261]	train-poisson-nloglik:2.248472 
## [262]	train-poisson-nloglik:2.248312 
## [263]	train-poisson-nloglik:2.247960 
## [264]	train-poisson-nloglik:2.247769 
## [265]	train-poisson-nloglik:2.247602 
## [266]	train-poisson-nloglik:2.247433 
## [267]	train-poisson-nloglik:2.247170 
## [268]	train-poisson-nloglik:2.246887 
## [269]	train-poisson-nloglik:2.246747 
## [270]	train-poisson-nloglik:2.246619 
## [271]	train-poisson-nloglik:2.246531 
## [272]	train-poisson-nloglik:2.246481 
## [273]	train-poisson-nloglik:2.246293 
## [274]	train-poisson-nloglik:2.246151 
## [275]	train-poisson-nloglik:2.245886 
## [276]	train-poisson-nloglik:2.245591 
## [277]	train-poisson-nloglik:2.245400 
## [278]	train-poisson-nloglik:2.245281 
## [279]	train-poisson-nloglik:2.245095 
## [280]	train-poisson-nloglik:2.244930 
## [281]	train-poisson-nloglik:2.244673 
## [282]	train-poisson-nloglik:2.244203 
## [283]	train-poisson-nloglik:2.244141 
## [284]	train-poisson-nloglik:2.244058 
## [285]	train-poisson-nloglik:2.243812 
## [286]	train-poisson-nloglik:2.243542 
## [287]	train-poisson-nloglik:2.243017 
## [288]	train-poisson-nloglik:2.242642 
## [289]	train-poisson-nloglik:2.242215 
## [290]	train-poisson-nloglik:2.241869 
## [291]	train-poisson-nloglik:2.241588 
## [292]	train-poisson-nloglik:2.240870 
## [293]	train-poisson-nloglik:2.240696 
## [294]	train-poisson-nloglik:2.240653 
## [295]	train-poisson-nloglik:2.240527 
## [296]	train-poisson-nloglik:2.240492 
## [297]	train-poisson-nloglik:2.240441 
## [298]	train-poisson-nloglik:2.240215 
## [299]	train-poisson-nloglik:2.239989 
## [300]	train-poisson-nloglik:2.239783 
## [301]	train-poisson-nloglik:2.239689 
## [302]	train-poisson-nloglik:2.239642 
## [303]	train-poisson-nloglik:2.239438 
## [304]	train-poisson-nloglik:2.239263 
## [305]	train-poisson-nloglik:2.238955 
## [306]	train-poisson-nloglik:2.238713 
## [307]	train-poisson-nloglik:2.238615 
## [308]	train-poisson-nloglik:2.238546 
## [309]	train-poisson-nloglik:2.238322 
## [310]	train-poisson-nloglik:2.238173 
## [311]	train-poisson-nloglik:2.237933 
## [312]	train-poisson-nloglik:2.237810 
## [313]	train-poisson-nloglik:2.237617 
## [314]	train-poisson-nloglik:2.237407 
## [315]	train-poisson-nloglik:2.237322 
## [316]	train-poisson-nloglik:2.237156 
## [317]	train-poisson-nloglik:2.236948 
## [318]	train-poisson-nloglik:2.236804 
## [319]	train-poisson-nloglik:2.236650 
## [320]	train-poisson-nloglik:2.236594 
## [321]	train-poisson-nloglik:2.236490 
## [322]	train-poisson-nloglik:2.236274 
## [323]	train-poisson-nloglik:2.235916 
## [324]	train-poisson-nloglik:2.235820 
## [325]	train-poisson-nloglik:2.235656 
## [326]	train-poisson-nloglik:2.235215 
## [327]	train-poisson-nloglik:2.235123 
## [328]	train-poisson-nloglik:2.235027 
## [329]	train-poisson-nloglik:2.234702 
## [330]	train-poisson-nloglik:2.234500 
## [331]	train-poisson-nloglik:2.234230 
## [332]	train-poisson-nloglik:2.233909 
## [333]	train-poisson-nloglik:2.233792 
## [334]	train-poisson-nloglik:2.233348 
## [335]	train-poisson-nloglik:2.233133 
## [336]	train-poisson-nloglik:2.232829 
## [337]	train-poisson-nloglik:2.232256 
## [338]	train-poisson-nloglik:2.232071 
## [339]	train-poisson-nloglik:2.231763 
## [340]	train-poisson-nloglik:2.231600 
## [341]	train-poisson-nloglik:2.231060 
## [342]	train-poisson-nloglik:2.230948 
## [343]	train-poisson-nloglik:2.230750 
## [344]	train-poisson-nloglik:2.230176 
## [345]	train-poisson-nloglik:2.230043 
## [346]	train-poisson-nloglik:2.229904 
## [347]	train-poisson-nloglik:2.229799 
## [348]	train-poisson-nloglik:2.229563 
## [349]	train-poisson-nloglik:2.229314 
## [350]	train-poisson-nloglik:2.229164 
## [351]	train-poisson-nloglik:2.228935 
## [352]	train-poisson-nloglik:2.228762 
## [353]	train-poisson-nloglik:2.228473 
## [354]	train-poisson-nloglik:2.228284 
## [355]	train-poisson-nloglik:2.227963 
## [356]	train-poisson-nloglik:2.227835 
## [357]	train-poisson-nloglik:2.227784 
## [358]	train-poisson-nloglik:2.227462 
## [359]	train-poisson-nloglik:2.227244 
## [360]	train-poisson-nloglik:2.226915 
## [361]	train-poisson-nloglik:2.226739 
## [362]	train-poisson-nloglik:2.226594 
## [363]	train-poisson-nloglik:2.226463 
## [364]	train-poisson-nloglik:2.226231 
## [365]	train-poisson-nloglik:2.225948 
## [366]	train-poisson-nloglik:2.225923 
## [367]	train-poisson-nloglik:2.225657 
## [368]	train-poisson-nloglik:2.225470 
## [369]	train-poisson-nloglik:2.225346 
## [370]	train-poisson-nloglik:2.225216 
## [371]	train-poisson-nloglik:2.224784 
## [372]	train-poisson-nloglik:2.224571 
## [373]	train-poisson-nloglik:2.224413 
## [374]	train-poisson-nloglik:2.224283 
## [375]	train-poisson-nloglik:2.224084 
## [376]	train-poisson-nloglik:2.223930 
## [377]	train-poisson-nloglik:2.223765 
## [378]	train-poisson-nloglik:2.223605 
## [379]	train-poisson-nloglik:2.223508 
## [380]	train-poisson-nloglik:2.223249 
## [381]	train-poisson-nloglik:2.223130 
## [382]	train-poisson-nloglik:2.223030 
## [383]	train-poisson-nloglik:2.222931 
## [384]	train-poisson-nloglik:2.222566 
## [385]	train-poisson-nloglik:2.222393 
## [386]	train-poisson-nloglik:2.222270 
## [387]	train-poisson-nloglik:2.222129 
## [388]	train-poisson-nloglik:2.222063 
## [389]	train-poisson-nloglik:2.222002 
## [390]	train-poisson-nloglik:2.221899 
## [391]	train-poisson-nloglik:2.221792 
## [392]	train-poisson-nloglik:2.221608 
## [393]	train-poisson-nloglik:2.221463 
## [394]	train-poisson-nloglik:2.221095 
## [395]	train-poisson-nloglik:2.220952 
## [396]	train-poisson-nloglik:2.220817 
## [397]	train-poisson-nloglik:2.220684 
## [398]	train-poisson-nloglik:2.220640 
## [399]	train-poisson-nloglik:2.220477 
## [400]	train-poisson-nloglik:2.220304 
## [401]	train-poisson-nloglik:2.220082 
## [402]	train-poisson-nloglik:2.219937 
## [403]	train-poisson-nloglik:2.219702 
## [404]	train-poisson-nloglik:2.219450 
## [405]	train-poisson-nloglik:2.219301 
## [406]	train-poisson-nloglik:2.218976 
## [407]	train-poisson-nloglik:2.218847 
## [408]	train-poisson-nloglik:2.218738 
## [409]	train-poisson-nloglik:2.218398 
## [410]	train-poisson-nloglik:2.218177 
## [411]	train-poisson-nloglik:2.217943 
## [412]	train-poisson-nloglik:2.217791 
## [413]	train-poisson-nloglik:2.217650 
## [414]	train-poisson-nloglik:2.217492 
## [415]	train-poisson-nloglik:2.217397 
## [416]	train-poisson-nloglik:2.217247 
## [417]	train-poisson-nloglik:2.217118 
## [418]	train-poisson-nloglik:2.216973 
## [419]	train-poisson-nloglik:2.216854 
## [420]	train-poisson-nloglik:2.216739 
## [421]	train-poisson-nloglik:2.216632 
## [422]	train-poisson-nloglik:2.216475 
## [423]	train-poisson-nloglik:2.216333 
## [424]	train-poisson-nloglik:2.216226 
## [425]	train-poisson-nloglik:2.216019 
## [426]	train-poisson-nloglik:2.215957 
## [427]	train-poisson-nloglik:2.215746 
## [428]	train-poisson-nloglik:2.215599 
## [429]	train-poisson-nloglik:2.215558 
## [430]	train-poisson-nloglik:2.215482 
## [431]	train-poisson-nloglik:2.215423 
## [432]	train-poisson-nloglik:2.215285 
## [433]	train-poisson-nloglik:2.215150 
## [434]	train-poisson-nloglik:2.214954 
## [435]	train-poisson-nloglik:2.214821 
## [436]	train-poisson-nloglik:2.214685 
## [437]	train-poisson-nloglik:2.214592 
## [438]	train-poisson-nloglik:2.214463 
## [439]	train-poisson-nloglik:2.214292 
## [440]	train-poisson-nloglik:2.214199 
## [441]	train-poisson-nloglik:2.213972 
## [442]	train-poisson-nloglik:2.213867 
## [443]	train-poisson-nloglik:2.213664 
## [444]	train-poisson-nloglik:2.213563 
## [445]	train-poisson-nloglik:2.213407 
## [446]	train-poisson-nloglik:2.213281 
## [447]	train-poisson-nloglik:2.213199 
## [448]	train-poisson-nloglik:2.213077 
## [449]	train-poisson-nloglik:2.212961 
## [450]	train-poisson-nloglik:2.212774 
## [451]	train-poisson-nloglik:2.212642 
## [452]	train-poisson-nloglik:2.212519 
## [453]	train-poisson-nloglik:2.212443 
## [454]	train-poisson-nloglik:2.212343 
## [455]	train-poisson-nloglik:2.212263 
## [456]	train-poisson-nloglik:2.212148 
## [457]	train-poisson-nloglik:2.212024 
## [458]	train-poisson-nloglik:2.211939 
## [459]	train-poisson-nloglik:2.211760 
## [460]	train-poisson-nloglik:2.211648 
## [461]	train-poisson-nloglik:2.211586 
## [462]	train-poisson-nloglik:2.211542 
## [463]	train-poisson-nloglik:2.211437 
## [464]	train-poisson-nloglik:2.211170 
## [465]	train-poisson-nloglik:2.211056 
## [466]	train-poisson-nloglik:2.210899 
## [467]	train-poisson-nloglik:2.210688 
## [468]	train-poisson-nloglik:2.210617 
## [469]	train-poisson-nloglik:2.210508 
## [470]	train-poisson-nloglik:2.210393 
## [471]	train-poisson-nloglik:2.210354 
## [472]	train-poisson-nloglik:2.210286 
## [473]	train-poisson-nloglik:2.210245 
## [474]	train-poisson-nloglik:2.210210 
## [475]	train-poisson-nloglik:2.210131 
## [476]	train-poisson-nloglik:2.210086 
## [477]	train-poisson-nloglik:2.210048 
## [478]	train-poisson-nloglik:2.209998 
## [479]	train-poisson-nloglik:2.209865 
## [480]	train-poisson-nloglik:2.209821 
## [481]	train-poisson-nloglik:2.209544 
## [482]	train-poisson-nloglik:2.209497 
## [483]	train-poisson-nloglik:2.209468 
## [484]	train-poisson-nloglik:2.209288 
## [485]	train-poisson-nloglik:2.209172 
## [486]	train-poisson-nloglik:2.209005 
## [487]	train-poisson-nloglik:2.208879 
## [488]	train-poisson-nloglik:2.208773 
## [489]	train-poisson-nloglik:2.208626 
## [490]	train-poisson-nloglik:2.208473 
## [491]	train-poisson-nloglik:2.208318 
## [492]	train-poisson-nloglik:2.208143 
## [493]	train-poisson-nloglik:2.208047 
## [494]	train-poisson-nloglik:2.207965 
## [495]	train-poisson-nloglik:2.207923 
## [496]	train-poisson-nloglik:2.207824 
## [497]	train-poisson-nloglik:2.207794 
## [498]	train-poisson-nloglik:2.207565 
## [499]	train-poisson-nloglik:2.207374 
## [500]	train-poisson-nloglik:2.207307
```

```r
# 모델링 결과
library(caret)
pred_pizza &lt;- predict(xgb_pizza,sparse_matrix_test_pizza)
caret::MAE(pred_pizza,obs_pizza)
```

```
## [1] 1.926346
```

```r
caret::RMSE(pred_pizza,obs_pizza)
```

```
## [1] 3.453404
```

```r
# Variable Importance Plot
importance_pizza &lt;- xgb.importance(feature_names = colnames(sparse_matrix_train_pizza),
                                     model = xgb_pizza)
head(importance_pizza)
```

```
##        Feature       Gain      Cover  Frequency
## 1:    latitude 0.46794536 0.22280544 0.16918673
## 2:   longitude 0.21212734 0.24770045 0.19057080
## 3: age30대40대 0.17791979 0.02184155 0.07950833
## 4:     age20대 0.03040706 0.01948096 0.04421620
## 5:       month 0.02239388 0.05147705 0.05694561
## 6:    gender여 0.02089487 0.01363939 0.06768816
```

```r
importance_pizza &lt;- importance_pizza %&gt;%
  as.data.frame() %&gt;% 
  arrange(desc(Gain)) %&gt;% 
  mutate(Feature = as.factor(Feature))


varImp_pizza &lt;- ggplot(data = importance_pizza[1:15,],
                         aes(x=reorder(Feature,Gain), y=Gain,
                             fill=reorder(Feature,Gain),color=reorder(Feature,Gain))) + 
  geom_bar(stat="identity",show.legend = F) + coord_flip() +
  ylab("Variable Importance") +
  xlab("") +
  ggtitle("Variable Importance Plot by Gain") +
  scale_fill_viridis_d(option = "plasma",direction=-1,begin=0.3) + 
  theme_bw()
varImp_pizza  
```

![](sample_files/figure-html/unnamed-chunk-9-3.png)&lt;!-- --&gt;


1. 모델링에 필요한 자료 정리   
  

```r
chinese &lt;- its_eats %&gt;% filter(type=="중국집")
# one hot 인코딩
library(Matrix)                                              
sparse_matrix_chinese &lt;- sparse.model.matrix(call ~                                                  -1+day.x+gender+age+dong+gangsu+rain+temperature+
      holiday.y+KBO+soccer, data = chinese)
output_vector_chinese &lt;- chinese$call
```
---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3. XGboost  
#### [ 중국집 배달 건수를 모델링 ]  

  2.모델링  
  

```r
library(xgboost)
xgb_chinese &lt;- xgboost(data = sparse_matrix_chinese,
                       label = output_vector_chinese,
                       max_depth = 6,
                       eta = 0.3,
                       nthread = 3,
                       nrounds = 500,
                       objective = "count:poisson")
```

```
## [1]	train-poisson-nloglik:60.042511 
## [2]	train-poisson-nloglik:56.279255 
## [3]	train-poisson-nloglik:52.544460 
## [4]	train-poisson-nloglik:48.848660 
## [5]	train-poisson-nloglik:45.207512 
## [6]	train-poisson-nloglik:41.706806 
## [7]	train-poisson-nloglik:38.251984 
## [8]	train-poisson-nloglik:34.915077 
## [9]	train-poisson-nloglik:31.600870 
## [10]	train-poisson-nloglik:28.523851 
## [11]	train-poisson-nloglik:25.573753 
## [12]	train-poisson-nloglik:22.921501 
## [13]	train-poisson-nloglik:20.549301 
## [14]	train-poisson-nloglik:18.307535 
## [15]	train-poisson-nloglik:16.508842 
## [16]	train-poisson-nloglik:14.996930 
## [17]	train-poisson-nloglik:14.031635 
## [18]	train-poisson-nloglik:13.237044 
## [19]	train-poisson-nloglik:12.549526 
## [20]	train-poisson-nloglik:11.943792 
## [21]	train-poisson-nloglik:11.391053 
## [22]	train-poisson-nloglik:10.898607 
## [23]	train-poisson-nloglik:10.470766 
## [24]	train-poisson-nloglik:10.069946 
## [25]	train-poisson-nloglik:9.707410 
## [26]	train-poisson-nloglik:9.389140 
## [27]	train-poisson-nloglik:9.039082 
## [28]	train-poisson-nloglik:8.762129 
## [29]	train-poisson-nloglik:8.486639 
## [30]	train-poisson-nloglik:8.219893 
## [31]	train-poisson-nloglik:7.996951 
## [32]	train-poisson-nloglik:7.773414 
## [33]	train-poisson-nloglik:7.555295 
## [34]	train-poisson-nloglik:7.372430 
## [35]	train-poisson-nloglik:7.201513 
## [36]	train-poisson-nloglik:7.048080 
## [37]	train-poisson-nloglik:6.874942 
## [38]	train-poisson-nloglik:6.745522 
## [39]	train-poisson-nloglik:6.623689 
## [40]	train-poisson-nloglik:6.490301 
## [41]	train-poisson-nloglik:6.370017 
## [42]	train-poisson-nloglik:6.249279 
## [43]	train-poisson-nloglik:6.173016 
## [44]	train-poisson-nloglik:6.073936 
## [45]	train-poisson-nloglik:5.986908 
## [46]	train-poisson-nloglik:5.888417 
## [47]	train-poisson-nloglik:5.813344 
## [48]	train-poisson-nloglik:5.735964 
## [49]	train-poisson-nloglik:5.665777 
## [50]	train-poisson-nloglik:5.586177 
## [51]	train-poisson-nloglik:5.518775 
## [52]	train-poisson-nloglik:5.437401 
## [53]	train-poisson-nloglik:5.377585 
## [54]	train-poisson-nloglik:5.314788 
## [55]	train-poisson-nloglik:5.264588 
## [56]	train-poisson-nloglik:5.198916 
## [57]	train-poisson-nloglik:5.137091 
## [58]	train-poisson-nloglik:5.095245 
## [59]	train-poisson-nloglik:5.032300 
## [60]	train-poisson-nloglik:4.986594 
## [61]	train-poisson-nloglik:4.932074 
## [62]	train-poisson-nloglik:4.894274 
## [63]	train-poisson-nloglik:4.849202 
## [64]	train-poisson-nloglik:4.802213 
## [65]	train-poisson-nloglik:4.763321 
## [66]	train-poisson-nloglik:4.725569 
## [67]	train-poisson-nloglik:4.683748 
## [68]	train-poisson-nloglik:4.650630 
## [69]	train-poisson-nloglik:4.615943 
## [70]	train-poisson-nloglik:4.569155 
## [71]	train-poisson-nloglik:4.534968 
## [72]	train-poisson-nloglik:4.503422 
## [73]	train-poisson-nloglik:4.468110 
## [74]	train-poisson-nloglik:4.438743 
## [75]	train-poisson-nloglik:4.400846 
## [76]	train-poisson-nloglik:4.366786 
## [77]	train-poisson-nloglik:4.341784 
## [78]	train-poisson-nloglik:4.315052 
## [79]	train-poisson-nloglik:4.287462 
## [80]	train-poisson-nloglik:4.256310 
## [81]	train-poisson-nloglik:4.232545 
## [82]	train-poisson-nloglik:4.207316 
## [83]	train-poisson-nloglik:4.182422 
## [84]	train-poisson-nloglik:4.156775 
## [85]	train-poisson-nloglik:4.131334 
## [86]	train-poisson-nloglik:4.107368 
## [87]	train-poisson-nloglik:4.089208 
## [88]	train-poisson-nloglik:4.068489 
## [89]	train-poisson-nloglik:4.048642 
## [90]	train-poisson-nloglik:4.026122 
## [91]	train-poisson-nloglik:4.004584 
## [92]	train-poisson-nloglik:3.986349 
## [93]	train-poisson-nloglik:3.969286 
## [94]	train-poisson-nloglik:3.951011 
## [95]	train-poisson-nloglik:3.932194 
## [96]	train-poisson-nloglik:3.915324 
## [97]	train-poisson-nloglik:3.897088 
## [98]	train-poisson-nloglik:3.880937 
## [99]	train-poisson-nloglik:3.858332 
## [100]	train-poisson-nloglik:3.842447 
## [101]	train-poisson-nloglik:3.829467 
## [102]	train-poisson-nloglik:3.810620 
## [103]	train-poisson-nloglik:3.796821 
## [104]	train-poisson-nloglik:3.781188 
## [105]	train-poisson-nloglik:3.762582 
## [106]	train-poisson-nloglik:3.750931 
## [107]	train-poisson-nloglik:3.737715 
## [108]	train-poisson-nloglik:3.723890 
## [109]	train-poisson-nloglik:3.711638 
## [110]	train-poisson-nloglik:3.699454 
## [111]	train-poisson-nloglik:3.688735 
## [112]	train-poisson-nloglik:3.672826 
## [113]	train-poisson-nloglik:3.659282 
## [114]	train-poisson-nloglik:3.648660 
## [115]	train-poisson-nloglik:3.634800 
## [116]	train-poisson-nloglik:3.624993 
## [117]	train-poisson-nloglik:3.616048 
## [118]	train-poisson-nloglik:3.605655 
## [119]	train-poisson-nloglik:3.591017 
## [120]	train-poisson-nloglik:3.580864 
## [121]	train-poisson-nloglik:3.571273 
## [122]	train-poisson-nloglik:3.561998 
## [123]	train-poisson-nloglik:3.547582 
## [124]	train-poisson-nloglik:3.538381 
## [125]	train-poisson-nloglik:3.525377 
## [126]	train-poisson-nloglik:3.515956 
## [127]	train-poisson-nloglik:3.508152 
## [128]	train-poisson-nloglik:3.494320 
## [129]	train-poisson-nloglik:3.487202 
## [130]	train-poisson-nloglik:3.478411 
## [131]	train-poisson-nloglik:3.470394 
## [132]	train-poisson-nloglik:3.462585 
## [133]	train-poisson-nloglik:3.447602 
## [134]	train-poisson-nloglik:3.441533 
## [135]	train-poisson-nloglik:3.434000 
## [136]	train-poisson-nloglik:3.425883 
## [137]	train-poisson-nloglik:3.417466 
## [138]	train-poisson-nloglik:3.406760 
## [139]	train-poisson-nloglik:3.400335 
## [140]	train-poisson-nloglik:3.392648 
## [141]	train-poisson-nloglik:3.386253 
## [142]	train-poisson-nloglik:3.379487 
## [143]	train-poisson-nloglik:3.371152 
## [144]	train-poisson-nloglik:3.364736 
## [145]	train-poisson-nloglik:3.357665 
## [146]	train-poisson-nloglik:3.351329 
## [147]	train-poisson-nloglik:3.344369 
## [148]	train-poisson-nloglik:3.337693 
## [149]	train-poisson-nloglik:3.331041 
## [150]	train-poisson-nloglik:3.324258 
## [151]	train-poisson-nloglik:3.317931 
## [152]	train-poisson-nloglik:3.310931 
## [153]	train-poisson-nloglik:3.304490 
## [154]	train-poisson-nloglik:3.298279 
## [155]	train-poisson-nloglik:3.293202 
## [156]	train-poisson-nloglik:3.288155 
## [157]	train-poisson-nloglik:3.281077 
## [158]	train-poisson-nloglik:3.276501 
## [159]	train-poisson-nloglik:3.270844 
## [160]	train-poisson-nloglik:3.265059 
## [161]	train-poisson-nloglik:3.259751 
## [162]	train-poisson-nloglik:3.254819 
## [163]	train-poisson-nloglik:3.250372 
## [164]	train-poisson-nloglik:3.245802 
## [165]	train-poisson-nloglik:3.239392 
## [166]	train-poisson-nloglik:3.235338 
## [167]	train-poisson-nloglik:3.229057 
## [168]	train-poisson-nloglik:3.225163 
## [169]	train-poisson-nloglik:3.220750 
## [170]	train-poisson-nloglik:3.216806 
## [171]	train-poisson-nloglik:3.212264 
## [172]	train-poisson-nloglik:3.208058 
## [173]	train-poisson-nloglik:3.203863 
## [174]	train-poisson-nloglik:3.197843 
## [175]	train-poisson-nloglik:3.193503 
## [176]	train-poisson-nloglik:3.188526 
## [177]	train-poisson-nloglik:3.184386 
## [178]	train-poisson-nloglik:3.180480 
## [179]	train-poisson-nloglik:3.175202 
## [180]	train-poisson-nloglik:3.171150 
## [181]	train-poisson-nloglik:3.167969 
## [182]	train-poisson-nloglik:3.164631 
## [183]	train-poisson-nloglik:3.160633 
## [184]	train-poisson-nloglik:3.157080 
## [185]	train-poisson-nloglik:3.153587 
## [186]	train-poisson-nloglik:3.149807 
## [187]	train-poisson-nloglik:3.138830 
## [188]	train-poisson-nloglik:3.135195 
## [189]	train-poisson-nloglik:3.132002 
## [190]	train-poisson-nloglik:3.128645 
## [191]	train-poisson-nloglik:3.125424 
## [192]	train-poisson-nloglik:3.122364 
## [193]	train-poisson-nloglik:3.118937 
## [194]	train-poisson-nloglik:3.115175 
## [195]	train-poisson-nloglik:3.112830 
## [196]	train-poisson-nloglik:3.109033 
## [197]	train-poisson-nloglik:3.105533 
## [198]	train-poisson-nloglik:3.101889 
## [199]	train-poisson-nloglik:3.098790 
## [200]	train-poisson-nloglik:3.095807 
## [201]	train-poisson-nloglik:3.092978 
## [202]	train-poisson-nloglik:3.089564 
## [203]	train-poisson-nloglik:3.086401 
## [204]	train-poisson-nloglik:3.083506 
## [205]	train-poisson-nloglik:3.080840 
## [206]	train-poisson-nloglik:3.078527 
## [207]	train-poisson-nloglik:3.075120 
## [208]	train-poisson-nloglik:3.072559 
## [209]	train-poisson-nloglik:3.066422 
## [210]	train-poisson-nloglik:3.063906 
## [211]	train-poisson-nloglik:3.060983 
## [212]	train-poisson-nloglik:3.058120 
## [213]	train-poisson-nloglik:3.055621 
## [214]	train-poisson-nloglik:3.053283 
## [215]	train-poisson-nloglik:3.050619 
## [216]	train-poisson-nloglik:3.047862 
## [217]	train-poisson-nloglik:3.045588 
## [218]	train-poisson-nloglik:3.043283 
## [219]	train-poisson-nloglik:3.041089 
## [220]	train-poisson-nloglik:3.038734 
## [221]	train-poisson-nloglik:3.036469 
## [222]	train-poisson-nloglik:3.032557 
## [223]	train-poisson-nloglik:3.030128 
## [224]	train-poisson-nloglik:3.027756 
## [225]	train-poisson-nloglik:3.025678 
## [226]	train-poisson-nloglik:3.023670 
## [227]	train-poisson-nloglik:3.021280 
## [228]	train-poisson-nloglik:3.018636 
## [229]	train-poisson-nloglik:3.016879 
## [230]	train-poisson-nloglik:3.014848 
## [231]	train-poisson-nloglik:3.012271 
## [232]	train-poisson-nloglik:3.009855 
## [233]	train-poisson-nloglik:3.001839 
## [234]	train-poisson-nloglik:2.999150 
## [235]	train-poisson-nloglik:2.996934 
## [236]	train-poisson-nloglik:2.994946 
## [237]	train-poisson-nloglik:2.989573 
## [238]	train-poisson-nloglik:2.986231 
## [239]	train-poisson-nloglik:2.982795 
## [240]	train-poisson-nloglik:2.980714 
## [241]	train-poisson-nloglik:2.978841 
## [242]	train-poisson-nloglik:2.976995 
## [243]	train-poisson-nloglik:2.975124 
## [244]	train-poisson-nloglik:2.973264 
## [245]	train-poisson-nloglik:2.971540 
## [246]	train-poisson-nloglik:2.969526 
## [247]	train-poisson-nloglik:2.967730 
## [248]	train-poisson-nloglik:2.965753 
## [249]	train-poisson-nloglik:2.963876 
## [250]	train-poisson-nloglik:2.962168 
## [251]	train-poisson-nloglik:2.960546 
## [252]	train-poisson-nloglik:2.958959 
## [253]	train-poisson-nloglik:2.956881 
## [254]	train-poisson-nloglik:2.955316 
## [255]	train-poisson-nloglik:2.953462 
## [256]	train-poisson-nloglik:2.951618 
## [257]	train-poisson-nloglik:2.949963 
## [258]	train-poisson-nloglik:2.948452 
## [259]	train-poisson-nloglik:2.946765 
## [260]	train-poisson-nloglik:2.944859 
## [261]	train-poisson-nloglik:2.943281 
## [262]	train-poisson-nloglik:2.941669 
## [263]	train-poisson-nloglik:2.940164 
## [264]	train-poisson-nloglik:2.938317 
## [265]	train-poisson-nloglik:2.936668 
## [266]	train-poisson-nloglik:2.934990 
## [267]	train-poisson-nloglik:2.933420 
## [268]	train-poisson-nloglik:2.931961 
## [269]	train-poisson-nloglik:2.928921 
## [270]	train-poisson-nloglik:2.927465 
## [271]	train-poisson-nloglik:2.925779 
## [272]	train-poisson-nloglik:2.923797 
## [273]	train-poisson-nloglik:2.922390 
## [274]	train-poisson-nloglik:2.920804 
## [275]	train-poisson-nloglik:2.919444 
## [276]	train-poisson-nloglik:2.918202 
## [277]	train-poisson-nloglik:2.916765 
## [278]	train-poisson-nloglik:2.915339 
## [279]	train-poisson-nloglik:2.914156 
## [280]	train-poisson-nloglik:2.912567 
## [281]	train-poisson-nloglik:2.911271 
## [282]	train-poisson-nloglik:2.910001 
## [283]	train-poisson-nloglik:2.908790 
## [284]	train-poisson-nloglik:2.907591 
## [285]	train-poisson-nloglik:2.906294 
## [286]	train-poisson-nloglik:2.904929 
## [287]	train-poisson-nloglik:2.903625 
## [288]	train-poisson-nloglik:2.901188 
## [289]	train-poisson-nloglik:2.900022 
## [290]	train-poisson-nloglik:2.898685 
## [291]	train-poisson-nloglik:2.897390 
## [292]	train-poisson-nloglik:2.896276 
## [293]	train-poisson-nloglik:2.894812 
## [294]	train-poisson-nloglik:2.893514 
## [295]	train-poisson-nloglik:2.892097 
## [296]	train-poisson-nloglik:2.891017 
## [297]	train-poisson-nloglik:2.889787 
## [298]	train-poisson-nloglik:2.888377 
## [299]	train-poisson-nloglik:2.887245 
## [300]	train-poisson-nloglik:2.881835 
## [301]	train-poisson-nloglik:2.879894 
## [302]	train-poisson-nloglik:2.877776 
## [303]	train-poisson-nloglik:2.876775 
## [304]	train-poisson-nloglik:2.875558 
## [305]	train-poisson-nloglik:2.874448 
## [306]	train-poisson-nloglik:2.873380 
## [307]	train-poisson-nloglik:2.872190 
## [308]	train-poisson-nloglik:2.871148 
## [309]	train-poisson-nloglik:2.870107 
## [310]	train-poisson-nloglik:2.869126 
## [311]	train-poisson-nloglik:2.868152 
## [312]	train-poisson-nloglik:2.867136 
## [313]	train-poisson-nloglik:2.866139 
## [314]	train-poisson-nloglik:2.865118 
## [315]	train-poisson-nloglik:2.864163 
## [316]	train-poisson-nloglik:2.863192 
## [317]	train-poisson-nloglik:2.862073 
## [318]	train-poisson-nloglik:2.861075 
## [319]	train-poisson-nloglik:2.860059 
## [320]	train-poisson-nloglik:2.859020 
## [321]	train-poisson-nloglik:2.858048 
## [322]	train-poisson-nloglik:2.857159 
## [323]	train-poisson-nloglik:2.856149 
## [324]	train-poisson-nloglik:2.855263 
## [325]	train-poisson-nloglik:2.854239 
## [326]	train-poisson-nloglik:2.853320 
## [327]	train-poisson-nloglik:2.852412 
## [328]	train-poisson-nloglik:2.851271 
## [329]	train-poisson-nloglik:2.850232 
## [330]	train-poisson-nloglik:2.849419 
## [331]	train-poisson-nloglik:2.848618 
## [332]	train-poisson-nloglik:2.847781 
## [333]	train-poisson-nloglik:2.846807 
## [334]	train-poisson-nloglik:2.845865 
## [335]	train-poisson-nloglik:2.845001 
## [336]	train-poisson-nloglik:2.844009 
## [337]	train-poisson-nloglik:2.843106 
## [338]	train-poisson-nloglik:2.842304 
## [339]	train-poisson-nloglik:2.841087 
## [340]	train-poisson-nloglik:2.837314 
## [341]	train-poisson-nloglik:2.836376 
## [342]	train-poisson-nloglik:2.835424 
## [343]	train-poisson-nloglik:2.834635 
## [344]	train-poisson-nloglik:2.833547 
## [345]	train-poisson-nloglik:2.832734 
## [346]	train-poisson-nloglik:2.831946 
## [347]	train-poisson-nloglik:2.830972 
## [348]	train-poisson-nloglik:2.830228 
## [349]	train-poisson-nloglik:2.829406 
## [350]	train-poisson-nloglik:2.828540 
## [351]	train-poisson-nloglik:2.827635 
## [352]	train-poisson-nloglik:2.826862 
## [353]	train-poisson-nloglik:2.826101 
## [354]	train-poisson-nloglik:2.825453 
## [355]	train-poisson-nloglik:2.824725 
## [356]	train-poisson-nloglik:2.824057 
## [357]	train-poisson-nloglik:2.823192 
## [358]	train-poisson-nloglik:2.822373 
## [359]	train-poisson-nloglik:2.821611 
## [360]	train-poisson-nloglik:2.820481 
## [361]	train-poisson-nloglik:2.819890 
## [362]	train-poisson-nloglik:2.819153 
## [363]	train-poisson-nloglik:2.818487 
## [364]	train-poisson-nloglik:2.817812 
## [365]	train-poisson-nloglik:2.816499 
## [366]	train-poisson-nloglik:2.815530 
## [367]	train-poisson-nloglik:2.814817 
## [368]	train-poisson-nloglik:2.814107 
## [369]	train-poisson-nloglik:2.813353 
## [370]	train-poisson-nloglik:2.812691 
## [371]	train-poisson-nloglik:2.812059 
## [372]	train-poisson-nloglik:2.811506 
## [373]	train-poisson-nloglik:2.810625 
## [374]	train-poisson-nloglik:2.808749 
## [375]	train-poisson-nloglik:2.808033 
## [376]	train-poisson-nloglik:2.807429 
## [377]	train-poisson-nloglik:2.806735 
## [378]	train-poisson-nloglik:2.806147 
## [379]	train-poisson-nloglik:2.805559 
## [380]	train-poisson-nloglik:2.804970 
## [381]	train-poisson-nloglik:2.804323 
## [382]	train-poisson-nloglik:2.803693 
## [383]	train-poisson-nloglik:2.803038 
## [384]	train-poisson-nloglik:2.802454 
## [385]	train-poisson-nloglik:2.801904 
## [386]	train-poisson-nloglik:2.801332 
## [387]	train-poisson-nloglik:2.800633 
## [388]	train-poisson-nloglik:2.799902 
## [389]	train-poisson-nloglik:2.799322 
## [390]	train-poisson-nloglik:2.798737 
## [391]	train-poisson-nloglik:2.798177 
## [392]	train-poisson-nloglik:2.797421 
## [393]	train-poisson-nloglik:2.796920 
## [394]	train-poisson-nloglik:2.796412 
## [395]	train-poisson-nloglik:2.795808 
## [396]	train-poisson-nloglik:2.795343 
## [397]	train-poisson-nloglik:2.794184 
## [398]	train-poisson-nloglik:2.793509 
## [399]	train-poisson-nloglik:2.792909 
## [400]	train-poisson-nloglik:2.792304 
## [401]	train-poisson-nloglik:2.791714 
## [402]	train-poisson-nloglik:2.791206 
## [403]	train-poisson-nloglik:2.790681 
## [404]	train-poisson-nloglik:2.790035 
## [405]	train-poisson-nloglik:2.789457 
## [406]	train-poisson-nloglik:2.788960 
## [407]	train-poisson-nloglik:2.788485 
## [408]	train-poisson-nloglik:2.788051 
## [409]	train-poisson-nloglik:2.787490 
## [410]	train-poisson-nloglik:2.786957 
## [411]	train-poisson-nloglik:2.786463 
## [412]	train-poisson-nloglik:2.785924 
## [413]	train-poisson-nloglik:2.785394 
## [414]	train-poisson-nloglik:2.784893 
## [415]	train-poisson-nloglik:2.784324 
## [416]	train-poisson-nloglik:2.783859 
## [417]	train-poisson-nloglik:2.783404 
## [418]	train-poisson-nloglik:2.782807 
## [419]	train-poisson-nloglik:2.782257 
## [420]	train-poisson-nloglik:2.781687 
## [421]	train-poisson-nloglik:2.781232 
## [422]	train-poisson-nloglik:2.780473 
## [423]	train-poisson-nloglik:2.779906 
## [424]	train-poisson-nloglik:2.779503 
## [425]	train-poisson-nloglik:2.779076 
## [426]	train-poisson-nloglik:2.778668 
## [427]	train-poisson-nloglik:2.778068 
## [428]	train-poisson-nloglik:2.777558 
## [429]	train-poisson-nloglik:2.777148 
## [430]	train-poisson-nloglik:2.776730 
## [431]	train-poisson-nloglik:2.776308 
## [432]	train-poisson-nloglik:2.775783 
## [433]	train-poisson-nloglik:2.775385 
## [434]	train-poisson-nloglik:2.775010 
## [435]	train-poisson-nloglik:2.774541 
## [436]	train-poisson-nloglik:2.774159 
## [437]	train-poisson-nloglik:2.773309 
## [438]	train-poisson-nloglik:2.772860 
## [439]	train-poisson-nloglik:2.772426 
## [440]	train-poisson-nloglik:2.772018 
## [441]	train-poisson-nloglik:2.771630 
## [442]	train-poisson-nloglik:2.771265 
## [443]	train-poisson-nloglik:2.770707 
## [444]	train-poisson-nloglik:2.770271 
## [445]	train-poisson-nloglik:2.769892 
## [446]	train-poisson-nloglik:2.769542 
## [447]	train-poisson-nloglik:2.769155 
## [448]	train-poisson-nloglik:2.768590 
## [449]	train-poisson-nloglik:2.763388 
## [450]	train-poisson-nloglik:2.762879 
## [451]	train-poisson-nloglik:2.762504 
## [452]	train-poisson-nloglik:2.762133 
## [453]	train-poisson-nloglik:2.761715 
## [454]	train-poisson-nloglik:2.761268 
## [455]	train-poisson-nloglik:2.760797 
## [456]	train-poisson-nloglik:2.760479 
## [457]	train-poisson-nloglik:2.760053 
## [458]	train-poisson-nloglik:2.759643 
## [459]	train-poisson-nloglik:2.759329 
## [460]	train-poisson-nloglik:2.758868 
## [461]	train-poisson-nloglik:2.758536 
## [462]	train-poisson-nloglik:2.758198 
## [463]	train-poisson-nloglik:2.757791 
## [464]	train-poisson-nloglik:2.757438 
## [465]	train-poisson-nloglik:2.757083 
## [466]	train-poisson-nloglik:2.756705 
## [467]	train-poisson-nloglik:2.756334 
## [468]	train-poisson-nloglik:2.756045 
## [469]	train-poisson-nloglik:2.752622 
## [470]	train-poisson-nloglik:2.752258 
## [471]	train-poisson-nloglik:2.751819 
## [472]	train-poisson-nloglik:2.751525 
## [473]	train-poisson-nloglik:2.751016 
## [474]	train-poisson-nloglik:2.750638 
## [475]	train-poisson-nloglik:2.750354 
## [476]	train-poisson-nloglik:2.750013 
## [477]	train-poisson-nloglik:2.749651 
## [478]	train-poisson-nloglik:2.749233 
## [479]	train-poisson-nloglik:2.748933 
## [480]	train-poisson-nloglik:2.748504 
## [481]	train-poisson-nloglik:2.748140 
## [482]	train-poisson-nloglik:2.747870 
## [483]	train-poisson-nloglik:2.747486 
## [484]	train-poisson-nloglik:2.747043 
## [485]	train-poisson-nloglik:2.746690 
## [486]	train-poisson-nloglik:2.746396 
## [487]	train-poisson-nloglik:2.745069 
## [488]	train-poisson-nloglik:2.744780 
## [489]	train-poisson-nloglik:2.744506 
## [490]	train-poisson-nloglik:2.744020 
## [491]	train-poisson-nloglik:2.743714 
## [492]	train-poisson-nloglik:2.743381 
## [493]	train-poisson-nloglik:2.743114 
## [494]	train-poisson-nloglik:2.742772 
## [495]	train-poisson-nloglik:2.741386 
## [496]	train-poisson-nloglik:2.739846 
## [497]	train-poisson-nloglik:2.739417 
## [498]	train-poisson-nloglik:2.739050 
## [499]	train-poisson-nloglik:2.738735 
## [500]	train-poisson-nloglik:2.738458
```

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3. XGboost  
#### [ 중국집 배달 건수를 모델링 ]  

  2.모델링  

```r
importance_chinese &lt;- xgb.importance(
            feature_names = colnames(sparse_matrix_chinese),
            model = xgb_chinese)
head(importance_chinese)
```

```
##          Feature       Gain       Cover   Frequency
## 1:   age30대40대 0.11882151 0.006358884 0.084382494
## 2:   age50대이상 0.06712055 0.004514908 0.060776379
## 3: dong성수동2가 0.05433318 0.013388062 0.002660372
## 4:    dong송파동 0.05203767 0.013000997 0.002135791
## 5:    dong삼성동 0.04669082 0.013049228 0.001873501
## 6:    dong미아동 0.04647594 0.012798812 0.001985911
```


---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3. XGboost  
#### [ 중국집 배달 건수를 모델링 ]  

  2.모델링
![](sample_files/figure-html/unnamed-chunk-13-1.png)&lt;!-- --&gt;
  

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3. XGboost  
#### [ 치킨 배달 건수를 모델링 ]  
  - XGboost 모델에서 hyper parameter를 특정하기 전,  
    train set과 test set을 나누어 모델링 진행
  - depth = 7, eta = 0.4  
  
1.모델링에 필요한 자료 정리


```r
chicken &lt;- its_eats %&gt;% filter(type=="치킨")
# one hot 인코딩
library(Matrix)                                              
sparse_matrix_chicken &lt;- sparse.model.matrix(call ~                                                                               -1+day.x+gender+age+dong+gangsu+rain+
                                  temperature+holiday.y+KBO+soccer,
                                  data = chicken)
output_vector_chicken &lt;- chicken$call
```


---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3. XGboost  
#### [ 치킨 배달 건수를 모델링 ]  

  2.모델링  

```r
library(xgboost)
xgb_chicken &lt;- xgboost(data = sparse_matrix_chicken,
                       label = output_vector_chicken,
                       max_depth = 7,
                       eta = 0.4,
                       nthread = 3,
                       nrounds = 500,
                       objective = "count:poisson")
```

```
## [1]	train-poisson-nloglik:54.320549 
## [2]	train-poisson-nloglik:49.549232 
## [3]	train-poisson-nloglik:45.038906 
## [4]	train-poisson-nloglik:40.538719 
## [5]	train-poisson-nloglik:36.232437 
## [6]	train-poisson-nloglik:32.132034 
## [7]	train-poisson-nloglik:28.124449 
## [8]	train-poisson-nloglik:24.415442 
## [9]	train-poisson-nloglik:21.128786 
## [10]	train-poisson-nloglik:18.403923 
## [11]	train-poisson-nloglik:16.149490 
## [12]	train-poisson-nloglik:14.203680 
## [13]	train-poisson-nloglik:12.928226 
## [14]	train-poisson-nloglik:11.943248 
## [15]	train-poisson-nloglik:11.118573 
## [16]	train-poisson-nloglik:10.397222 
## [17]	train-poisson-nloglik:9.780500 
## [18]	train-poisson-nloglik:9.269620 
## [19]	train-poisson-nloglik:8.764744 
## [20]	train-poisson-nloglik:8.253515 
## [21]	train-poisson-nloglik:7.901988 
## [22]	train-poisson-nloglik:7.552947 
## [23]	train-poisson-nloglik:7.217114 
## [24]	train-poisson-nloglik:6.944926 
## [25]	train-poisson-nloglik:6.677206 
## [26]	train-poisson-nloglik:6.432907 
## [27]	train-poisson-nloglik:6.243492 
## [28]	train-poisson-nloglik:6.068106 
## [29]	train-poisson-nloglik:5.893263 
## [30]	train-poisson-nloglik:5.742565 
## [31]	train-poisson-nloglik:5.611227 
## [32]	train-poisson-nloglik:5.489307 
## [33]	train-poisson-nloglik:5.375824 
## [34]	train-poisson-nloglik:5.257755 
## [35]	train-poisson-nloglik:5.149433 
## [36]	train-poisson-nloglik:5.063412 
## [37]	train-poisson-nloglik:4.984859 
## [38]	train-poisson-nloglik:4.895539 
## [39]	train-poisson-nloglik:4.815361 
## [40]	train-poisson-nloglik:4.732332 
## [41]	train-poisson-nloglik:4.669825 
## [42]	train-poisson-nloglik:4.610843 
## [43]	train-poisson-nloglik:4.546842 
## [44]	train-poisson-nloglik:4.487894 
## [45]	train-poisson-nloglik:4.433611 
## [46]	train-poisson-nloglik:4.378392 
## [47]	train-poisson-nloglik:4.334043 
## [48]	train-poisson-nloglik:4.288953 
## [49]	train-poisson-nloglik:4.245217 
## [50]	train-poisson-nloglik:4.184187 
## [51]	train-poisson-nloglik:4.145521 
## [52]	train-poisson-nloglik:4.106387 
## [53]	train-poisson-nloglik:4.072563 
## [54]	train-poisson-nloglik:4.033661 
## [55]	train-poisson-nloglik:4.001772 
## [56]	train-poisson-nloglik:3.973189 
## [57]	train-poisson-nloglik:3.939389 
## [58]	train-poisson-nloglik:3.912374 
## [59]	train-poisson-nloglik:3.879888 
## [60]	train-poisson-nloglik:3.854318 
## [61]	train-poisson-nloglik:3.828922 
## [62]	train-poisson-nloglik:3.806295 
## [63]	train-poisson-nloglik:3.783398 
## [64]	train-poisson-nloglik:3.761248 
## [65]	train-poisson-nloglik:3.739124 
## [66]	train-poisson-nloglik:3.717829 
## [67]	train-poisson-nloglik:3.696387 
## [68]	train-poisson-nloglik:3.678527 
## [69]	train-poisson-nloglik:3.660144 
## [70]	train-poisson-nloglik:3.642009 
## [71]	train-poisson-nloglik:3.624491 
## [72]	train-poisson-nloglik:3.609268 
## [73]	train-poisson-nloglik:3.590874 
## [74]	train-poisson-nloglik:3.575751 
## [75]	train-poisson-nloglik:3.561582 
## [76]	train-poisson-nloglik:3.546756 
## [77]	train-poisson-nloglik:3.524338 
## [78]	train-poisson-nloglik:3.510548 
## [79]	train-poisson-nloglik:3.498813 
## [80]	train-poisson-nloglik:3.485664 
## [81]	train-poisson-nloglik:3.467899 
## [82]	train-poisson-nloglik:3.456300 
## [83]	train-poisson-nloglik:3.445113 
## [84]	train-poisson-nloglik:3.435956 
## [85]	train-poisson-nloglik:3.427241 
## [86]	train-poisson-nloglik:3.415991 
## [87]	train-poisson-nloglik:3.402209 
## [88]	train-poisson-nloglik:3.391812 
## [89]	train-poisson-nloglik:3.382224 
## [90]	train-poisson-nloglik:3.372399 
## [91]	train-poisson-nloglik:3.363388 
## [92]	train-poisson-nloglik:3.355237 
## [93]	train-poisson-nloglik:3.334477 
## [94]	train-poisson-nloglik:3.326541 
## [95]	train-poisson-nloglik:3.319487 
## [96]	train-poisson-nloglik:3.312421 
## [97]	train-poisson-nloglik:3.304689 
## [98]	train-poisson-nloglik:3.295570 
## [99]	train-poisson-nloglik:3.288141 
## [100]	train-poisson-nloglik:3.280789 
## [101]	train-poisson-nloglik:3.274008 
## [102]	train-poisson-nloglik:3.267821 
## [103]	train-poisson-nloglik:3.259492 
## [104]	train-poisson-nloglik:3.253147 
## [105]	train-poisson-nloglik:3.246573 
## [106]	train-poisson-nloglik:3.241108 
## [107]	train-poisson-nloglik:3.233360 
## [108]	train-poisson-nloglik:3.226307 
## [109]	train-poisson-nloglik:3.215539 
## [110]	train-poisson-nloglik:3.210205 
## [111]	train-poisson-nloglik:3.204441 
## [112]	train-poisson-nloglik:3.199711 
## [113]	train-poisson-nloglik:3.194926 
## [114]	train-poisson-nloglik:3.188925 
## [115]	train-poisson-nloglik:3.182803 
## [116]	train-poisson-nloglik:3.178217 
## [117]	train-poisson-nloglik:3.174055 
## [118]	train-poisson-nloglik:3.169731 
## [119]	train-poisson-nloglik:3.164384 
## [120]	train-poisson-nloglik:3.159173 
## [121]	train-poisson-nloglik:3.147676 
## [122]	train-poisson-nloglik:3.143316 
## [123]	train-poisson-nloglik:3.139200 
## [124]	train-poisson-nloglik:3.135087 
## [125]	train-poisson-nloglik:3.130663 
## [126]	train-poisson-nloglik:3.126593 
## [127]	train-poisson-nloglik:3.122330 
## [128]	train-poisson-nloglik:3.118538 
## [129]	train-poisson-nloglik:3.114943 
## [130]	train-poisson-nloglik:3.108590 
## [131]	train-poisson-nloglik:3.105082 
## [132]	train-poisson-nloglik:3.101180 
## [133]	train-poisson-nloglik:3.097599 
## [134]	train-poisson-nloglik:3.094405 
## [135]	train-poisson-nloglik:3.090767 
## [136]	train-poisson-nloglik:3.087642 
## [137]	train-poisson-nloglik:3.084406 
## [138]	train-poisson-nloglik:3.081380 
## [139]	train-poisson-nloglik:3.078199 
## [140]	train-poisson-nloglik:3.072273 
## [141]	train-poisson-nloglik:3.068968 
## [142]	train-poisson-nloglik:3.063282 
## [143]	train-poisson-nloglik:3.060391 
## [144]	train-poisson-nloglik:3.057538 
## [145]	train-poisson-nloglik:3.054514 
## [146]	train-poisson-nloglik:3.051562 
## [147]	train-poisson-nloglik:3.048218 
## [148]	train-poisson-nloglik:3.043813 
## [149]	train-poisson-nloglik:3.039465 
## [150]	train-poisson-nloglik:3.036828 
## [151]	train-poisson-nloglik:3.034168 
## [152]	train-poisson-nloglik:3.031398 
## [153]	train-poisson-nloglik:3.028970 
## [154]	train-poisson-nloglik:3.026342 
## [155]	train-poisson-nloglik:3.023981 
## [156]	train-poisson-nloglik:3.021297 
## [157]	train-poisson-nloglik:3.018962 
## [158]	train-poisson-nloglik:3.016121 
## [159]	train-poisson-nloglik:3.012477 
## [160]	train-poisson-nloglik:3.009479 
## [161]	train-poisson-nloglik:3.006561 
## [162]	train-poisson-nloglik:3.004444 
## [163]	train-poisson-nloglik:3.002343 
## [164]	train-poisson-nloglik:2.994938 
## [165]	train-poisson-nloglik:2.992814 
## [166]	train-poisson-nloglik:2.984499 
## [167]	train-poisson-nloglik:2.982218 
## [168]	train-poisson-nloglik:2.979609 
## [169]	train-poisson-nloglik:2.977532 
## [170]	train-poisson-nloglik:2.975335 
## [171]	train-poisson-nloglik:2.973365 
## [172]	train-poisson-nloglik:2.971418 
## [173]	train-poisson-nloglik:2.969552 
## [174]	train-poisson-nloglik:2.967617 
## [175]	train-poisson-nloglik:2.965769 
## [176]	train-poisson-nloglik:2.963142 
## [177]	train-poisson-nloglik:2.961340 
## [178]	train-poisson-nloglik:2.959531 
## [179]	train-poisson-nloglik:2.957796 
## [180]	train-poisson-nloglik:2.956100 
## [181]	train-poisson-nloglik:2.954324 
## [182]	train-poisson-nloglik:2.951935 
## [183]	train-poisson-nloglik:2.950153 
## [184]	train-poisson-nloglik:2.948330 
## [185]	train-poisson-nloglik:2.946684 
## [186]	train-poisson-nloglik:2.945062 
## [187]	train-poisson-nloglik:2.943352 
## [188]	train-poisson-nloglik:2.941803 
## [189]	train-poisson-nloglik:2.940080 
## [190]	train-poisson-nloglik:2.938517 
## [191]	train-poisson-nloglik:2.936320 
## [192]	train-poisson-nloglik:2.934858 
## [193]	train-poisson-nloglik:2.933053 
## [194]	train-poisson-nloglik:2.931587 
## [195]	train-poisson-nloglik:2.930194 
## [196]	train-poisson-nloglik:2.928608 
## [197]	train-poisson-nloglik:2.927202 
## [198]	train-poisson-nloglik:2.925601 
## [199]	train-poisson-nloglik:2.924184 
## [200]	train-poisson-nloglik:2.922702 
## [201]	train-poisson-nloglik:2.921381 
## [202]	train-poisson-nloglik:2.919933 
## [203]	train-poisson-nloglik:2.918632 
## [204]	train-poisson-nloglik:2.917282 
## [205]	train-poisson-nloglik:2.915312 
## [206]	train-poisson-nloglik:2.913874 
## [207]	train-poisson-nloglik:2.912612 
## [208]	train-poisson-nloglik:2.911285 
## [209]	train-poisson-nloglik:2.909981 
## [210]	train-poisson-nloglik:2.907120 
## [211]	train-poisson-nloglik:2.905502 
## [212]	train-poisson-nloglik:2.904260 
## [213]	train-poisson-nloglik:2.902970 
## [214]	train-poisson-nloglik:2.901842 
## [215]	train-poisson-nloglik:2.900596 
## [216]	train-poisson-nloglik:2.899037 
## [217]	train-poisson-nloglik:2.897858 
## [218]	train-poisson-nloglik:2.896749 
## [219]	train-poisson-nloglik:2.895651 
## [220]	train-poisson-nloglik:2.894170 
## [221]	train-poisson-nloglik:2.893062 
## [222]	train-poisson-nloglik:2.892031 
## [223]	train-poisson-nloglik:2.890825 
## [224]	train-poisson-nloglik:2.889770 
## [225]	train-poisson-nloglik:2.888748 
## [226]	train-poisson-nloglik:2.887764 
## [227]	train-poisson-nloglik:2.886794 
## [228]	train-poisson-nloglik:2.885785 
## [229]	train-poisson-nloglik:2.880234 
## [230]	train-poisson-nloglik:2.879236 
## [231]	train-poisson-nloglik:2.878136 
## [232]	train-poisson-nloglik:2.877200 
## [233]	train-poisson-nloglik:2.876339 
## [234]	train-poisson-nloglik:2.875388 
## [235]	train-poisson-nloglik:2.874415 
## [236]	train-poisson-nloglik:2.873516 
## [237]	train-poisson-nloglik:2.872506 
## [238]	train-poisson-nloglik:2.871521 
## [239]	train-poisson-nloglik:2.870364 
## [240]	train-poisson-nloglik:2.869256 
## [241]	train-poisson-nloglik:2.868366 
## [242]	train-poisson-nloglik:2.867466 
## [243]	train-poisson-nloglik:2.866450 
## [244]	train-poisson-nloglik:2.865623 
## [245]	train-poisson-nloglik:2.864718 
## [246]	train-poisson-nloglik:2.863910 
## [247]	train-poisson-nloglik:2.863141 
## [248]	train-poisson-nloglik:2.862185 
## [249]	train-poisson-nloglik:2.861349 
## [250]	train-poisson-nloglik:2.860575 
## [251]	train-poisson-nloglik:2.854627 
## [252]	train-poisson-nloglik:2.853822 
## [253]	train-poisson-nloglik:2.852945 
## [254]	train-poisson-nloglik:2.852219 
## [255]	train-poisson-nloglik:2.851191 
## [256]	train-poisson-nloglik:2.850395 
## [257]	train-poisson-nloglik:2.849659 
## [258]	train-poisson-nloglik:2.848916 
## [259]	train-poisson-nloglik:2.848191 
## [260]	train-poisson-nloglik:2.847431 
## [261]	train-poisson-nloglik:2.846724 
## [262]	train-poisson-nloglik:2.846053 
## [263]	train-poisson-nloglik:2.845304 
## [264]	train-poisson-nloglik:2.844601 
## [265]	train-poisson-nloglik:2.843913 
## [266]	train-poisson-nloglik:2.843081 
## [267]	train-poisson-nloglik:2.842340 
## [268]	train-poisson-nloglik:2.841432 
## [269]	train-poisson-nloglik:2.840685 
## [270]	train-poisson-nloglik:2.839941 
## [271]	train-poisson-nloglik:2.839135 
## [272]	train-poisson-nloglik:2.838500 
## [273]	train-poisson-nloglik:2.837904 
## [274]	train-poisson-nloglik:2.837242 
## [275]	train-poisson-nloglik:2.836311 
## [276]	train-poisson-nloglik:2.835675 
## [277]	train-poisson-nloglik:2.835025 
## [278]	train-poisson-nloglik:2.834418 
## [279]	train-poisson-nloglik:2.833835 
## [280]	train-poisson-nloglik:2.833261 
## [281]	train-poisson-nloglik:2.832515 
## [282]	train-poisson-nloglik:2.831963 
## [283]	train-poisson-nloglik:2.831451 
## [284]	train-poisson-nloglik:2.829218 
## [285]	train-poisson-nloglik:2.828124 
## [286]	train-poisson-nloglik:2.821901 
## [287]	train-poisson-nloglik:2.821323 
## [288]	train-poisson-nloglik:2.820467 
## [289]	train-poisson-nloglik:2.819945 
## [290]	train-poisson-nloglik:2.819282 
## [291]	train-poisson-nloglik:2.818799 
## [292]	train-poisson-nloglik:2.818294 
## [293]	train-poisson-nloglik:2.817801 
## [294]	train-poisson-nloglik:2.817340 
## [295]	train-poisson-nloglik:2.815802 
## [296]	train-poisson-nloglik:2.815295 
## [297]	train-poisson-nloglik:2.814779 
## [298]	train-poisson-nloglik:2.814139 
## [299]	train-poisson-nloglik:2.813577 
## [300]	train-poisson-nloglik:2.813099 
## [301]	train-poisson-nloglik:2.812555 
## [302]	train-poisson-nloglik:2.811962 
## [303]	train-poisson-nloglik:2.811498 
## [304]	train-poisson-nloglik:2.809494 
## [305]	train-poisson-nloglik:2.808746 
## [306]	train-poisson-nloglik:2.808139 
## [307]	train-poisson-nloglik:2.807637 
## [308]	train-poisson-nloglik:2.807238 
## [309]	train-poisson-nloglik:2.806623 
## [310]	train-poisson-nloglik:2.806162 
## [311]	train-poisson-nloglik:2.805712 
## [312]	train-poisson-nloglik:2.805206 
## [313]	train-poisson-nloglik:2.804763 
## [314]	train-poisson-nloglik:2.804364 
## [315]	train-poisson-nloglik:2.803916 
## [316]	train-poisson-nloglik:2.803535 
## [317]	train-poisson-nloglik:2.803138 
## [318]	train-poisson-nloglik:2.801628 
## [319]	train-poisson-nloglik:2.801232 
## [320]	train-poisson-nloglik:2.800783 
## [321]	train-poisson-nloglik:2.800377 
## [322]	train-poisson-nloglik:2.799989 
## [323]	train-poisson-nloglik:2.799562 
## [324]	train-poisson-nloglik:2.799168 
## [325]	train-poisson-nloglik:2.798818 
## [326]	train-poisson-nloglik:2.798471 
## [327]	train-poisson-nloglik:2.797681 
## [328]	train-poisson-nloglik:2.797042 
## [329]	train-poisson-nloglik:2.796592 
## [330]	train-poisson-nloglik:2.796225 
## [331]	train-poisson-nloglik:2.795686 
## [332]	train-poisson-nloglik:2.795283 
## [333]	train-poisson-nloglik:2.794799 
## [334]	train-poisson-nloglik:2.792737 
## [335]	train-poisson-nloglik:2.792066 
## [336]	train-poisson-nloglik:2.791742 
## [337]	train-poisson-nloglik:2.791278 
## [338]	train-poisson-nloglik:2.790869 
## [339]	train-poisson-nloglik:2.790499 
## [340]	train-poisson-nloglik:2.790117 
## [341]	train-poisson-nloglik:2.789802 
## [342]	train-poisson-nloglik:2.789127 
## [343]	train-poisson-nloglik:2.788812 
## [344]	train-poisson-nloglik:2.788472 
## [345]	train-poisson-nloglik:2.788178 
## [346]	train-poisson-nloglik:2.787854 
## [347]	train-poisson-nloglik:2.787055 
## [348]	train-poisson-nloglik:2.786643 
## [349]	train-poisson-nloglik:2.786183 
## [350]	train-poisson-nloglik:2.785862 
## [351]	train-poisson-nloglik:2.785565 
## [352]	train-poisson-nloglik:2.785244 
## [353]	train-poisson-nloglik:2.784939 
## [354]	train-poisson-nloglik:2.784611 
## [355]	train-poisson-nloglik:2.780564 
## [356]	train-poisson-nloglik:2.780220 
## [357]	train-poisson-nloglik:2.779861 
## [358]	train-poisson-nloglik:2.779323 
## [359]	train-poisson-nloglik:2.778956 
## [360]	train-poisson-nloglik:2.778587 
## [361]	train-poisson-nloglik:2.778334 
## [362]	train-poisson-nloglik:2.777929 
## [363]	train-poisson-nloglik:2.777686 
## [364]	train-poisson-nloglik:2.777367 
## [365]	train-poisson-nloglik:2.777073 
## [366]	train-poisson-nloglik:2.776812 
## [367]	train-poisson-nloglik:2.775689 
## [368]	train-poisson-nloglik:2.775327 
## [369]	train-poisson-nloglik:2.774778 
## [370]	train-poisson-nloglik:2.774490 
## [371]	train-poisson-nloglik:2.774171 
## [372]	train-poisson-nloglik:2.773857 
## [373]	train-poisson-nloglik:2.773572 
## [374]	train-poisson-nloglik:2.773313 
## [375]	train-poisson-nloglik:2.773104 
## [376]	train-poisson-nloglik:2.772872 
## [377]	train-poisson-nloglik:2.772547 
## [378]	train-poisson-nloglik:2.772311 
## [379]	train-poisson-nloglik:2.772069 
## [380]	train-poisson-nloglik:2.771843 
## [381]	train-poisson-nloglik:2.771614 
## [382]	train-poisson-nloglik:2.771350 
## [383]	train-poisson-nloglik:2.771143 
## [384]	train-poisson-nloglik:2.770920 
## [385]	train-poisson-nloglik:2.770551 
## [386]	train-poisson-nloglik:2.770355 
## [387]	train-poisson-nloglik:2.769892 
## [388]	train-poisson-nloglik:2.769551 
## [389]	train-poisson-nloglik:2.769262 
## [390]	train-poisson-nloglik:2.769011 
## [391]	train-poisson-nloglik:2.768738 
## [392]	train-poisson-nloglik:2.768475 
## [393]	train-poisson-nloglik:2.768283 
## [394]	train-poisson-nloglik:2.768039 
## [395]	train-poisson-nloglik:2.767814 
## [396]	train-poisson-nloglik:2.767502 
## [397]	train-poisson-nloglik:2.767313 
## [398]	train-poisson-nloglik:2.767036 
## [399]	train-poisson-nloglik:2.764433 
## [400]	train-poisson-nloglik:2.757471 
## [401]	train-poisson-nloglik:2.757187 
## [402]	train-poisson-nloglik:2.756919 
## [403]	train-poisson-nloglik:2.756674 
## [404]	train-poisson-nloglik:2.752582 
## [405]	train-poisson-nloglik:2.752307 
## [406]	train-poisson-nloglik:2.752115 
## [407]	train-poisson-nloglik:2.751941 
## [408]	train-poisson-nloglik:2.751738 
## [409]	train-poisson-nloglik:2.751532 
## [410]	train-poisson-nloglik:2.751324 
## [411]	train-poisson-nloglik:2.751127 
## [412]	train-poisson-nloglik:2.750940 
## [413]	train-poisson-nloglik:2.750600 
## [414]	train-poisson-nloglik:2.750364 
## [415]	train-poisson-nloglik:2.750179 
## [416]	train-poisson-nloglik:2.749846 
## [417]	train-poisson-nloglik:2.749600 
## [418]	train-poisson-nloglik:2.749445 
## [419]	train-poisson-nloglik:2.749236 
## [420]	train-poisson-nloglik:2.749029 
## [421]	train-poisson-nloglik:2.748837 
## [422]	train-poisson-nloglik:2.748635 
## [423]	train-poisson-nloglik:2.748261 
## [424]	train-poisson-nloglik:2.748105 
## [425]	train-poisson-nloglik:2.747956 
## [426]	train-poisson-nloglik:2.747470 
## [427]	train-poisson-nloglik:2.747213 
## [428]	train-poisson-nloglik:2.747063 
## [429]	train-poisson-nloglik:2.746865 
## [430]	train-poisson-nloglik:2.746712 
## [431]	train-poisson-nloglik:2.744348 
## [432]	train-poisson-nloglik:2.744100 
## [433]	train-poisson-nloglik:2.743905 
## [434]	train-poisson-nloglik:2.743671 
## [435]	train-poisson-nloglik:2.743524 
## [436]	train-poisson-nloglik:2.743325 
## [437]	train-poisson-nloglik:2.743183 
## [438]	train-poisson-nloglik:2.743038 
## [439]	train-poisson-nloglik:2.742824 
## [440]	train-poisson-nloglik:2.742670 
## [441]	train-poisson-nloglik:2.742522 
## [442]	train-poisson-nloglik:2.742385 
## [443]	train-poisson-nloglik:2.738824 
## [444]	train-poisson-nloglik:2.738598 
## [445]	train-poisson-nloglik:2.738173 
## [446]	train-poisson-nloglik:2.738030 
## [447]	train-poisson-nloglik:2.737887 
## [448]	train-poisson-nloglik:2.737700 
## [449]	train-poisson-nloglik:2.737581 
## [450]	train-poisson-nloglik:2.737430 
## [451]	train-poisson-nloglik:2.737307 
## [452]	train-poisson-nloglik:2.736102 
## [453]	train-poisson-nloglik:2.735913 
## [454]	train-poisson-nloglik:2.735761 
## [455]	train-poisson-nloglik:2.735603 
## [456]	train-poisson-nloglik:2.735104 
## [457]	train-poisson-nloglik:2.732793 
## [458]	train-poisson-nloglik:2.732600 
## [459]	train-poisson-nloglik:2.732451 
## [460]	train-poisson-nloglik:2.732294 
## [461]	train-poisson-nloglik:2.732165 
## [462]	train-poisson-nloglik:2.732040 
## [463]	train-poisson-nloglik:2.731843 
## [464]	train-poisson-nloglik:2.731699 
## [465]	train-poisson-nloglik:2.731307 
## [466]	train-poisson-nloglik:2.731131 
## [467]	train-poisson-nloglik:2.730755 
## [468]	train-poisson-nloglik:2.730626 
## [469]	train-poisson-nloglik:2.730479 
## [470]	train-poisson-nloglik:2.730324 
## [471]	train-poisson-nloglik:2.730181 
## [472]	train-poisson-nloglik:2.727001 
## [473]	train-poisson-nloglik:2.726861 
## [474]	train-poisson-nloglik:2.726737 
## [475]	train-poisson-nloglik:2.726629 
## [476]	train-poisson-nloglik:2.726479 
## [477]	train-poisson-nloglik:2.726329 
## [478]	train-poisson-nloglik:2.726191 
## [479]	train-poisson-nloglik:2.726001 
## [480]	train-poisson-nloglik:2.725893 
## [481]	train-poisson-nloglik:2.725776 
## [482]	train-poisson-nloglik:2.725658 
## [483]	train-poisson-nloglik:2.725456 
## [484]	train-poisson-nloglik:2.725270 
## [485]	train-poisson-nloglik:2.725188 
## [486]	train-poisson-nloglik:2.725062 
## [487]	train-poisson-nloglik:2.724926 
## [488]	train-poisson-nloglik:2.724746 
## [489]	train-poisson-nloglik:2.724582 
## [490]	train-poisson-nloglik:2.724437 
## [491]	train-poisson-nloglik:2.724287 
## [492]	train-poisson-nloglik:2.724044 
## [493]	train-poisson-nloglik:2.723865 
## [494]	train-poisson-nloglik:2.723746 
## [495]	train-poisson-nloglik:2.723653 
## [496]	train-poisson-nloglik:2.723505 
## [497]	train-poisson-nloglik:2.723402 
## [498]	train-poisson-nloglik:2.723237 
## [499]	train-poisson-nloglik:2.723144 
## [500]	train-poisson-nloglik:2.723009
```


---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3. XGboost  
#### [ 치킨 배달 건수를 모델링 ]  

  2.모델링

```r
importance_chicken &lt;- xgb.importance(
                  feature_names = colnames(sparse_matrix_chicken),
                  model = xgb_chicken)
head(importance_chicken)
```

```
##          Feature       Gain       Cover    Frequency
## 1:   age30대40대 0.18309602 0.010890234 0.0628332798
## 2:    dong신림동 0.05966197 0.008267384 0.0018417389
## 3:    dong송파동 0.05838439 0.007661120 0.0016061677
## 4: dong성수동2가 0.05757763 0.007261913 0.0014348431
## 5:    dong상계동 0.05686488 0.007571614 0.0013491809
## 6:    dong미아동 0.04424961 0.006955223 0.0007709605
```

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3. XGboost  
#### [ 치킨 배달 건수를 모델링 ]  

  2.모델링  
  
![](sample_files/figure-html/unnamed-chunk-17-1.png)&lt;!-- --&gt;

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3. XGboost  
#### [ 피자 배달 건수를 모델링 ]  

  - XGboost 모델에서 hyper parameter를 특정하기 전,  
    train set과 test set을 나누어 모델링 진행
  - depth = 6, eta = 0.4
  
1.모델링에 필요한 자료 정리


```r
pizza &lt;- its_eats %&gt;% filter(type=="피자")
# one hot 인코딩
library(Matrix)                                              
sparse_matrix_pizza &lt;- sparse.model.matrix(call ~                                                                               -1+day.x+gender+age+dong+gangsu+rain+
                                  temperature+holiday.y+KBO+soccer,
                                  data = pizza)
output_vector_pizza &lt;- pizza$call
```

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3. XGboost  
#### [ 피자 배달 건수를 모델링 ]  
  
  2.모델링

```r
library(xgboost)
xgb_pizza &lt;- xgboost(data = sparse_matrix_pizza,
                       label = output_vector_pizza,
                       max_depth = 6,
                       eta = 0.4,
                       nthread = 3,
                       nrounds = 500,
                       objective = "count:poisson")
```

```
## [1]	train-poisson-nloglik:22.057703 
## [2]	train-poisson-nloglik:19.547821 
## [3]	train-poisson-nloglik:17.152334 
## [4]	train-poisson-nloglik:14.819239 
## [5]	train-poisson-nloglik:12.608583 
## [6]	train-poisson-nloglik:10.564428 
## [7]	train-poisson-nloglik:8.743418 
## [8]	train-poisson-nloglik:7.251689 
## [9]	train-poisson-nloglik:6.160737 
## [10]	train-poisson-nloglik:5.385155 
## [11]	train-poisson-nloglik:4.900592 
## [12]	train-poisson-nloglik:4.513903 
## [13]	train-poisson-nloglik:4.203650 
## [14]	train-poisson-nloglik:3.960236 
## [15]	train-poisson-nloglik:3.770187 
## [16]	train-poisson-nloglik:3.626508 
## [17]	train-poisson-nloglik:3.502822 
## [18]	train-poisson-nloglik:3.401048 
## [19]	train-poisson-nloglik:3.310472 
## [20]	train-poisson-nloglik:3.227264 
## [21]	train-poisson-nloglik:3.165556 
## [22]	train-poisson-nloglik:3.114535 
## [23]	train-poisson-nloglik:3.063578 
## [24]	train-poisson-nloglik:3.012624 
## [25]	train-poisson-nloglik:2.973058 
## [26]	train-poisson-nloglik:2.940023 
## [27]	train-poisson-nloglik:2.908103 
## [28]	train-poisson-nloglik:2.870642 
## [29]	train-poisson-nloglik:2.846380 
## [30]	train-poisson-nloglik:2.817366 
## [31]	train-poisson-nloglik:2.798170 
## [32]	train-poisson-nloglik:2.777973 
## [33]	train-poisson-nloglik:2.756725 
## [34]	train-poisson-nloglik:2.736430 
## [35]	train-poisson-nloglik:2.720351 
## [36]	train-poisson-nloglik:2.705580 
## [37]	train-poisson-nloglik:2.687323 
## [38]	train-poisson-nloglik:2.675349 
## [39]	train-poisson-nloglik:2.662832 
## [40]	train-poisson-nloglik:2.651631 
## [41]	train-poisson-nloglik:2.635093 
## [42]	train-poisson-nloglik:2.625402 
## [43]	train-poisson-nloglik:2.614741 
## [44]	train-poisson-nloglik:2.601760 
## [45]	train-poisson-nloglik:2.592424 
## [46]	train-poisson-nloglik:2.583948 
## [47]	train-poisson-nloglik:2.575481 
## [48]	train-poisson-nloglik:2.564132 
## [49]	train-poisson-nloglik:2.556382 
## [50]	train-poisson-nloglik:2.549722 
## [51]	train-poisson-nloglik:2.544110 
## [52]	train-poisson-nloglik:2.535805 
## [53]	train-poisson-nloglik:2.529138 
## [54]	train-poisson-nloglik:2.519949 
## [55]	train-poisson-nloglik:2.515469 
## [56]	train-poisson-nloglik:2.509775 
## [57]	train-poisson-nloglik:2.505595 
## [58]	train-poisson-nloglik:2.500540 
## [59]	train-poisson-nloglik:2.495559 
## [60]	train-poisson-nloglik:2.490686 
## [61]	train-poisson-nloglik:2.485783 
## [62]	train-poisson-nloglik:2.480847 
## [63]	train-poisson-nloglik:2.477387 
## [64]	train-poisson-nloglik:2.471516 
## [65]	train-poisson-nloglik:2.467747 
## [66]	train-poisson-nloglik:2.464267 
## [67]	train-poisson-nloglik:2.460990 
## [68]	train-poisson-nloglik:2.456698 
## [69]	train-poisson-nloglik:2.453638 
## [70]	train-poisson-nloglik:2.450892 
## [71]	train-poisson-nloglik:2.446827 
## [72]	train-poisson-nloglik:2.444995 
## [73]	train-poisson-nloglik:2.439070 
## [74]	train-poisson-nloglik:2.436287 
## [75]	train-poisson-nloglik:2.433625 
## [76]	train-poisson-nloglik:2.430936 
## [77]	train-poisson-nloglik:2.428418 
## [78]	train-poisson-nloglik:2.425761 
## [79]	train-poisson-nloglik:2.423210 
## [80]	train-poisson-nloglik:2.420844 
## [81]	train-poisson-nloglik:2.418114 
## [82]	train-poisson-nloglik:2.414628 
## [83]	train-poisson-nloglik:2.412293 
## [84]	train-poisson-nloglik:2.409352 
## [85]	train-poisson-nloglik:2.407451 
## [86]	train-poisson-nloglik:2.405719 
## [87]	train-poisson-nloglik:2.404300 
## [88]	train-poisson-nloglik:2.401802 
## [89]	train-poisson-nloglik:2.399528 
## [90]	train-poisson-nloglik:2.397957 
## [91]	train-poisson-nloglik:2.395977 
## [92]	train-poisson-nloglik:2.394455 
## [93]	train-poisson-nloglik:2.393195 
## [94]	train-poisson-nloglik:2.390925 
## [95]	train-poisson-nloglik:2.389761 
## [96]	train-poisson-nloglik:2.388151 
## [97]	train-poisson-nloglik:2.386425 
## [98]	train-poisson-nloglik:2.384930 
## [99]	train-poisson-nloglik:2.382744 
## [100]	train-poisson-nloglik:2.380385 
## [101]	train-poisson-nloglik:2.379125 
## [102]	train-poisson-nloglik:2.378005 
## [103]	train-poisson-nloglik:2.376514 
## [104]	train-poisson-nloglik:2.375609 
## [105]	train-poisson-nloglik:2.373255 
## [106]	train-poisson-nloglik:2.372067 
## [107]	train-poisson-nloglik:2.371153 
## [108]	train-poisson-nloglik:2.370044 
## [109]	train-poisson-nloglik:2.368675 
## [110]	train-poisson-nloglik:2.367730 
## [111]	train-poisson-nloglik:2.366185 
## [112]	train-poisson-nloglik:2.365237 
## [113]	train-poisson-nloglik:2.364281 
## [114]	train-poisson-nloglik:2.362998 
## [115]	train-poisson-nloglik:2.361989 
## [116]	train-poisson-nloglik:2.361171 
## [117]	train-poisson-nloglik:2.360325 
## [118]	train-poisson-nloglik:2.359492 
## [119]	train-poisson-nloglik:2.357821 
## [120]	train-poisson-nloglik:2.356703 
## [121]	train-poisson-nloglik:2.354493 
## [122]	train-poisson-nloglik:2.353772 
## [123]	train-poisson-nloglik:2.352928 
## [124]	train-poisson-nloglik:2.351930 
## [125]	train-poisson-nloglik:2.351060 
## [126]	train-poisson-nloglik:2.350313 
## [127]	train-poisson-nloglik:2.348480 
## [128]	train-poisson-nloglik:2.347855 
## [129]	train-poisson-nloglik:2.346540 
## [130]	train-poisson-nloglik:2.345621 
## [131]	train-poisson-nloglik:2.344876 
## [132]	train-poisson-nloglik:2.344342 
## [133]	train-poisson-nloglik:2.343382 
## [134]	train-poisson-nloglik:2.342765 
## [135]	train-poisson-nloglik:2.342128 
## [136]	train-poisson-nloglik:2.341452 
## [137]	train-poisson-nloglik:2.339378 
## [138]	train-poisson-nloglik:2.338758 
## [139]	train-poisson-nloglik:2.338123 
## [140]	train-poisson-nloglik:2.337584 
## [141]	train-poisson-nloglik:2.336731 
## [142]	train-poisson-nloglik:2.336065 
## [143]	train-poisson-nloglik:2.335528 
## [144]	train-poisson-nloglik:2.334336 
## [145]	train-poisson-nloglik:2.333551 
## [146]	train-poisson-nloglik:2.333075 
## [147]	train-poisson-nloglik:2.332428 
## [148]	train-poisson-nloglik:2.331875 
## [149]	train-poisson-nloglik:2.331403 
## [150]	train-poisson-nloglik:2.330924 
## [151]	train-poisson-nloglik:2.330292 
## [152]	train-poisson-nloglik:2.327582 
## [153]	train-poisson-nloglik:2.326894 
## [154]	train-poisson-nloglik:2.326418 
## [155]	train-poisson-nloglik:2.325719 
## [156]	train-poisson-nloglik:2.325123 
## [157]	train-poisson-nloglik:2.324650 
## [158]	train-poisson-nloglik:2.324208 
## [159]	train-poisson-nloglik:2.323750 
## [160]	train-poisson-nloglik:2.323197 
## [161]	train-poisson-nloglik:2.322786 
## [162]	train-poisson-nloglik:2.322399 
## [163]	train-poisson-nloglik:2.322021 
## [164]	train-poisson-nloglik:2.321535 
## [165]	train-poisson-nloglik:2.321008 
## [166]	train-poisson-nloglik:2.320485 
## [167]	train-poisson-nloglik:2.320091 
## [168]	train-poisson-nloglik:2.319746 
## [169]	train-poisson-nloglik:2.319223 
## [170]	train-poisson-nloglik:2.318861 
## [171]	train-poisson-nloglik:2.318103 
## [172]	train-poisson-nloglik:2.317264 
## [173]	train-poisson-nloglik:2.316901 
## [174]	train-poisson-nloglik:2.316503 
## [175]	train-poisson-nloglik:2.316152 
## [176]	train-poisson-nloglik:2.315578 
## [177]	train-poisson-nloglik:2.314660 
## [178]	train-poisson-nloglik:2.314278 
## [179]	train-poisson-nloglik:2.313950 
## [180]	train-poisson-nloglik:2.313144 
## [181]	train-poisson-nloglik:2.312565 
## [182]	train-poisson-nloglik:2.312303 
## [183]	train-poisson-nloglik:2.311972 
## [184]	train-poisson-nloglik:2.311637 
## [185]	train-poisson-nloglik:2.311276 
## [186]	train-poisson-nloglik:2.310941 
## [187]	train-poisson-nloglik:2.310627 
## [188]	train-poisson-nloglik:2.310245 
## [189]	train-poisson-nloglik:2.309953 
## [190]	train-poisson-nloglik:2.309639 
## [191]	train-poisson-nloglik:2.309316 
## [192]	train-poisson-nloglik:2.309018 
## [193]	train-poisson-nloglik:2.308702 
## [194]	train-poisson-nloglik:2.308411 
## [195]	train-poisson-nloglik:2.308080 
## [196]	train-poisson-nloglik:2.307797 
## [197]	train-poisson-nloglik:2.307513 
## [198]	train-poisson-nloglik:2.307081 
## [199]	train-poisson-nloglik:2.306703 
## [200]	train-poisson-nloglik:2.306433 
## [201]	train-poisson-nloglik:2.306188 
## [202]	train-poisson-nloglik:2.305759 
## [203]	train-poisson-nloglik:2.305464 
## [204]	train-poisson-nloglik:2.305200 
## [205]	train-poisson-nloglik:2.304912 
## [206]	train-poisson-nloglik:2.304679 
## [207]	train-poisson-nloglik:2.304076 
## [208]	train-poisson-nloglik:2.303766 
## [209]	train-poisson-nloglik:2.303529 
## [210]	train-poisson-nloglik:2.303275 
## [211]	train-poisson-nloglik:2.303033 
## [212]	train-poisson-nloglik:2.302796 
## [213]	train-poisson-nloglik:2.302577 
## [214]	train-poisson-nloglik:2.302327 
## [215]	train-poisson-nloglik:2.302116 
## [216]	train-poisson-nloglik:2.301668 
## [217]	train-poisson-nloglik:2.301436 
## [218]	train-poisson-nloglik:2.301182 
## [219]	train-poisson-nloglik:2.300756 
## [220]	train-poisson-nloglik:2.300182 
## [221]	train-poisson-nloglik:2.299764 
## [222]	train-poisson-nloglik:2.299552 
## [223]	train-poisson-nloglik:2.299361 
## [224]	train-poisson-nloglik:2.299151 
## [225]	train-poisson-nloglik:2.298638 
## [226]	train-poisson-nloglik:2.298426 
## [227]	train-poisson-nloglik:2.298229 
## [228]	train-poisson-nloglik:2.297985 
## [229]	train-poisson-nloglik:2.297739 
## [230]	train-poisson-nloglik:2.297468 
## [231]	train-poisson-nloglik:2.297177 
## [232]	train-poisson-nloglik:2.297008 
## [233]	train-poisson-nloglik:2.296758 
## [234]	train-poisson-nloglik:2.296607 
## [235]	train-poisson-nloglik:2.296410 
## [236]	train-poisson-nloglik:2.296211 
## [237]	train-poisson-nloglik:2.296010 
## [238]	train-poisson-nloglik:2.295844 
## [239]	train-poisson-nloglik:2.295688 
## [240]	train-poisson-nloglik:2.295517 
## [241]	train-poisson-nloglik:2.295342 
## [242]	train-poisson-nloglik:2.295190 
## [243]	train-poisson-nloglik:2.294916 
## [244]	train-poisson-nloglik:2.294747 
## [245]	train-poisson-nloglik:2.294431 
## [246]	train-poisson-nloglik:2.293537 
## [247]	train-poisson-nloglik:2.292944 
## [248]	train-poisson-nloglik:2.292751 
## [249]	train-poisson-nloglik:2.292604 
## [250]	train-poisson-nloglik:2.292458 
## [251]	train-poisson-nloglik:2.292319 
## [252]	train-poisson-nloglik:2.292178 
## [253]	train-poisson-nloglik:2.292052 
## [254]	train-poisson-nloglik:2.291757 
## [255]	train-poisson-nloglik:2.291609 
## [256]	train-poisson-nloglik:2.291433 
## [257]	train-poisson-nloglik:2.291291 
## [258]	train-poisson-nloglik:2.291115 
## [259]	train-poisson-nloglik:2.290706 
## [260]	train-poisson-nloglik:2.290529 
## [261]	train-poisson-nloglik:2.290407 
## [262]	train-poisson-nloglik:2.290263 
## [263]	train-poisson-nloglik:2.290102 
## [264]	train-poisson-nloglik:2.289904 
## [265]	train-poisson-nloglik:2.289727 
## [266]	train-poisson-nloglik:2.289601 
## [267]	train-poisson-nloglik:2.289441 
## [268]	train-poisson-nloglik:2.289306 
## [269]	train-poisson-nloglik:2.289177 
## [270]	train-poisson-nloglik:2.288518 
## [271]	train-poisson-nloglik:2.288386 
## [272]	train-poisson-nloglik:2.288244 
## [273]	train-poisson-nloglik:2.288050 
## [274]	train-poisson-nloglik:2.287941 
## [275]	train-poisson-nloglik:2.287802 
## [276]	train-poisson-nloglik:2.287680 
## [277]	train-poisson-nloglik:2.287530 
## [278]	train-poisson-nloglik:2.287346 
## [279]	train-poisson-nloglik:2.287225 
## [280]	train-poisson-nloglik:2.286695 
## [281]	train-poisson-nloglik:2.286561 
## [282]	train-poisson-nloglik:2.286430 
## [283]	train-poisson-nloglik:2.286320 
## [284]	train-poisson-nloglik:2.285885 
## [285]	train-poisson-nloglik:2.285792 
## [286]	train-poisson-nloglik:2.285683 
## [287]	train-poisson-nloglik:2.285255 
## [288]	train-poisson-nloglik:2.285127 
## [289]	train-poisson-nloglik:2.285007 
## [290]	train-poisson-nloglik:2.284874 
## [291]	train-poisson-nloglik:2.283048 
## [292]	train-poisson-nloglik:2.282822 
## [293]	train-poisson-nloglik:2.282712 
## [294]	train-poisson-nloglik:2.282604 
## [295]	train-poisson-nloglik:2.282488 
## [296]	train-poisson-nloglik:2.282389 
## [297]	train-poisson-nloglik:2.282297 
## [298]	train-poisson-nloglik:2.282193 
## [299]	train-poisson-nloglik:2.282084 
## [300]	train-poisson-nloglik:2.281917 
## [301]	train-poisson-nloglik:2.281825 
## [302]	train-poisson-nloglik:2.281720 
## [303]	train-poisson-nloglik:2.281648 
## [304]	train-poisson-nloglik:2.281524 
## [305]	train-poisson-nloglik:2.281251 
## [306]	train-poisson-nloglik:2.281141 
## [307]	train-poisson-nloglik:2.281042 
## [308]	train-poisson-nloglik:2.280931 
## [309]	train-poisson-nloglik:2.280843 
## [310]	train-poisson-nloglik:2.280747 
## [311]	train-poisson-nloglik:2.280638 
## [312]	train-poisson-nloglik:2.280524 
## [313]	train-poisson-nloglik:2.280445 
## [314]	train-poisson-nloglik:2.280372 
## [315]	train-poisson-nloglik:2.280236 
## [316]	train-poisson-nloglik:2.280160 
## [317]	train-poisson-nloglik:2.280066 
## [318]	train-poisson-nloglik:2.279991 
## [319]	train-poisson-nloglik:2.279929 
## [320]	train-poisson-nloglik:2.279708 
## [321]	train-poisson-nloglik:2.279632 
## [322]	train-poisson-nloglik:2.279546 
## [323]	train-poisson-nloglik:2.279445 
## [324]	train-poisson-nloglik:2.279364 
## [325]	train-poisson-nloglik:2.279260 
## [326]	train-poisson-nloglik:2.279199 
## [327]	train-poisson-nloglik:2.278992 
## [328]	train-poisson-nloglik:2.277194 
## [329]	train-poisson-nloglik:2.277104 
## [330]	train-poisson-nloglik:2.277028 
## [331]	train-poisson-nloglik:2.276909 
## [332]	train-poisson-nloglik:2.276793 
## [333]	train-poisson-nloglik:2.276712 
## [334]	train-poisson-nloglik:2.276592 
## [335]	train-poisson-nloglik:2.276519 
## [336]	train-poisson-nloglik:2.276411 
## [337]	train-poisson-nloglik:2.276329 
## [338]	train-poisson-nloglik:2.276107 
## [339]	train-poisson-nloglik:2.273704 
## [340]	train-poisson-nloglik:2.273619 
## [341]	train-poisson-nloglik:2.273533 
## [342]	train-poisson-nloglik:2.273429 
## [343]	train-poisson-nloglik:2.273366 
## [344]	train-poisson-nloglik:2.273269 
## [345]	train-poisson-nloglik:2.273213 
## [346]	train-poisson-nloglik:2.273126 
## [347]	train-poisson-nloglik:2.273053 
## [348]	train-poisson-nloglik:2.272985 
## [349]	train-poisson-nloglik:2.272903 
## [350]	train-poisson-nloglik:2.272817 
## [351]	train-poisson-nloglik:2.272668 
## [352]	train-poisson-nloglik:2.272622 
## [353]	train-poisson-nloglik:2.272380 
## [354]	train-poisson-nloglik:2.272303 
## [355]	train-poisson-nloglik:2.272260 
## [356]	train-poisson-nloglik:2.271957 
## [357]	train-poisson-nloglik:2.271886 
## [358]	train-poisson-nloglik:2.271816 
## [359]	train-poisson-nloglik:2.271737 
## [360]	train-poisson-nloglik:2.271676 
## [361]	train-poisson-nloglik:2.271618 
## [362]	train-poisson-nloglik:2.271536 
## [363]	train-poisson-nloglik:2.271450 
## [364]	train-poisson-nloglik:2.271393 
## [365]	train-poisson-nloglik:2.271302 
## [366]	train-poisson-nloglik:2.271262 
## [367]	train-poisson-nloglik:2.271161 
## [368]	train-poisson-nloglik:2.270839 
## [369]	train-poisson-nloglik:2.270757 
## [370]	train-poisson-nloglik:2.270690 
## [371]	train-poisson-nloglik:2.270614 
## [372]	train-poisson-nloglik:2.270437 
## [373]	train-poisson-nloglik:2.270273 
## [374]	train-poisson-nloglik:2.269310 
## [375]	train-poisson-nloglik:2.269073 
## [376]	train-poisson-nloglik:2.269026 
## [377]	train-poisson-nloglik:2.268945 
## [378]	train-poisson-nloglik:2.268902 
## [379]	train-poisson-nloglik:2.268824 
## [380]	train-poisson-nloglik:2.268643 
## [381]	train-poisson-nloglik:2.268585 
## [382]	train-poisson-nloglik:2.268518 
## [383]	train-poisson-nloglik:2.268475 
## [384]	train-poisson-nloglik:2.268424 
## [385]	train-poisson-nloglik:2.268361 
## [386]	train-poisson-nloglik:2.268290 
## [387]	train-poisson-nloglik:2.268244 
## [388]	train-poisson-nloglik:2.268182 
## [389]	train-poisson-nloglik:2.268125 
## [390]	train-poisson-nloglik:2.268081 
## [391]	train-poisson-nloglik:2.268015 
## [392]	train-poisson-nloglik:2.267904 
## [393]	train-poisson-nloglik:2.267739 
## [394]	train-poisson-nloglik:2.267599 
## [395]	train-poisson-nloglik:2.267552 
## [396]	train-poisson-nloglik:2.267300 
## [397]	train-poisson-nloglik:2.267256 
## [398]	train-poisson-nloglik:2.267209 
## [399]	train-poisson-nloglik:2.267142 
## [400]	train-poisson-nloglik:2.267067 
## [401]	train-poisson-nloglik:2.267029 
## [402]	train-poisson-nloglik:2.266969 
## [403]	train-poisson-nloglik:2.266907 
## [404]	train-poisson-nloglik:2.266859 
## [405]	train-poisson-nloglik:2.266828 
## [406]	train-poisson-nloglik:2.266732 
## [407]	train-poisson-nloglik:2.266644 
## [408]	train-poisson-nloglik:2.265783 
## [409]	train-poisson-nloglik:2.265716 
## [410]	train-poisson-nloglik:2.265668 
## [411]	train-poisson-nloglik:2.265615 
## [412]	train-poisson-nloglik:2.265523 
## [413]	train-poisson-nloglik:2.265482 
## [414]	train-poisson-nloglik:2.265431 
## [415]	train-poisson-nloglik:2.265385 
## [416]	train-poisson-nloglik:2.265327 
## [417]	train-poisson-nloglik:2.265302 
## [418]	train-poisson-nloglik:2.265193 
## [419]	train-poisson-nloglik:2.265140 
## [420]	train-poisson-nloglik:2.265083 
## [421]	train-poisson-nloglik:2.265015 
## [422]	train-poisson-nloglik:2.264977 
## [423]	train-poisson-nloglik:2.264919 
## [424]	train-poisson-nloglik:2.264819 
## [425]	train-poisson-nloglik:2.263788 
## [426]	train-poisson-nloglik:2.263659 
## [427]	train-poisson-nloglik:2.263588 
## [428]	train-poisson-nloglik:2.263556 
## [429]	train-poisson-nloglik:2.263510 
## [430]	train-poisson-nloglik:2.263472 
## [431]	train-poisson-nloglik:2.263415 
## [432]	train-poisson-nloglik:2.263380 
## [433]	train-poisson-nloglik:2.263313 
## [434]	train-poisson-nloglik:2.263270 
## [435]	train-poisson-nloglik:2.263241 
## [436]	train-poisson-nloglik:2.263180 
## [437]	train-poisson-nloglik:2.263152 
## [438]	train-poisson-nloglik:2.263103 
## [439]	train-poisson-nloglik:2.263071 
## [440]	train-poisson-nloglik:2.262997 
## [441]	train-poisson-nloglik:2.262970 
## [442]	train-poisson-nloglik:2.262928 
## [443]	train-poisson-nloglik:2.262898 
## [444]	train-poisson-nloglik:2.262866 
## [445]	train-poisson-nloglik:2.262811 
## [446]	train-poisson-nloglik:2.262759 
## [447]	train-poisson-nloglik:2.262709 
## [448]	train-poisson-nloglik:2.262671 
## [449]	train-poisson-nloglik:2.262620 
## [450]	train-poisson-nloglik:2.262589 
## [451]	train-poisson-nloglik:2.262556 
## [452]	train-poisson-nloglik:2.262495 
## [453]	train-poisson-nloglik:2.262469 
## [454]	train-poisson-nloglik:2.262411 
## [455]	train-poisson-nloglik:2.261516 
## [456]	train-poisson-nloglik:2.260653 
## [457]	train-poisson-nloglik:2.260479 
## [458]	train-poisson-nloglik:2.260447 
## [459]	train-poisson-nloglik:2.260422 
## [460]	train-poisson-nloglik:2.260370 
## [461]	train-poisson-nloglik:2.260339 
## [462]	train-poisson-nloglik:2.260309 
## [463]	train-poisson-nloglik:2.260263 
## [464]	train-poisson-nloglik:2.260183 
## [465]	train-poisson-nloglik:2.259271 
## [466]	train-poisson-nloglik:2.257809 
## [467]	train-poisson-nloglik:2.257504 
## [468]	train-poisson-nloglik:2.257451 
## [469]	train-poisson-nloglik:2.257305 
## [470]	train-poisson-nloglik:2.257266 
## [471]	train-poisson-nloglik:2.257222 
## [472]	train-poisson-nloglik:2.257185 
## [473]	train-poisson-nloglik:2.257161 
## [474]	train-poisson-nloglik:2.257136 
## [475]	train-poisson-nloglik:2.257114 
## [476]	train-poisson-nloglik:2.257016 
## [477]	train-poisson-nloglik:2.256979 
## [478]	train-poisson-nloglik:2.256939 
## [479]	train-poisson-nloglik:2.256915 
## [480]	train-poisson-nloglik:2.256876 
## [481]	train-poisson-nloglik:2.256840 
## [482]	train-poisson-nloglik:2.256798 
## [483]	train-poisson-nloglik:2.256747 
## [484]	train-poisson-nloglik:2.256715 
## [485]	train-poisson-nloglik:2.256587 
## [486]	train-poisson-nloglik:2.256111 
## [487]	train-poisson-nloglik:2.256087 
## [488]	train-poisson-nloglik:2.255929 
## [489]	train-poisson-nloglik:2.255875 
## [490]	train-poisson-nloglik:2.255848 
## [491]	train-poisson-nloglik:2.255793 
## [492]	train-poisson-nloglik:2.255763 
## [493]	train-poisson-nloglik:2.255740 
## [494]	train-poisson-nloglik:2.255715 
## [495]	train-poisson-nloglik:2.255680 
## [496]	train-poisson-nloglik:2.255650 
## [497]	train-poisson-nloglik:2.255612 
## [498]	train-poisson-nloglik:2.255570 
## [499]	train-poisson-nloglik:2.254921 
## [500]	train-poisson-nloglik:2.253035
```

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3. XGboost  
#### [ 피자 배달 건수를 모델링 ]   
  
  2.모델링

```r
importance_pizza &lt;- xgb.importance(
                  feature_names = colnames(sparse_matrix_pizza),
                  model = xgb_pizza)
head(importance_pizza)
```

```
##          Feature       Gain       Cover   Frequency
## 1:   age30대40대 0.20791529 0.016666169 0.088887190
## 2:    dong미아동 0.09044830 0.010063254 0.002636808
## 3:    dong신림동 0.08876833 0.011143760 0.003668603
## 4:  dong신대방동 0.06625351 0.009958423 0.003324671
## 5:    dong상계동 0.05253926 0.009085026 0.002331091
## 6: dong성수동2가 0.04883745 0.008888830 0.002598594
```

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3. XGboost  
#### [ 피자 배달 건수를 모델링 ]   
  
  2.모델링  
  
![](sample_files/figure-html/unnamed-chunk-21-1.png)&lt;!-- --&gt;
  
---
class: center, middle

background-image: url(Picture1.png)
background-position: center


.white[
#감사합니다]

---
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
