<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>ITS_EATS</title>
    <meta charset="utf-8" />
    <meta name="author" content="jaein" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="my-style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3-1. XGboost (위도, 경도 적용)  
#### [ 중국집 배달 건수를 모델링 ]  
1. test, train set 나누기



```r
data &lt;- read.csv("final_0618.csv",  fileEncoding = "euc-kr")
data_chinese &lt;- data %&gt;% filter(type=="중국집")
idx_chinese &lt;- sample(1:nrow(data_chinese),nrow(data_chinese)*0.7)
train.df_chinese &lt;- data_chinese[idx_chinese,]
test.df_chinese &lt;- data_chinese[-idx_chinese,]
```

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3-1. XGboost (위도, 경도 적용)  
#### [ 중국집 배달 건수를 모델링 ]  
2. sparse matrix (원핫인코딩)



```r
sparse_matrix_train_chinese &lt;- sparse.model.matrix(call ~ -1+day+gender+age+month+
                                                     longitude+latitude+gangsu+rain+
                                                     temperature+holiday+KBO+soccer,
                                                   data = train.df_chinese)
sparse_matrix_test_chinese  &lt;- sparse.model.matrix(call ~ -1+day+gender+age+month+
                                                     longitude+latitude+gangsu+rain+
                                                     temperature+holiday+KBO+soccer,
                                                   data =  test.df_chinese)
output_vector_chinese = train.df_chinese[,"call"]
obs_chinese &lt;- test.df_chinese[,"call"]
```


---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3-1. XGboost (위도, 경도 적용)  
#### [ 중국집 배달 건수를 모델링 ]  
3. 모델링



```r
set.seed(2013101041)
xgb_chinese &lt;- xgboost(data = sparse_matrix_train_chinese,
                       label = output_vector_chinese,
                       max_depth = 6, eta = 0.3, nthread = 3, nrounds = 500,
                       objective = "count:poisson")
```

```
## [1]	train-poisson-nloglik:59.813030 
## [2]	train-poisson-nloglik:56.060425 
## [3]	train-poisson-nloglik:52.308723 
## [4]	train-poisson-nloglik:48.636215 
## [5]	train-poisson-nloglik:45.084831 
## [6]	train-poisson-nloglik:41.481026 
## [7]	train-poisson-nloglik:38.055363 
## [8]	train-poisson-nloglik:34.715862 
## [9]	train-poisson-nloglik:31.447332 
## [10]	train-poisson-nloglik:28.373434 
## [11]	train-poisson-nloglik:25.452238 
## [12]	train-poisson-nloglik:22.773954 
## [13]	train-poisson-nloglik:20.359669 
## [14]	train-poisson-nloglik:18.183962 
## [15]	train-poisson-nloglik:16.259571 
## [16]	train-poisson-nloglik:14.522282 
## [17]	train-poisson-nloglik:13.055590 
## [18]	train-poisson-nloglik:11.730569 
## [19]	train-poisson-nloglik:10.551600 
## [20]	train-poisson-nloglik:9.665554 
## [21]	train-poisson-nloglik:8.775119 
## [22]	train-poisson-nloglik:7.929798 
## [23]	train-poisson-nloglik:7.413720 
## [24]	train-poisson-nloglik:7.011383 
## [25]	train-poisson-nloglik:6.437902 
## [26]	train-poisson-nloglik:6.213458 
## [27]	train-poisson-nloglik:6.065701 
## [28]	train-poisson-nloglik:5.830319 
## [29]	train-poisson-nloglik:5.588253 
## [30]	train-poisson-nloglik:5.424568 
## [31]	train-poisson-nloglik:5.293226 
## [32]	train-poisson-nloglik:5.134077 
## [33]	train-poisson-nloglik:5.003473 
## [34]	train-poisson-nloglik:4.856825 
## [35]	train-poisson-nloglik:4.745507 
## [36]	train-poisson-nloglik:4.681993 
## [37]	train-poisson-nloglik:4.608633 
## [38]	train-poisson-nloglik:4.479393 
## [39]	train-poisson-nloglik:4.431411 
## [40]	train-poisson-nloglik:4.311457 
## [41]	train-poisson-nloglik:4.288414 
## [42]	train-poisson-nloglik:4.191011 
## [43]	train-poisson-nloglik:4.093629 
## [44]	train-poisson-nloglik:4.059856 
## [45]	train-poisson-nloglik:3.981841 
## [46]	train-poisson-nloglik:3.925851 
## [47]	train-poisson-nloglik:3.864148 
## [48]	train-poisson-nloglik:3.850664 
## [49]	train-poisson-nloglik:3.800358 
## [50]	train-poisson-nloglik:3.778570 
## [51]	train-poisson-nloglik:3.754187 
## [52]	train-poisson-nloglik:3.715265 
## [53]	train-poisson-nloglik:3.702965 
## [54]	train-poisson-nloglik:3.668557 
## [55]	train-poisson-nloglik:3.637982 
## [56]	train-poisson-nloglik:3.623814 
## [57]	train-poisson-nloglik:3.588686 
## [58]	train-poisson-nloglik:3.550752 
## [59]	train-poisson-nloglik:3.540176 
## [60]	train-poisson-nloglik:3.521278 
## [61]	train-poisson-nloglik:3.497567 
## [62]	train-poisson-nloglik:3.474349 
## [63]	train-poisson-nloglik:3.466084 
## [64]	train-poisson-nloglik:3.443099 
## [65]	train-poisson-nloglik:3.433910 
## [66]	train-poisson-nloglik:3.394727 
## [67]	train-poisson-nloglik:3.354989 
## [68]	train-poisson-nloglik:3.327223 
## [69]	train-poisson-nloglik:3.290061 
## [70]	train-poisson-nloglik:3.269614 
## [71]	train-poisson-nloglik:3.253286 
## [72]	train-poisson-nloglik:3.248403 
## [73]	train-poisson-nloglik:3.233585 
## [74]	train-poisson-nloglik:3.224258 
## [75]	train-poisson-nloglik:3.200978 
## [76]	train-poisson-nloglik:3.186394 
## [77]	train-poisson-nloglik:3.181594 
## [78]	train-poisson-nloglik:3.176874 
## [79]	train-poisson-nloglik:3.159045 
## [80]	train-poisson-nloglik:3.142326 
## [81]	train-poisson-nloglik:3.130791 
## [82]	train-poisson-nloglik:3.122482 
## [83]	train-poisson-nloglik:3.119879 
## [84]	train-poisson-nloglik:3.111221 
## [85]	train-poisson-nloglik:3.101985 
## [86]	train-poisson-nloglik:3.086774 
## [87]	train-poisson-nloglik:3.074803 
## [88]	train-poisson-nloglik:3.067705 
## [89]	train-poisson-nloglik:3.061637 
## [90]	train-poisson-nloglik:3.041144 
## [91]	train-poisson-nloglik:3.037445 
## [92]	train-poisson-nloglik:3.032100 
## [93]	train-poisson-nloglik:3.020947 
## [94]	train-poisson-nloglik:3.012990 
## [95]	train-poisson-nloglik:3.010121 
## [96]	train-poisson-nloglik:3.005924 
## [97]	train-poisson-nloglik:2.994162 
## [98]	train-poisson-nloglik:2.988595 
## [99]	train-poisson-nloglik:2.983003 
## [100]	train-poisson-nloglik:2.977413 
## [101]	train-poisson-nloglik:2.973327 
## [102]	train-poisson-nloglik:2.967887 
## [103]	train-poisson-nloglik:2.965018 
## [104]	train-poisson-nloglik:2.962595 
## [105]	train-poisson-nloglik:2.954940 
## [106]	train-poisson-nloglik:2.952820 
## [107]	train-poisson-nloglik:2.949669 
## [108]	train-poisson-nloglik:2.946869 
## [109]	train-poisson-nloglik:2.943136 
## [110]	train-poisson-nloglik:2.934685 
## [111]	train-poisson-nloglik:2.929931 
## [112]	train-poisson-nloglik:2.927885 
## [113]	train-poisson-nloglik:2.921269 
## [114]	train-poisson-nloglik:2.919798 
## [115]	train-poisson-nloglik:2.911442 
## [116]	train-poisson-nloglik:2.904422 
## [117]	train-poisson-nloglik:2.902944 
## [118]	train-poisson-nloglik:2.897724 
## [119]	train-poisson-nloglik:2.895948 
## [120]	train-poisson-nloglik:2.894350 
## [121]	train-poisson-nloglik:2.891340 
## [122]	train-poisson-nloglik:2.882455 
## [123]	train-poisson-nloglik:2.877931 
## [124]	train-poisson-nloglik:2.874099 
## [125]	train-poisson-nloglik:2.869098 
## [126]	train-poisson-nloglik:2.866498 
## [127]	train-poisson-nloglik:2.865822 
## [128]	train-poisson-nloglik:2.859972 
## [129]	train-poisson-nloglik:2.858180 
## [130]	train-poisson-nloglik:2.856071 
## [131]	train-poisson-nloglik:2.849824 
## [132]	train-poisson-nloglik:2.845547 
## [133]	train-poisson-nloglik:2.843421 
## [134]	train-poisson-nloglik:2.842360 
## [135]	train-poisson-nloglik:2.840946 
## [136]	train-poisson-nloglik:2.840173 
## [137]	train-poisson-nloglik:2.839349 
## [138]	train-poisson-nloglik:2.838721 
## [139]	train-poisson-nloglik:2.833424 
## [140]	train-poisson-nloglik:2.831542 
## [141]	train-poisson-nloglik:2.829500 
## [142]	train-poisson-nloglik:2.829060 
## [143]	train-poisson-nloglik:2.825307 
## [144]	train-poisson-nloglik:2.825104 
## [145]	train-poisson-nloglik:2.823646 
## [146]	train-poisson-nloglik:2.822614 
## [147]	train-poisson-nloglik:2.818102 
## [148]	train-poisson-nloglik:2.816249 
## [149]	train-poisson-nloglik:2.808208 
## [150]	train-poisson-nloglik:2.807695 
## [151]	train-poisson-nloglik:2.804513 
## [152]	train-poisson-nloglik:2.803962 
## [153]	train-poisson-nloglik:2.802545 
## [154]	train-poisson-nloglik:2.801971 
## [155]	train-poisson-nloglik:2.797612 
## [156]	train-poisson-nloglik:2.796158 
## [157]	train-poisson-nloglik:2.795640 
## [158]	train-poisson-nloglik:2.793861 
## [159]	train-poisson-nloglik:2.790690 
## [160]	train-poisson-nloglik:2.785978 
## [161]	train-poisson-nloglik:2.780724 
## [162]	train-poisson-nloglik:2.778141 
## [163]	train-poisson-nloglik:2.775177 
## [164]	train-poisson-nloglik:2.772944 
## [165]	train-poisson-nloglik:2.770298 
## [166]	train-poisson-nloglik:2.769768 
## [167]	train-poisson-nloglik:2.769391 
## [168]	train-poisson-nloglik:2.768122 
## [169]	train-poisson-nloglik:2.767155 
## [170]	train-poisson-nloglik:2.765422 
## [171]	train-poisson-nloglik:2.765019 
## [172]	train-poisson-nloglik:2.764554 
## [173]	train-poisson-nloglik:2.762095 
## [174]	train-poisson-nloglik:2.758749 
## [175]	train-poisson-nloglik:2.757773 
## [176]	train-poisson-nloglik:2.755647 
## [177]	train-poisson-nloglik:2.755252 
## [178]	train-poisson-nloglik:2.754271 
## [179]	train-poisson-nloglik:2.752451 
## [180]	train-poisson-nloglik:2.750084 
## [181]	train-poisson-nloglik:2.749643 
## [182]	train-poisson-nloglik:2.747506 
## [183]	train-poisson-nloglik:2.744445 
## [184]	train-poisson-nloglik:2.743567 
## [185]	train-poisson-nloglik:2.742030 
## [186]	train-poisson-nloglik:2.740534 
## [187]	train-poisson-nloglik:2.739075 
## [188]	train-poisson-nloglik:2.738124 
## [189]	train-poisson-nloglik:2.735944 
## [190]	train-poisson-nloglik:2.735506 
## [191]	train-poisson-nloglik:2.734969 
## [192]	train-poisson-nloglik:2.733679 
## [193]	train-poisson-nloglik:2.731723 
## [194]	train-poisson-nloglik:2.727864 
## [195]	train-poisson-nloglik:2.727647 
## [196]	train-poisson-nloglik:2.726122 
## [197]	train-poisson-nloglik:2.725009 
## [198]	train-poisson-nloglik:2.724235 
## [199]	train-poisson-nloglik:2.723358 
## [200]	train-poisson-nloglik:2.723119 
## [201]	train-poisson-nloglik:2.722283 
## [202]	train-poisson-nloglik:2.722183 
## [203]	train-poisson-nloglik:2.721537 
## [204]	train-poisson-nloglik:2.721534 
## [205]	train-poisson-nloglik:2.721536 
## [206]	train-poisson-nloglik:2.720397 
## [207]	train-poisson-nloglik:2.718714 
## [208]	train-poisson-nloglik:2.716902 
## [209]	train-poisson-nloglik:2.716901 
## [210]	train-poisson-nloglik:2.715695 
## [211]	train-poisson-nloglik:2.714608 
## [212]	train-poisson-nloglik:2.713409 
## [213]	train-poisson-nloglik:2.712745 
## [214]	train-poisson-nloglik:2.712740 
## [215]	train-poisson-nloglik:2.712741 
## [216]	train-poisson-nloglik:2.712236 
## [217]	train-poisson-nloglik:2.711994 
## [218]	train-poisson-nloglik:2.711341 
## [219]	train-poisson-nloglik:2.710707 
## [220]	train-poisson-nloglik:2.710708 
## [221]	train-poisson-nloglik:2.710709 
## [222]	train-poisson-nloglik:2.708849 
## [223]	train-poisson-nloglik:2.708573 
## [224]	train-poisson-nloglik:2.706852 
## [225]	train-poisson-nloglik:2.706666 
## [226]	train-poisson-nloglik:2.706301 
## [227]	train-poisson-nloglik:2.705611 
## [228]	train-poisson-nloglik:2.705608 
## [229]	train-poisson-nloglik:2.705168 
## [230]	train-poisson-nloglik:2.703952 
## [231]	train-poisson-nloglik:2.702102 
## [232]	train-poisson-nloglik:2.700850 
## [233]	train-poisson-nloglik:2.700601 
## [234]	train-poisson-nloglik:2.700001 
## [235]	train-poisson-nloglik:2.698813 
## [236]	train-poisson-nloglik:2.698013 
## [237]	train-poisson-nloglik:2.697446 
## [238]	train-poisson-nloglik:2.696993 
## [239]	train-poisson-nloglik:2.696859 
## [240]	train-poisson-nloglik:2.696067 
## [241]	train-poisson-nloglik:2.694836 
## [242]	train-poisson-nloglik:2.694503 
## [243]	train-poisson-nloglik:2.694503 
## [244]	train-poisson-nloglik:2.694501 
## [245]	train-poisson-nloglik:2.694501 
## [246]	train-poisson-nloglik:2.694503 
## [247]	train-poisson-nloglik:2.694501 
## [248]	train-poisson-nloglik:2.694502 
## [249]	train-poisson-nloglik:2.694502 
## [250]	train-poisson-nloglik:2.694502 
## [251]	train-poisson-nloglik:2.694502 
## [252]	train-poisson-nloglik:2.694501 
## [253]	train-poisson-nloglik:2.694501 
## [254]	train-poisson-nloglik:2.694501 
## [255]	train-poisson-nloglik:2.694501 
## [256]	train-poisson-nloglik:2.694502 
## [257]	train-poisson-nloglik:2.694502 
## [258]	train-poisson-nloglik:2.694502 
## [259]	train-poisson-nloglik:2.693714 
## [260]	train-poisson-nloglik:2.693090 
## [261]	train-poisson-nloglik:2.693090 
## [262]	train-poisson-nloglik:2.693091 
## [263]	train-poisson-nloglik:2.693091 
## [264]	train-poisson-nloglik:2.693091 
## [265]	train-poisson-nloglik:2.693091 
## [266]	train-poisson-nloglik:2.693091 
## [267]	train-poisson-nloglik:2.693090 
## [268]	train-poisson-nloglik:2.693090 
## [269]	train-poisson-nloglik:2.693091 
## [270]	train-poisson-nloglik:2.693090 
## [271]	train-poisson-nloglik:2.693090 
## [272]	train-poisson-nloglik:2.693090 
## [273]	train-poisson-nloglik:2.693091 
## [274]	train-poisson-nloglik:2.693091 
## [275]	train-poisson-nloglik:2.693090 
## [276]	train-poisson-nloglik:2.693090 
## [277]	train-poisson-nloglik:2.693090 
## [278]	train-poisson-nloglik:2.693090 
## [279]	train-poisson-nloglik:2.693090 
## [280]	train-poisson-nloglik:2.693090 
## [281]	train-poisson-nloglik:2.693090 
## [282]	train-poisson-nloglik:2.693090 
## [283]	train-poisson-nloglik:2.693090 
## [284]	train-poisson-nloglik:2.693090 
## [285]	train-poisson-nloglik:2.693090 
## [286]	train-poisson-nloglik:2.693090 
## [287]	train-poisson-nloglik:2.693090 
## [288]	train-poisson-nloglik:2.693090 
## [289]	train-poisson-nloglik:2.693090 
## [290]	train-poisson-nloglik:2.693090 
## [291]	train-poisson-nloglik:2.693090 
## [292]	train-poisson-nloglik:2.693091 
## [293]	train-poisson-nloglik:2.693090 
## [294]	train-poisson-nloglik:2.693090 
## [295]	train-poisson-nloglik:2.693090 
## [296]	train-poisson-nloglik:2.693090 
## [297]	train-poisson-nloglik:2.693090 
## [298]	train-poisson-nloglik:2.693090 
## [299]	train-poisson-nloglik:2.693090 
## [300]	train-poisson-nloglik:2.693090 
## [301]	train-poisson-nloglik:2.693090 
## [302]	train-poisson-nloglik:2.693090 
## [303]	train-poisson-nloglik:2.693090 
## [304]	train-poisson-nloglik:2.693090 
## [305]	train-poisson-nloglik:2.693090 
## [306]	train-poisson-nloglik:2.693090 
## [307]	train-poisson-nloglik:2.693090 
## [308]	train-poisson-nloglik:2.693090 
## [309]	train-poisson-nloglik:2.693090 
## [310]	train-poisson-nloglik:2.693090 
## [311]	train-poisson-nloglik:2.693090 
## [312]	train-poisson-nloglik:2.693090 
## [313]	train-poisson-nloglik:2.693090 
## [314]	train-poisson-nloglik:2.693090 
## [315]	train-poisson-nloglik:2.693090 
## [316]	train-poisson-nloglik:2.693090 
## [317]	train-poisson-nloglik:2.693090 
## [318]	train-poisson-nloglik:2.693090 
## [319]	train-poisson-nloglik:2.693090 
## [320]	train-poisson-nloglik:2.693090 
## [321]	train-poisson-nloglik:2.693090 
## [322]	train-poisson-nloglik:2.693090 
## [323]	train-poisson-nloglik:2.693090 
## [324]	train-poisson-nloglik:2.693090 
## [325]	train-poisson-nloglik:2.693090 
## [326]	train-poisson-nloglik:2.693090 
## [327]	train-poisson-nloglik:2.693090 
## [328]	train-poisson-nloglik:2.693090 
## [329]	train-poisson-nloglik:2.693090 
## [330]	train-poisson-nloglik:2.693090 
## [331]	train-poisson-nloglik:2.693090 
## [332]	train-poisson-nloglik:2.693090 
## [333]	train-poisson-nloglik:2.693090 
## [334]	train-poisson-nloglik:2.693090 
## [335]	train-poisson-nloglik:2.693090 
## [336]	train-poisson-nloglik:2.693090 
## [337]	train-poisson-nloglik:2.693090 
## [338]	train-poisson-nloglik:2.693090 
## [339]	train-poisson-nloglik:2.693090 
## [340]	train-poisson-nloglik:2.693090 
## [341]	train-poisson-nloglik:2.693090 
## [342]	train-poisson-nloglik:2.693090 
## [343]	train-poisson-nloglik:2.693090 
## [344]	train-poisson-nloglik:2.693090 
## [345]	train-poisson-nloglik:2.693090 
## [346]	train-poisson-nloglik:2.693090 
## [347]	train-poisson-nloglik:2.693090 
## [348]	train-poisson-nloglik:2.693090 
## [349]	train-poisson-nloglik:2.693090 
## [350]	train-poisson-nloglik:2.693090 
## [351]	train-poisson-nloglik:2.693090 
## [352]	train-poisson-nloglik:2.693090 
## [353]	train-poisson-nloglik:2.693090 
## [354]	train-poisson-nloglik:2.693090 
## [355]	train-poisson-nloglik:2.693090 
## [356]	train-poisson-nloglik:2.693090 
## [357]	train-poisson-nloglik:2.693090 
## [358]	train-poisson-nloglik:2.693090 
## [359]	train-poisson-nloglik:2.693090 
## [360]	train-poisson-nloglik:2.693090 
## [361]	train-poisson-nloglik:2.693090 
## [362]	train-poisson-nloglik:2.693090 
## [363]	train-poisson-nloglik:2.693090 
## [364]	train-poisson-nloglik:2.693090 
## [365]	train-poisson-nloglik:2.693090 
## [366]	train-poisson-nloglik:2.693090 
## [367]	train-poisson-nloglik:2.693090 
## [368]	train-poisson-nloglik:2.693090 
## [369]	train-poisson-nloglik:2.693090 
## [370]	train-poisson-nloglik:2.693090 
## [371]	train-poisson-nloglik:2.693090 
## [372]	train-poisson-nloglik:2.693090 
## [373]	train-poisson-nloglik:2.693090 
## [374]	train-poisson-nloglik:2.693090 
## [375]	train-poisson-nloglik:2.693090 
## [376]	train-poisson-nloglik:2.693090 
## [377]	train-poisson-nloglik:2.693090 
## [378]	train-poisson-nloglik:2.693090 
## [379]	train-poisson-nloglik:2.693090 
## [380]	train-poisson-nloglik:2.693090 
## [381]	train-poisson-nloglik:2.693090 
## [382]	train-poisson-nloglik:2.693090 
## [383]	train-poisson-nloglik:2.693090 
## [384]	train-poisson-nloglik:2.693090 
## [385]	train-poisson-nloglik:2.693090 
## [386]	train-poisson-nloglik:2.693091 
## [387]	train-poisson-nloglik:2.693091 
## [388]	train-poisson-nloglik:2.693091 
## [389]	train-poisson-nloglik:2.693091 
## [390]	train-poisson-nloglik:2.693091 
## [391]	train-poisson-nloglik:2.693091 
## [392]	train-poisson-nloglik:2.693091 
## [393]	train-poisson-nloglik:2.693091 
## [394]	train-poisson-nloglik:2.693091 
## [395]	train-poisson-nloglik:2.693091 
## [396]	train-poisson-nloglik:2.693091 
## [397]	train-poisson-nloglik:2.693091 
## [398]	train-poisson-nloglik:2.693091 
## [399]	train-poisson-nloglik:2.693091 
## [400]	train-poisson-nloglik:2.693091 
## [401]	train-poisson-nloglik:2.693091 
## [402]	train-poisson-nloglik:2.693091 
## [403]	train-poisson-nloglik:2.693091 
## [404]	train-poisson-nloglik:2.693091 
## [405]	train-poisson-nloglik:2.693091 
## [406]	train-poisson-nloglik:2.693091 
## [407]	train-poisson-nloglik:2.693091 
## [408]	train-poisson-nloglik:2.693091 
## [409]	train-poisson-nloglik:2.693091 
## [410]	train-poisson-nloglik:2.693091 
## [411]	train-poisson-nloglik:2.693091 
## [412]	train-poisson-nloglik:2.693091 
## [413]	train-poisson-nloglik:2.693091 
## [414]	train-poisson-nloglik:2.693091 
## [415]	train-poisson-nloglik:2.693091 
## [416]	train-poisson-nloglik:2.693091 
## [417]	train-poisson-nloglik:2.693091 
## [418]	train-poisson-nloglik:2.693091 
## [419]	train-poisson-nloglik:2.693091 
## [420]	train-poisson-nloglik:2.693091 
## [421]	train-poisson-nloglik:2.693091 
## [422]	train-poisson-nloglik:2.693091 
## [423]	train-poisson-nloglik:2.693091 
## [424]	train-poisson-nloglik:2.693091 
## [425]	train-poisson-nloglik:2.693091 
## [426]	train-poisson-nloglik:2.693091 
## [427]	train-poisson-nloglik:2.693091 
## [428]	train-poisson-nloglik:2.693091 
## [429]	train-poisson-nloglik:2.693091 
## [430]	train-poisson-nloglik:2.693091 
## [431]	train-poisson-nloglik:2.693091 
## [432]	train-poisson-nloglik:2.693091 
## [433]	train-poisson-nloglik:2.693091 
## [434]	train-poisson-nloglik:2.693091 
## [435]	train-poisson-nloglik:2.693091 
## [436]	train-poisson-nloglik:2.693091 
## [437]	train-poisson-nloglik:2.693091 
## [438]	train-poisson-nloglik:2.693091 
## [439]	train-poisson-nloglik:2.693091 
## [440]	train-poisson-nloglik:2.693091 
## [441]	train-poisson-nloglik:2.693091 
## [442]	train-poisson-nloglik:2.693091 
## [443]	train-poisson-nloglik:2.693091 
## [444]	train-poisson-nloglik:2.693091 
## [445]	train-poisson-nloglik:2.693091 
## [446]	train-poisson-nloglik:2.693091 
## [447]	train-poisson-nloglik:2.693091 
## [448]	train-poisson-nloglik:2.693091 
## [449]	train-poisson-nloglik:2.693091 
## [450]	train-poisson-nloglik:2.693091 
## [451]	train-poisson-nloglik:2.693091 
## [452]	train-poisson-nloglik:2.693091 
## [453]	train-poisson-nloglik:2.693091 
## [454]	train-poisson-nloglik:2.693091 
## [455]	train-poisson-nloglik:2.693091 
## [456]	train-poisson-nloglik:2.693091 
## [457]	train-poisson-nloglik:2.693091 
## [458]	train-poisson-nloglik:2.693091 
## [459]	train-poisson-nloglik:2.693091 
## [460]	train-poisson-nloglik:2.693091 
## [461]	train-poisson-nloglik:2.693091 
## [462]	train-poisson-nloglik:2.693091 
## [463]	train-poisson-nloglik:2.693091 
## [464]	train-poisson-nloglik:2.693091 
## [465]	train-poisson-nloglik:2.693091 
## [466]	train-poisson-nloglik:2.693091 
## [467]	train-poisson-nloglik:2.693091 
## [468]	train-poisson-nloglik:2.693091 
## [469]	train-poisson-nloglik:2.693091 
## [470]	train-poisson-nloglik:2.693091 
## [471]	train-poisson-nloglik:2.693091 
## [472]	train-poisson-nloglik:2.693091 
## [473]	train-poisson-nloglik:2.693091 
## [474]	train-poisson-nloglik:2.693091 
## [475]	train-poisson-nloglik:2.693091 
## [476]	train-poisson-nloglik:2.693091 
## [477]	train-poisson-nloglik:2.693091 
## [478]	train-poisson-nloglik:2.693091 
## [479]	train-poisson-nloglik:2.693091 
## [480]	train-poisson-nloglik:2.693091 
## [481]	train-poisson-nloglik:2.693091 
## [482]	train-poisson-nloglik:2.693091 
## [483]	train-poisson-nloglik:2.693091 
## [484]	train-poisson-nloglik:2.693091 
## [485]	train-poisson-nloglik:2.693091 
## [486]	train-poisson-nloglik:2.693091 
## [487]	train-poisson-nloglik:2.693091 
## [488]	train-poisson-nloglik:2.693091 
## [489]	train-poisson-nloglik:2.693091 
## [490]	train-poisson-nloglik:2.693091 
## [491]	train-poisson-nloglik:2.693091 
## [492]	train-poisson-nloglik:2.693091 
## [493]	train-poisson-nloglik:2.693091 
## [494]	train-poisson-nloglik:2.693091 
## [495]	train-poisson-nloglik:2.693091 
## [496]	train-poisson-nloglik:2.693091 
## [497]	train-poisson-nloglik:2.693091 
## [498]	train-poisson-nloglik:2.693091 
## [499]	train-poisson-nloglik:2.693091 
## [500]	train-poisson-nloglik:2.693091
```

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

# Variable Importance Plot

```r
importance_chinese &lt;- xgb.importance(feature_names = colnames(sparse_matrix_train_chinese),
                                     model = xgb_chinese)
head(importance_chinese)
```

```
##        Feature       Gain       Cover  Frequency
## 1:    latitude 0.39549059 0.705048450 0.27075767
## 2:   longitude 0.36194531 0.148685655 0.20463369
## 3: age30대40대 0.10750909 0.011631488 0.06424546
## 4: age50대이상 0.06009922 0.007403615 0.04408265
## 5:     age20대 0.02452737 0.007612608 0.04577332
## 6:       month 0.01984939 0.013528232 0.06305573
```

---
background-image: url(Picture2.png)
background-position: center
background-size: contain


```r
xgb.plot.importance(importance_matrix = importance_chinese,
                    top_n=15)
```

![](Service_1__files/figure-html/unnamed-chunk-8-1.png)&lt;!-- --&gt;

---

### 3-1. XGboost (위도, 경도 적용)  
#### [ 치킨 배달 건수를 모델링 ]  
1. test, train set 나누기

```r
data_chicken &lt;- data %&gt;% filter(type=="치킨")
idx_chicken &lt;- sample(1:nrow(data_chicken),nrow(data_chicken)*0.7)
train.df_chicken &lt;- data_chicken[idx_chicken,]
test.df_chicken &lt;- data_chicken[-idx_chicken,]
```

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3-1. XGboost (위도, 경도 적용)  
#### [ 치킨 배달 건수를 모델링 ]  
2. sparse matrix (원핫인코딩)

```r
sparse_matrix_train_chicken &lt;- sparse.model.matrix(call ~ -1+day+gender+age+month+
                                                     longitude+latitude+gangsu+rain+
                                                     temperature+holiday+KBO+soccer,
                                                   data = train.df_chicken)
sparse_matrix_test_chicken  &lt;- sparse.model.matrix(call ~ -1+day+gender+age+month+
                                                     longitude+latitude+gangsu+rain+
                                                     temperature+holiday+KBO+soccer,
                                                   data =  test.df_chicken)
output_vector_chicken = train.df_chicken[,"call"]
obs_chicken &lt;- test.df_chicken[,"call"]
```


---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3-1. XGboost (위도, 경도 적용)  
#### [ 치킨 배달 건수를 모델링 ]  
3. 모델링

```r
set.seed(2013101041)
xgb_chicken &lt;- xgboost(data = sparse_matrix_train_chicken,
                       label = output_vector_chicken,
                       max_depth = 6, eta = 0.3, nthread = 3, nrounds = 500,
                       objective = "count:poisson")
```

```
## [1]	train-poisson-nloglik:55.525047 
## [2]	train-poisson-nloglik:52.019325 
## [3]	train-poisson-nloglik:48.508965 
## [4]	train-poisson-nloglik:45.078522 
## [5]	train-poisson-nloglik:41.775326 
## [6]	train-poisson-nloglik:38.414127 
## [7]	train-poisson-nloglik:35.227169 
## [8]	train-poisson-nloglik:32.129761 
## [9]	train-poisson-nloglik:29.103321 
## [10]	train-poisson-nloglik:26.272655 
## [11]	train-poisson-nloglik:23.595661 
## [12]	train-poisson-nloglik:21.233868 
## [13]	train-poisson-nloglik:19.092079 
## [14]	train-poisson-nloglik:17.231236 
## [15]	train-poisson-nloglik:15.603292 
## [16]	train-poisson-nloglik:14.177907 
## [17]	train-poisson-nloglik:12.874598 
## [18]	train-poisson-nloglik:11.886132 
## [19]	train-poisson-nloglik:10.955662 
## [20]	train-poisson-nloglik:10.077247 
## [21]	train-poisson-nloglik:9.536134 
## [22]	train-poisson-nloglik:9.097745 
## [23]	train-poisson-nloglik:8.581709 
## [24]	train-poisson-nloglik:8.318227 
## [25]	train-poisson-nloglik:7.803456 
## [26]	train-poisson-nloglik:7.520681 
## [27]	train-poisson-nloglik:7.216233 
## [28]	train-poisson-nloglik:7.049254 
## [29]	train-poisson-nloglik:6.776451 
## [30]	train-poisson-nloglik:6.435413 
## [31]	train-poisson-nloglik:6.098795 
## [32]	train-poisson-nloglik:6.008939 
## [33]	train-poisson-nloglik:5.907451 
## [34]	train-poisson-nloglik:5.686208 
## [35]	train-poisson-nloglik:5.568865 
## [36]	train-poisson-nloglik:5.517135 
## [37]	train-poisson-nloglik:5.208109 
## [38]	train-poisson-nloglik:4.966853 
## [39]	train-poisson-nloglik:4.846511 
## [40]	train-poisson-nloglik:4.805659 
## [41]	train-poisson-nloglik:4.686566 
## [42]	train-poisson-nloglik:4.621010 
## [43]	train-poisson-nloglik:4.416994 
## [44]	train-poisson-nloglik:4.386785 
## [45]	train-poisson-nloglik:4.316740 
## [46]	train-poisson-nloglik:4.193014 
## [47]	train-poisson-nloglik:4.164443 
## [48]	train-poisson-nloglik:4.092868 
## [49]	train-poisson-nloglik:3.993852 
## [50]	train-poisson-nloglik:3.939798 
## [51]	train-poisson-nloglik:3.862433 
## [52]	train-poisson-nloglik:3.846885 
## [53]	train-poisson-nloglik:3.819584 
## [54]	train-poisson-nloglik:3.803477 
## [55]	train-poisson-nloglik:3.788274 
## [56]	train-poisson-nloglik:3.760574 
## [57]	train-poisson-nloglik:3.727933 
## [58]	train-poisson-nloglik:3.668343 
## [59]	train-poisson-nloglik:3.634311 
## [60]	train-poisson-nloglik:3.584929 
## [61]	train-poisson-nloglik:3.574261 
## [62]	train-poisson-nloglik:3.556139 
## [63]	train-poisson-nloglik:3.537576 
## [64]	train-poisson-nloglik:3.521112 
## [65]	train-poisson-nloglik:3.510481 
## [66]	train-poisson-nloglik:3.500075 
## [67]	train-poisson-nloglik:3.478280 
## [68]	train-poisson-nloglik:3.457671 
## [69]	train-poisson-nloglik:3.433820 
## [70]	train-poisson-nloglik:3.398827 
## [71]	train-poisson-nloglik:3.391690 
## [72]	train-poisson-nloglik:3.376512 
## [73]	train-poisson-nloglik:3.368581 
## [74]	train-poisson-nloglik:3.357675 
## [75]	train-poisson-nloglik:3.339190 
## [76]	train-poisson-nloglik:3.325741 
## [77]	train-poisson-nloglik:3.317946 
## [78]	train-poisson-nloglik:3.297244 
## [79]	train-poisson-nloglik:3.290801 
## [80]	train-poisson-nloglik:3.259316 
## [81]	train-poisson-nloglik:3.231941 
## [82]	train-poisson-nloglik:3.220021 
## [83]	train-poisson-nloglik:3.215404 
## [84]	train-poisson-nloglik:3.185944 
## [85]	train-poisson-nloglik:3.173917 
## [86]	train-poisson-nloglik:3.162845 
## [87]	train-poisson-nloglik:3.153511 
## [88]	train-poisson-nloglik:3.148101 
## [89]	train-poisson-nloglik:3.142634 
## [90]	train-poisson-nloglik:3.137841 
## [91]	train-poisson-nloglik:3.129668 
## [92]	train-poisson-nloglik:3.120462 
## [93]	train-poisson-nloglik:3.114691 
## [94]	train-poisson-nloglik:3.103594 
## [95]	train-poisson-nloglik:3.092994 
## [96]	train-poisson-nloglik:3.081500 
## [97]	train-poisson-nloglik:3.072479 
## [98]	train-poisson-nloglik:3.069017 
## [99]	train-poisson-nloglik:3.063687 
## [100]	train-poisson-nloglik:3.060727 
## [101]	train-poisson-nloglik:3.051067 
## [102]	train-poisson-nloglik:3.036426 
## [103]	train-poisson-nloglik:3.032595 
## [104]	train-poisson-nloglik:3.029578 
## [105]	train-poisson-nloglik:3.026103 
## [106]	train-poisson-nloglik:3.021355 
## [107]	train-poisson-nloglik:3.014413 
## [108]	train-poisson-nloglik:3.011359 
## [109]	train-poisson-nloglik:2.998380 
## [110]	train-poisson-nloglik:2.987565 
## [111]	train-poisson-nloglik:2.984319 
## [112]	train-poisson-nloglik:2.983074 
## [113]	train-poisson-nloglik:2.979331 
## [114]	train-poisson-nloglik:2.969486 
## [115]	train-poisson-nloglik:2.962597 
## [116]	train-poisson-nloglik:2.958611 
## [117]	train-poisson-nloglik:2.953538 
## [118]	train-poisson-nloglik:2.950688 
## [119]	train-poisson-nloglik:2.942907 
## [120]	train-poisson-nloglik:2.940970 
## [121]	train-poisson-nloglik:2.939723 
## [122]	train-poisson-nloglik:2.937743 
## [123]	train-poisson-nloglik:2.934509 
## [124]	train-poisson-nloglik:2.929179 
## [125]	train-poisson-nloglik:2.927620 
## [126]	train-poisson-nloglik:2.924505 
## [127]	train-poisson-nloglik:2.916965 
## [128]	train-poisson-nloglik:2.911790 
## [129]	train-poisson-nloglik:2.906604 
## [130]	train-poisson-nloglik:2.904271 
## [131]	train-poisson-nloglik:2.903190 
## [132]	train-poisson-nloglik:2.899822 
## [133]	train-poisson-nloglik:2.898404 
## [134]	train-poisson-nloglik:2.895684 
## [135]	train-poisson-nloglik:2.892329 
## [136]	train-poisson-nloglik:2.888739 
## [137]	train-poisson-nloglik:2.885327 
## [138]	train-poisson-nloglik:2.878992 
## [139]	train-poisson-nloglik:2.877401 
## [140]	train-poisson-nloglik:2.875729 
## [141]	train-poisson-nloglik:2.872451 
## [142]	train-poisson-nloglik:2.870359 
## [143]	train-poisson-nloglik:2.865719 
## [144]	train-poisson-nloglik:2.862111 
## [145]	train-poisson-nloglik:2.859602 
## [146]	train-poisson-nloglik:2.858632 
## [147]	train-poisson-nloglik:2.851694 
## [148]	train-poisson-nloglik:2.848557 
## [149]	train-poisson-nloglik:2.845509 
## [150]	train-poisson-nloglik:2.844711 
## [151]	train-poisson-nloglik:2.841702 
## [152]	train-poisson-nloglik:2.838465 
## [153]	train-poisson-nloglik:2.834981 
## [154]	train-poisson-nloglik:2.830065 
## [155]	train-poisson-nloglik:2.827244 
## [156]	train-poisson-nloglik:2.825313 
## [157]	train-poisson-nloglik:2.823219 
## [158]	train-poisson-nloglik:2.820032 
## [159]	train-poisson-nloglik:2.818902 
## [160]	train-poisson-nloglik:2.816206 
## [161]	train-poisson-nloglik:2.814691 
## [162]	train-poisson-nloglik:2.813742 
## [163]	train-poisson-nloglik:2.813146 
## [164]	train-poisson-nloglik:2.809541 
## [165]	train-poisson-nloglik:2.807688 
## [166]	train-poisson-nloglik:2.807038 
## [167]	train-poisson-nloglik:2.803643 
## [168]	train-poisson-nloglik:2.802239 
## [169]	train-poisson-nloglik:2.800526 
## [170]	train-poisson-nloglik:2.798569 
## [171]	train-poisson-nloglik:2.797717 
## [172]	train-poisson-nloglik:2.792951 
## [173]	train-poisson-nloglik:2.788769 
## [174]	train-poisson-nloglik:2.784901 
## [175]	train-poisson-nloglik:2.783906 
## [176]	train-poisson-nloglik:2.782784 
## [177]	train-poisson-nloglik:2.782670 
## [178]	train-poisson-nloglik:2.779981 
## [179]	train-poisson-nloglik:2.777624 
## [180]	train-poisson-nloglik:2.775817 
## [181]	train-poisson-nloglik:2.775075 
## [182]	train-poisson-nloglik:2.774613 
## [183]	train-poisson-nloglik:2.772917 
## [184]	train-poisson-nloglik:2.772084 
## [185]	train-poisson-nloglik:2.771440 
## [186]	train-poisson-nloglik:2.769933 
## [187]	train-poisson-nloglik:2.769012 
## [188]	train-poisson-nloglik:2.767317 
## [189]	train-poisson-nloglik:2.765434 
## [190]	train-poisson-nloglik:2.761707 
## [191]	train-poisson-nloglik:2.761147 
## [192]	train-poisson-nloglik:2.760026 
## [193]	train-poisson-nloglik:2.756104 
## [194]	train-poisson-nloglik:2.754960 
## [195]	train-poisson-nloglik:2.753824 
## [196]	train-poisson-nloglik:2.753057 
## [197]	train-poisson-nloglik:2.752258 
## [198]	train-poisson-nloglik:2.751692 
## [199]	train-poisson-nloglik:2.750038 
## [200]	train-poisson-nloglik:2.748621 
## [201]	train-poisson-nloglik:2.747829 
## [202]	train-poisson-nloglik:2.746149 
## [203]	train-poisson-nloglik:2.745402 
## [204]	train-poisson-nloglik:2.742944 
## [205]	train-poisson-nloglik:2.741895 
## [206]	train-poisson-nloglik:2.740769 
## [207]	train-poisson-nloglik:2.740240 
## [208]	train-poisson-nloglik:2.739967 
## [209]	train-poisson-nloglik:2.739485 
## [210]	train-poisson-nloglik:2.737962 
## [211]	train-poisson-nloglik:2.736655 
## [212]	train-poisson-nloglik:2.735839 
## [213]	train-poisson-nloglik:2.735057 
## [214]	train-poisson-nloglik:2.730795 
## [215]	train-poisson-nloglik:2.730099 
## [216]	train-poisson-nloglik:2.729890 
## [217]	train-poisson-nloglik:2.729244 
## [218]	train-poisson-nloglik:2.728851 
## [219]	train-poisson-nloglik:2.728349 
## [220]	train-poisson-nloglik:2.726859 
## [221]	train-poisson-nloglik:2.726356 
## [222]	train-poisson-nloglik:2.725662 
## [223]	train-poisson-nloglik:2.724733 
## [224]	train-poisson-nloglik:2.722249 
## [225]	train-poisson-nloglik:2.720766 
## [226]	train-poisson-nloglik:2.718702 
## [227]	train-poisson-nloglik:2.717449 
## [228]	train-poisson-nloglik:2.716838 
## [229]	train-poisson-nloglik:2.715773 
## [230]	train-poisson-nloglik:2.715273 
## [231]	train-poisson-nloglik:2.713741 
## [232]	train-poisson-nloglik:2.713085 
## [233]	train-poisson-nloglik:2.712336 
## [234]	train-poisson-nloglik:2.711546 
## [235]	train-poisson-nloglik:2.711197 
## [236]	train-poisson-nloglik:2.710298 
## [237]	train-poisson-nloglik:2.709725 
## [238]	train-poisson-nloglik:2.709420 
## [239]	train-poisson-nloglik:2.708569 
## [240]	train-poisson-nloglik:2.707803 
## [241]	train-poisson-nloglik:2.706197 
## [242]	train-poisson-nloglik:2.705947 
## [243]	train-poisson-nloglik:2.705479 
## [244]	train-poisson-nloglik:2.705247 
## [245]	train-poisson-nloglik:2.705117 
## [246]	train-poisson-nloglik:2.704782 
## [247]	train-poisson-nloglik:2.703765 
## [248]	train-poisson-nloglik:2.702991 
## [249]	train-poisson-nloglik:2.702161 
## [250]	train-poisson-nloglik:2.701396 
## [251]	train-poisson-nloglik:2.700646 
## [252]	train-poisson-nloglik:2.699687 
## [253]	train-poisson-nloglik:2.699262 
## [254]	train-poisson-nloglik:2.698551 
## [255]	train-poisson-nloglik:2.697355 
## [256]	train-poisson-nloglik:2.696742 
## [257]	train-poisson-nloglik:2.695879 
## [258]	train-poisson-nloglik:2.695608 
## [259]	train-poisson-nloglik:2.695452 
## [260]	train-poisson-nloglik:2.694829 
## [261]	train-poisson-nloglik:2.694470 
## [262]	train-poisson-nloglik:2.693855 
## [263]	train-poisson-nloglik:2.693641 
## [264]	train-poisson-nloglik:2.692194 
## [265]	train-poisson-nloglik:2.691169 
## [266]	train-poisson-nloglik:2.690558 
## [267]	train-poisson-nloglik:2.689369 
## [268]	train-poisson-nloglik:2.689092 
## [269]	train-poisson-nloglik:2.688153 
## [270]	train-poisson-nloglik:2.686737 
## [271]	train-poisson-nloglik:2.686291 
## [272]	train-poisson-nloglik:2.684140 
## [273]	train-poisson-nloglik:2.683749 
## [274]	train-poisson-nloglik:2.683576 
## [275]	train-poisson-nloglik:2.682870 
## [276]	train-poisson-nloglik:2.681667 
## [277]	train-poisson-nloglik:2.680676 
## [278]	train-poisson-nloglik:2.680273 
## [279]	train-poisson-nloglik:2.679917 
## [280]	train-poisson-nloglik:2.679576 
## [281]	train-poisson-nloglik:2.678861 
## [282]	train-poisson-nloglik:2.677160 
## [283]	train-poisson-nloglik:2.676954 
## [284]	train-poisson-nloglik:2.676799 
## [285]	train-poisson-nloglik:2.676070 
## [286]	train-poisson-nloglik:2.675762 
## [287]	train-poisson-nloglik:2.675664 
## [288]	train-poisson-nloglik:2.674965 
## [289]	train-poisson-nloglik:2.674413 
## [290]	train-poisson-nloglik:2.673288 
## [291]	train-poisson-nloglik:2.670060 
## [292]	train-poisson-nloglik:2.669379 
## [293]	train-poisson-nloglik:2.667981 
## [294]	train-poisson-nloglik:2.667577 
## [295]	train-poisson-nloglik:2.667160 
## [296]	train-poisson-nloglik:2.666746 
## [297]	train-poisson-nloglik:2.666208 
## [298]	train-poisson-nloglik:2.665395 
## [299]	train-poisson-nloglik:2.664717 
## [300]	train-poisson-nloglik:2.664276 
## [301]	train-poisson-nloglik:2.663533 
## [302]	train-poisson-nloglik:2.662913 
## [303]	train-poisson-nloglik:2.662778 
## [304]	train-poisson-nloglik:2.662570 
## [305]	train-poisson-nloglik:2.662488 
## [306]	train-poisson-nloglik:2.662384 
## [307]	train-poisson-nloglik:2.662166 
## [308]	train-poisson-nloglik:2.661849 
## [309]	train-poisson-nloglik:2.661703 
## [310]	train-poisson-nloglik:2.661602 
## [311]	train-poisson-nloglik:2.660865 
## [312]	train-poisson-nloglik:2.660517 
## [313]	train-poisson-nloglik:2.659923 
## [314]	train-poisson-nloglik:2.659400 
## [315]	train-poisson-nloglik:2.659070 
## [316]	train-poisson-nloglik:2.658347 
## [317]	train-poisson-nloglik:2.658052 
## [318]	train-poisson-nloglik:2.657758 
## [319]	train-poisson-nloglik:2.656535 
## [320]	train-poisson-nloglik:2.656175 
## [321]	train-poisson-nloglik:2.655942 
## [322]	train-poisson-nloglik:2.655113 
## [323]	train-poisson-nloglik:2.654483 
## [324]	train-poisson-nloglik:2.653710 
## [325]	train-poisson-nloglik:2.653393 
## [326]	train-poisson-nloglik:2.652758 
## [327]	train-poisson-nloglik:2.652209 
## [328]	train-poisson-nloglik:2.652086 
## [329]	train-poisson-nloglik:2.651209 
## [330]	train-poisson-nloglik:2.650876 
## [331]	train-poisson-nloglik:2.650356 
## [332]	train-poisson-nloglik:2.649632 
## [333]	train-poisson-nloglik:2.648876 
## [334]	train-poisson-nloglik:2.648399 
## [335]	train-poisson-nloglik:2.647639 
## [336]	train-poisson-nloglik:2.646661 
## [337]	train-poisson-nloglik:2.646150 
## [338]	train-poisson-nloglik:2.645591 
## [339]	train-poisson-nloglik:2.645285 
## [340]	train-poisson-nloglik:2.645239 
## [341]	train-poisson-nloglik:2.644765 
## [342]	train-poisson-nloglik:2.644619 
## [343]	train-poisson-nloglik:2.644274 
## [344]	train-poisson-nloglik:2.643825 
## [345]	train-poisson-nloglik:2.643591 
## [346]	train-poisson-nloglik:2.643410 
## [347]	train-poisson-nloglik:2.643113 
## [348]	train-poisson-nloglik:2.642538 
## [349]	train-poisson-nloglik:2.641959 
## [350]	train-poisson-nloglik:2.641442 
## [351]	train-poisson-nloglik:2.640537 
## [352]	train-poisson-nloglik:2.640349 
## [353]	train-poisson-nloglik:2.639363 
## [354]	train-poisson-nloglik:2.638752 
## [355]	train-poisson-nloglik:2.638350 
## [356]	train-poisson-nloglik:2.637626 
## [357]	train-poisson-nloglik:2.637084 
## [358]	train-poisson-nloglik:2.636543 
## [359]	train-poisson-nloglik:2.635816 
## [360]	train-poisson-nloglik:2.635467 
## [361]	train-poisson-nloglik:2.635318 
## [362]	train-poisson-nloglik:2.634867 
## [363]	train-poisson-nloglik:2.634246 
## [364]	train-poisson-nloglik:2.633298 
## [365]	train-poisson-nloglik:2.632633 
## [366]	train-poisson-nloglik:2.632239 
## [367]	train-poisson-nloglik:2.631315 
## [368]	train-poisson-nloglik:2.630503 
## [369]	train-poisson-nloglik:2.630327 
## [370]	train-poisson-nloglik:2.629853 
## [371]	train-poisson-nloglik:2.629483 
## [372]	train-poisson-nloglik:2.629125 
## [373]	train-poisson-nloglik:2.628644 
## [374]	train-poisson-nloglik:2.628077 
## [375]	train-poisson-nloglik:2.627499 
## [376]	train-poisson-nloglik:2.627072 
## [377]	train-poisson-nloglik:2.626681 
## [378]	train-poisson-nloglik:2.626240 
## [379]	train-poisson-nloglik:2.626086 
## [380]	train-poisson-nloglik:2.625841 
## [381]	train-poisson-nloglik:2.625480 
## [382]	train-poisson-nloglik:2.625247 
## [383]	train-poisson-nloglik:2.624889 
## [384]	train-poisson-nloglik:2.624796 
## [385]	train-poisson-nloglik:2.624646 
## [386]	train-poisson-nloglik:2.624297 
## [387]	train-poisson-nloglik:2.623995 
## [388]	train-poisson-nloglik:2.623721 
## [389]	train-poisson-nloglik:2.623315 
## [390]	train-poisson-nloglik:2.622731 
## [391]	train-poisson-nloglik:2.622437 
## [392]	train-poisson-nloglik:2.622339 
## [393]	train-poisson-nloglik:2.622208 
## [394]	train-poisson-nloglik:2.621869 
## [395]	train-poisson-nloglik:2.621808 
## [396]	train-poisson-nloglik:2.621589 
## [397]	train-poisson-nloglik:2.621544 
## [398]	train-poisson-nloglik:2.621455 
## [399]	train-poisson-nloglik:2.620960 
## [400]	train-poisson-nloglik:2.620533 
## [401]	train-poisson-nloglik:2.619698 
## [402]	train-poisson-nloglik:2.619347 
## [403]	train-poisson-nloglik:2.618969 
## [404]	train-poisson-nloglik:2.618783 
## [405]	train-poisson-nloglik:2.618199 
## [406]	train-poisson-nloglik:2.617484 
## [407]	train-poisson-nloglik:2.616835 
## [408]	train-poisson-nloglik:2.616437 
## [409]	train-poisson-nloglik:2.616090 
## [410]	train-poisson-nloglik:2.615725 
## [411]	train-poisson-nloglik:2.615375 
## [412]	train-poisson-nloglik:2.614902 
## [413]	train-poisson-nloglik:2.614180 
## [414]	train-poisson-nloglik:2.613930 
## [415]	train-poisson-nloglik:2.613756 
## [416]	train-poisson-nloglik:2.613360 
## [417]	train-poisson-nloglik:2.613062 
## [418]	train-poisson-nloglik:2.612711 
## [419]	train-poisson-nloglik:2.612515 
## [420]	train-poisson-nloglik:2.612219 
## [421]	train-poisson-nloglik:2.612047 
## [422]	train-poisson-nloglik:2.611775 
## [423]	train-poisson-nloglik:2.611289 
## [424]	train-poisson-nloglik:2.611061 
## [425]	train-poisson-nloglik:2.610989 
## [426]	train-poisson-nloglik:2.610956 
## [427]	train-poisson-nloglik:2.610836 
## [428]	train-poisson-nloglik:2.610435 
## [429]	train-poisson-nloglik:2.610251 
## [430]	train-poisson-nloglik:2.610065 
## [431]	train-poisson-nloglik:2.609766 
## [432]	train-poisson-nloglik:2.609417 
## [433]	train-poisson-nloglik:2.609389 
## [434]	train-poisson-nloglik:2.609035 
## [435]	train-poisson-nloglik:2.608445 
## [436]	train-poisson-nloglik:2.608217 
## [437]	train-poisson-nloglik:2.608111 
## [438]	train-poisson-nloglik:2.607871 
## [439]	train-poisson-nloglik:2.607389 
## [440]	train-poisson-nloglik:2.607121 
## [441]	train-poisson-nloglik:2.606773 
## [442]	train-poisson-nloglik:2.606533 
## [443]	train-poisson-nloglik:2.606361 
## [444]	train-poisson-nloglik:2.605632 
## [445]	train-poisson-nloglik:2.605196 
## [446]	train-poisson-nloglik:2.604983 
## [447]	train-poisson-nloglik:2.604740 
## [448]	train-poisson-nloglik:2.604362 
## [449]	train-poisson-nloglik:2.604158 
## [450]	train-poisson-nloglik:2.603887 
## [451]	train-poisson-nloglik:2.603372 
## [452]	train-poisson-nloglik:2.603019 
## [453]	train-poisson-nloglik:2.602692 
## [454]	train-poisson-nloglik:2.602385 
## [455]	train-poisson-nloglik:2.601923 
## [456]	train-poisson-nloglik:2.601714 
## [457]	train-poisson-nloglik:2.601441 
## [458]	train-poisson-nloglik:2.600805 
## [459]	train-poisson-nloglik:2.600566 
## [460]	train-poisson-nloglik:2.600372 
## [461]	train-poisson-nloglik:2.600035 
## [462]	train-poisson-nloglik:2.599792 
## [463]	train-poisson-nloglik:2.599460 
## [464]	train-poisson-nloglik:2.599104 
## [465]	train-poisson-nloglik:2.598524 
## [466]	train-poisson-nloglik:2.598259 
## [467]	train-poisson-nloglik:2.597949 
## [468]	train-poisson-nloglik:2.597779 
## [469]	train-poisson-nloglik:2.597535 
## [470]	train-poisson-nloglik:2.597148 
## [471]	train-poisson-nloglik:2.597021 
## [472]	train-poisson-nloglik:2.596637 
## [473]	train-poisson-nloglik:2.596339 
## [474]	train-poisson-nloglik:2.596184 
## [475]	train-poisson-nloglik:2.596131 
## [476]	train-poisson-nloglik:2.595886 
## [477]	train-poisson-nloglik:2.595748 
## [478]	train-poisson-nloglik:2.595356 
## [479]	train-poisson-nloglik:2.595141 
## [480]	train-poisson-nloglik:2.595013 
## [481]	train-poisson-nloglik:2.594400 
## [482]	train-poisson-nloglik:2.594162 
## [483]	train-poisson-nloglik:2.594127 
## [484]	train-poisson-nloglik:2.594006 
## [485]	train-poisson-nloglik:2.593506 
## [486]	train-poisson-nloglik:2.593338 
## [487]	train-poisson-nloglik:2.593009 
## [488]	train-poisson-nloglik:2.592887 
## [489]	train-poisson-nloglik:2.592724 
## [490]	train-poisson-nloglik:2.592532 
## [491]	train-poisson-nloglik:2.592182 
## [492]	train-poisson-nloglik:2.591999 
## [493]	train-poisson-nloglik:2.591710 
## [494]	train-poisson-nloglik:2.591430 
## [495]	train-poisson-nloglik:2.591026 
## [496]	train-poisson-nloglik:2.590776 
## [497]	train-poisson-nloglik:2.590513 
## [498]	train-poisson-nloglik:2.590179 
## [499]	train-poisson-nloglik:2.590077 
## [500]	train-poisson-nloglik:2.589933
```

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

# Variable Importance Plot

```r
importance_chicken &lt;- xgb.importance(feature_names = colnames(sparse_matrix_train_chicken),
                                     model = xgb_chicken)
head(importance_chicken)
```

```
##        Feature       Gain      Cover  Frequency
## 1:    latitude 0.41454975 0.25842997 0.16760036
## 2:   longitude 0.31253025 0.25557715 0.19952266
## 3: age30대40대 0.16910870 0.02241462 0.07978917
## 4:       month 0.02228328 0.04658382 0.06944675
## 5: age50대이상 0.01789768 0.01707459 0.03878410
## 6: temperature 0.01541875 0.20078352 0.14535751
```

---
background-image: url(Picture2.png)
background-position: center
background-size: contain


```r
xgb.plot.importance(importance_matrix = importance_chicken,
                    top_n=15)
```

![](Service_1__files/figure-html/unnamed-chunk-13-1.png)&lt;!-- --&gt;


---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3-1. XGboost (위도, 경도 적용)  
#### [ 피자 배달 건수를 모델링 ]  
1. test, train set 나누기

```r
data_pizza &lt;- data %&gt;% filter(type=="피자")
idx_pizza &lt;- sample(1:nrow(data_pizza),nrow(data_pizza)*0.7)
train.df_pizza &lt;- data_pizza[idx_pizza,]
test.df_pizza &lt;- data_pizza[-idx_pizza,]
```

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3-1. XGboost (위도, 경도 적용)  
#### [ 중국집 배달 건수를 모델링 ]  
2. sparse matrix (원핫인코딩)

```r
sparse_matrix_train_pizza &lt;- sparse.model.matrix(call ~ -1+day+gender+age+month+
                                                     longitude+latitude+gangsu+rain+
                                                     temperature+holiday+KBO+soccer,
                                                   data = train.df_pizza)
sparse_matrix_test_pizza  &lt;- sparse.model.matrix(call ~ -1+day+gender+age+month+
                                                     longitude+latitude+gangsu+rain+
                                                     temperature+holiday+KBO+soccer,
                                                   data =  test.df_pizza)
output_vector_pizza = train.df_pizza[,"call"]
obs_pizza &lt;- test.df_pizza[,"call"]
```


---
background-image: url(Picture2.png)
background-position: center
background-size: contain

### 3-1. XGboost (위도, 경도 적용)  
#### [ 중국집 배달 건수를 모델링 ]  
3. 모델링

```r
xgb_pizza &lt;- xgboost(data = sparse_matrix_train_pizza,
                       label = output_vector_pizza,
                       max_depth = 6, eta = 0.3, nthread = 3, nrounds = 500,
                       objective = "count:poisson")
```

```
## [1]	train-poisson-nloglik:22.614897 
## [2]	train-poisson-nloglik:20.755033 
## [3]	train-poisson-nloglik:18.889290 
## [4]	train-poisson-nloglik:17.108849 
## [5]	train-poisson-nloglik:15.341333 
## [6]	train-poisson-nloglik:13.672032 
## [7]	train-poisson-nloglik:12.058388 
## [8]	train-poisson-nloglik:10.533415 
## [9]	train-poisson-nloglik:9.150721 
## [10]	train-poisson-nloglik:7.949195 
## [11]	train-poisson-nloglik:6.949765 
## [12]	train-poisson-nloglik:6.143864 
## [13]	train-poisson-nloglik:5.500219 
## [14]	train-poisson-nloglik:4.992162 
## [15]	train-poisson-nloglik:4.604710 
## [16]	train-poisson-nloglik:4.313566 
## [17]	train-poisson-nloglik:4.077838 
## [18]	train-poisson-nloglik:3.878836 
## [19]	train-poisson-nloglik:3.690988 
## [20]	train-poisson-nloglik:3.574185 
## [21]	train-poisson-nloglik:3.466225 
## [22]	train-poisson-nloglik:3.405361 
## [23]	train-poisson-nloglik:3.325023 
## [24]	train-poisson-nloglik:3.254551 
## [25]	train-poisson-nloglik:3.209334 
## [26]	train-poisson-nloglik:3.170099 
## [27]	train-poisson-nloglik:3.108243 
## [28]	train-poisson-nloglik:3.021966 
## [29]	train-poisson-nloglik:2.999232 
## [30]	train-poisson-nloglik:2.901275 
## [31]	train-poisson-nloglik:2.870783 
## [32]	train-poisson-nloglik:2.839690 
## [33]	train-poisson-nloglik:2.794704 
## [34]	train-poisson-nloglik:2.777097 
## [35]	train-poisson-nloglik:2.755715 
## [36]	train-poisson-nloglik:2.715689 
## [37]	train-poisson-nloglik:2.701955 
## [38]	train-poisson-nloglik:2.660174 
## [39]	train-poisson-nloglik:2.650355 
## [40]	train-poisson-nloglik:2.630521 
## [41]	train-poisson-nloglik:2.622036 
## [42]	train-poisson-nloglik:2.602412 
## [43]	train-poisson-nloglik:2.593639 
## [44]	train-poisson-nloglik:2.587295 
## [45]	train-poisson-nloglik:2.570572 
## [46]	train-poisson-nloglik:2.560591 
## [47]	train-poisson-nloglik:2.537330 
## [48]	train-poisson-nloglik:2.525334 
## [49]	train-poisson-nloglik:2.520180 
## [50]	train-poisson-nloglik:2.516867 
## [51]	train-poisson-nloglik:2.501466 
## [52]	train-poisson-nloglik:2.490608 
## [53]	train-poisson-nloglik:2.488395 
## [54]	train-poisson-nloglik:2.483049 
## [55]	train-poisson-nloglik:2.476220 
## [56]	train-poisson-nloglik:2.461523 
## [57]	train-poisson-nloglik:2.457415 
## [58]	train-poisson-nloglik:2.454834 
## [59]	train-poisson-nloglik:2.440271 
## [60]	train-poisson-nloglik:2.434089 
## [61]	train-poisson-nloglik:2.431218 
## [62]	train-poisson-nloglik:2.428206 
## [63]	train-poisson-nloglik:2.426093 
## [64]	train-poisson-nloglik:2.417293 
## [65]	train-poisson-nloglik:2.411020 
## [66]	train-poisson-nloglik:2.406316 
## [67]	train-poisson-nloglik:2.404844 
## [68]	train-poisson-nloglik:2.402833 
## [69]	train-poisson-nloglik:2.398583 
## [70]	train-poisson-nloglik:2.393023 
## [71]	train-poisson-nloglik:2.389328 
## [72]	train-poisson-nloglik:2.384747 
## [73]	train-poisson-nloglik:2.382776 
## [74]	train-poisson-nloglik:2.380002 
## [75]	train-poisson-nloglik:2.378473 
## [76]	train-poisson-nloglik:2.376398 
## [77]	train-poisson-nloglik:2.373739 
## [78]	train-poisson-nloglik:2.371899 
## [79]	train-poisson-nloglik:2.370676 
## [80]	train-poisson-nloglik:2.365445 
## [81]	train-poisson-nloglik:2.362895 
## [82]	train-poisson-nloglik:2.360808 
## [83]	train-poisson-nloglik:2.358899 
## [84]	train-poisson-nloglik:2.357926 
## [85]	train-poisson-nloglik:2.356409 
## [86]	train-poisson-nloglik:2.354539 
## [87]	train-poisson-nloglik:2.353528 
## [88]	train-poisson-nloglik:2.350497 
## [89]	train-poisson-nloglik:2.348290 
## [90]	train-poisson-nloglik:2.347543 
## [91]	train-poisson-nloglik:2.346432 
## [92]	train-poisson-nloglik:2.343426 
## [93]	train-poisson-nloglik:2.340335 
## [94]	train-poisson-nloglik:2.338350 
## [95]	train-poisson-nloglik:2.335880 
## [96]	train-poisson-nloglik:2.334770 
## [97]	train-poisson-nloglik:2.333917 
## [98]	train-poisson-nloglik:2.331463 
## [99]	train-poisson-nloglik:2.330885 
## [100]	train-poisson-nloglik:2.329286 
## [101]	train-poisson-nloglik:2.327968 
## [102]	train-poisson-nloglik:2.327289 
## [103]	train-poisson-nloglik:2.324954 
## [104]	train-poisson-nloglik:2.323204 
## [105]	train-poisson-nloglik:2.322533 
## [106]	train-poisson-nloglik:2.322231 
## [107]	train-poisson-nloglik:2.321278 
## [108]	train-poisson-nloglik:2.320351 
## [109]	train-poisson-nloglik:2.318719 
## [110]	train-poisson-nloglik:2.318194 
## [111]	train-poisson-nloglik:2.317386 
## [112]	train-poisson-nloglik:2.316599 
## [113]	train-poisson-nloglik:2.314546 
## [114]	train-poisson-nloglik:2.313554 
## [115]	train-poisson-nloglik:2.311825 
## [116]	train-poisson-nloglik:2.309555 
## [117]	train-poisson-nloglik:2.308640 
## [118]	train-poisson-nloglik:2.307343 
## [119]	train-poisson-nloglik:2.306818 
## [120]	train-poisson-nloglik:2.306217 
## [121]	train-poisson-nloglik:2.305424 
## [122]	train-poisson-nloglik:2.304890 
## [123]	train-poisson-nloglik:2.304200 
## [124]	train-poisson-nloglik:2.302356 
## [125]	train-poisson-nloglik:2.301887 
## [126]	train-poisson-nloglik:2.301307 
## [127]	train-poisson-nloglik:2.300936 
## [128]	train-poisson-nloglik:2.300143 
## [129]	train-poisson-nloglik:2.298707 
## [130]	train-poisson-nloglik:2.297358 
## [131]	train-poisson-nloglik:2.296952 
## [132]	train-poisson-nloglik:2.295935 
## [133]	train-poisson-nloglik:2.295718 
## [134]	train-poisson-nloglik:2.295195 
## [135]	train-poisson-nloglik:2.294790 
## [136]	train-poisson-nloglik:2.294082 
## [137]	train-poisson-nloglik:2.293394 
## [138]	train-poisson-nloglik:2.291494 
## [139]	train-poisson-nloglik:2.290777 
## [140]	train-poisson-nloglik:2.289825 
## [141]	train-poisson-nloglik:2.289249 
## [142]	train-poisson-nloglik:2.288955 
## [143]	train-poisson-nloglik:2.287258 
## [144]	train-poisson-nloglik:2.286864 
## [145]	train-poisson-nloglik:2.286561 
## [146]	train-poisson-nloglik:2.286289 
## [147]	train-poisson-nloglik:2.285339 
## [148]	train-poisson-nloglik:2.284984 
## [149]	train-poisson-nloglik:2.284256 
## [150]	train-poisson-nloglik:2.283951 
## [151]	train-poisson-nloglik:2.283619 
## [152]	train-poisson-nloglik:2.282748 
## [153]	train-poisson-nloglik:2.281904 
## [154]	train-poisson-nloglik:2.281395 
## [155]	train-poisson-nloglik:2.281218 
## [156]	train-poisson-nloglik:2.280709 
## [157]	train-poisson-nloglik:2.280463 
## [158]	train-poisson-nloglik:2.279799 
## [159]	train-poisson-nloglik:2.279264 
## [160]	train-poisson-nloglik:2.278336 
## [161]	train-poisson-nloglik:2.277930 
## [162]	train-poisson-nloglik:2.277506 
## [163]	train-poisson-nloglik:2.277033 
## [164]	train-poisson-nloglik:2.276934 
## [165]	train-poisson-nloglik:2.276485 
## [166]	train-poisson-nloglik:2.276053 
## [167]	train-poisson-nloglik:2.275212 
## [168]	train-poisson-nloglik:2.274666 
## [169]	train-poisson-nloglik:2.274445 
## [170]	train-poisson-nloglik:2.273988 
## [171]	train-poisson-nloglik:2.273766 
## [172]	train-poisson-nloglik:2.273614 
## [173]	train-poisson-nloglik:2.273113 
## [174]	train-poisson-nloglik:2.272487 
## [175]	train-poisson-nloglik:2.271858 
## [176]	train-poisson-nloglik:2.271376 
## [177]	train-poisson-nloglik:2.270771 
## [178]	train-poisson-nloglik:2.270706 
## [179]	train-poisson-nloglik:2.270530 
## [180]	train-poisson-nloglik:2.269984 
## [181]	train-poisson-nloglik:2.269468 
## [182]	train-poisson-nloglik:2.269179 
## [183]	train-poisson-nloglik:2.268887 
## [184]	train-poisson-nloglik:2.268217 
## [185]	train-poisson-nloglik:2.267022 
## [186]	train-poisson-nloglik:2.266536 
## [187]	train-poisson-nloglik:2.265925 
## [188]	train-poisson-nloglik:2.265445 
## [189]	train-poisson-nloglik:2.264710 
## [190]	train-poisson-nloglik:2.264334 
## [191]	train-poisson-nloglik:2.263371 
## [192]	train-poisson-nloglik:2.262849 
## [193]	train-poisson-nloglik:2.262475 
## [194]	train-poisson-nloglik:2.262113 
## [195]	train-poisson-nloglik:2.261752 
## [196]	train-poisson-nloglik:2.261415 
## [197]	train-poisson-nloglik:2.261015 
## [198]	train-poisson-nloglik:2.260715 
## [199]	train-poisson-nloglik:2.260545 
## [200]	train-poisson-nloglik:2.260151 
## [201]	train-poisson-nloglik:2.259528 
## [202]	train-poisson-nloglik:2.259391 
## [203]	train-poisson-nloglik:2.258869 
## [204]	train-poisson-nloglik:2.258641 
## [205]	train-poisson-nloglik:2.258178 
## [206]	train-poisson-nloglik:2.257877 
## [207]	train-poisson-nloglik:2.257341 
## [208]	train-poisson-nloglik:2.256994 
## [209]	train-poisson-nloglik:2.256761 
## [210]	train-poisson-nloglik:2.256435 
## [211]	train-poisson-nloglik:2.256315 
## [212]	train-poisson-nloglik:2.256245 
## [213]	train-poisson-nloglik:2.255888 
## [214]	train-poisson-nloglik:2.255317 
## [215]	train-poisson-nloglik:2.254960 
## [216]	train-poisson-nloglik:2.254644 
## [217]	train-poisson-nloglik:2.254422 
## [218]	train-poisson-nloglik:2.253958 
## [219]	train-poisson-nloglik:2.253727 
## [220]	train-poisson-nloglik:2.253554 
## [221]	train-poisson-nloglik:2.253099 
## [222]	train-poisson-nloglik:2.252739 
## [223]	train-poisson-nloglik:2.252254 
## [224]	train-poisson-nloglik:2.251839 
## [225]	train-poisson-nloglik:2.251707 
## [226]	train-poisson-nloglik:2.251474 
## [227]	train-poisson-nloglik:2.250972 
## [228]	train-poisson-nloglik:2.250609 
## [229]	train-poisson-nloglik:2.250035 
## [230]	train-poisson-nloglik:2.249765 
## [231]	train-poisson-nloglik:2.249568 
## [232]	train-poisson-nloglik:2.249455 
## [233]	train-poisson-nloglik:2.249148 
## [234]	train-poisson-nloglik:2.248863 
## [235]	train-poisson-nloglik:2.248176 
## [236]	train-poisson-nloglik:2.248031 
## [237]	train-poisson-nloglik:2.248003 
## [238]	train-poisson-nloglik:2.247748 
## [239]	train-poisson-nloglik:2.247263 
## [240]	train-poisson-nloglik:2.247168 
## [241]	train-poisson-nloglik:2.246878 
## [242]	train-poisson-nloglik:2.246374 
## [243]	train-poisson-nloglik:2.245949 
## [244]	train-poisson-nloglik:2.245665 
## [245]	train-poisson-nloglik:2.245378 
## [246]	train-poisson-nloglik:2.245196 
## [247]	train-poisson-nloglik:2.245044 
## [248]	train-poisson-nloglik:2.244971 
## [249]	train-poisson-nloglik:2.244915 
## [250]	train-poisson-nloglik:2.244682 
## [251]	train-poisson-nloglik:2.244466 
## [252]	train-poisson-nloglik:2.244211 
## [253]	train-poisson-nloglik:2.243591 
## [254]	train-poisson-nloglik:2.243373 
## [255]	train-poisson-nloglik:2.243148 
## [256]	train-poisson-nloglik:2.243000 
## [257]	train-poisson-nloglik:2.242711 
## [258]	train-poisson-nloglik:2.242425 
## [259]	train-poisson-nloglik:2.242164 
## [260]	train-poisson-nloglik:2.242058 
## [261]	train-poisson-nloglik:2.241940 
## [262]	train-poisson-nloglik:2.241842 
## [263]	train-poisson-nloglik:2.241514 
## [264]	train-poisson-nloglik:2.241224 
## [265]	train-poisson-nloglik:2.241076 
## [266]	train-poisson-nloglik:2.240916 
## [267]	train-poisson-nloglik:2.240798 
## [268]	train-poisson-nloglik:2.240481 
## [269]	train-poisson-nloglik:2.240108 
## [270]	train-poisson-nloglik:2.240031 
## [271]	train-poisson-nloglik:2.239713 
## [272]	train-poisson-nloglik:2.239489 
## [273]	train-poisson-nloglik:2.239339 
## [274]	train-poisson-nloglik:2.239237 
## [275]	train-poisson-nloglik:2.238900 
## [276]	train-poisson-nloglik:2.238749 
## [277]	train-poisson-nloglik:2.238441 
## [278]	train-poisson-nloglik:2.238121 
## [279]	train-poisson-nloglik:2.237934 
## [280]	train-poisson-nloglik:2.237734 
## [281]	train-poisson-nloglik:2.237390 
## [282]	train-poisson-nloglik:2.237193 
## [283]	train-poisson-nloglik:2.237067 
## [284]	train-poisson-nloglik:2.236771 
## [285]	train-poisson-nloglik:2.236508 
## [286]	train-poisson-nloglik:2.236312 
## [287]	train-poisson-nloglik:2.235961 
## [288]	train-poisson-nloglik:2.235754 
## [289]	train-poisson-nloglik:2.235465 
## [290]	train-poisson-nloglik:2.235310 
## [291]	train-poisson-nloglik:2.235105 
## [292]	train-poisson-nloglik:2.234981 
## [293]	train-poisson-nloglik:2.234735 
## [294]	train-poisson-nloglik:2.234599 
## [295]	train-poisson-nloglik:2.234483 
## [296]	train-poisson-nloglik:2.234290 
## [297]	train-poisson-nloglik:2.234084 
## [298]	train-poisson-nloglik:2.233891 
## [299]	train-poisson-nloglik:2.233791 
## [300]	train-poisson-nloglik:2.233541 
## [301]	train-poisson-nloglik:2.233467 
## [302]	train-poisson-nloglik:2.233432 
## [303]	train-poisson-nloglik:2.233328 
## [304]	train-poisson-nloglik:2.233147 
## [305]	train-poisson-nloglik:2.232937 
## [306]	train-poisson-nloglik:2.232783 
## [307]	train-poisson-nloglik:2.232437 
## [308]	train-poisson-nloglik:2.232147 
## [309]	train-poisson-nloglik:2.232042 
## [310]	train-poisson-nloglik:2.231786 
## [311]	train-poisson-nloglik:2.231636 
## [312]	train-poisson-nloglik:2.231464 
## [313]	train-poisson-nloglik:2.231298 
## [314]	train-poisson-nloglik:2.231147 
## [315]	train-poisson-nloglik:2.230996 
## [316]	train-poisson-nloglik:2.230898 
## [317]	train-poisson-nloglik:2.230676 
## [318]	train-poisson-nloglik:2.230517 
## [319]	train-poisson-nloglik:2.230293 
## [320]	train-poisson-nloglik:2.230255 
## [321]	train-poisson-nloglik:2.230182 
## [322]	train-poisson-nloglik:2.229920 
## [323]	train-poisson-nloglik:2.229773 
## [324]	train-poisson-nloglik:2.229634 
## [325]	train-poisson-nloglik:2.229394 
## [326]	train-poisson-nloglik:2.229079 
## [327]	train-poisson-nloglik:2.228897 
## [328]	train-poisson-nloglik:2.228715 
## [329]	train-poisson-nloglik:2.228609 
## [330]	train-poisson-nloglik:2.228535 
## [331]	train-poisson-nloglik:2.228400 
## [332]	train-poisson-nloglik:2.228223 
## [333]	train-poisson-nloglik:2.228126 
## [334]	train-poisson-nloglik:2.228054 
## [335]	train-poisson-nloglik:2.227938 
## [336]	train-poisson-nloglik:2.227890 
## [337]	train-poisson-nloglik:2.227650 
## [338]	train-poisson-nloglik:2.227492 
## [339]	train-poisson-nloglik:2.227344 
## [340]	train-poisson-nloglik:2.227159 
## [341]	train-poisson-nloglik:2.226949 
## [342]	train-poisson-nloglik:2.226808 
## [343]	train-poisson-nloglik:2.226780 
## [344]	train-poisson-nloglik:2.226526 
## [345]	train-poisson-nloglik:2.226360 
## [346]	train-poisson-nloglik:2.226083 
## [347]	train-poisson-nloglik:2.225981 
## [348]	train-poisson-nloglik:2.225758 
## [349]	train-poisson-nloglik:2.225377 
## [350]	train-poisson-nloglik:2.225278 
## [351]	train-poisson-nloglik:2.225115 
## [352]	train-poisson-nloglik:2.224829 
## [353]	train-poisson-nloglik:2.224698 
## [354]	train-poisson-nloglik:2.224502 
## [355]	train-poisson-nloglik:2.224165 
## [356]	train-poisson-nloglik:2.223680 
## [357]	train-poisson-nloglik:2.223251 
## [358]	train-poisson-nloglik:2.222891 
## [359]	train-poisson-nloglik:2.222802 
## [360]	train-poisson-nloglik:2.222645 
## [361]	train-poisson-nloglik:2.222440 
## [362]	train-poisson-nloglik:2.222275 
## [363]	train-poisson-nloglik:2.222222 
## [364]	train-poisson-nloglik:2.222164 
## [365]	train-poisson-nloglik:2.222059 
## [366]	train-poisson-nloglik:2.221880 
## [367]	train-poisson-nloglik:2.221717 
## [368]	train-poisson-nloglik:2.221482 
## [369]	train-poisson-nloglik:2.221440 
## [370]	train-poisson-nloglik:2.221297 
## [371]	train-poisson-nloglik:2.221189 
## [372]	train-poisson-nloglik:2.221155 
## [373]	train-poisson-nloglik:2.220850 
## [374]	train-poisson-nloglik:2.220482 
## [375]	train-poisson-nloglik:2.220408 
## [376]	train-poisson-nloglik:2.220367 
## [377]	train-poisson-nloglik:2.220140 
## [378]	train-poisson-nloglik:2.220056 
## [379]	train-poisson-nloglik:2.219797 
## [380]	train-poisson-nloglik:2.219557 
## [381]	train-poisson-nloglik:2.219368 
## [382]	train-poisson-nloglik:2.219151 
## [383]	train-poisson-nloglik:2.218880 
## [384]	train-poisson-nloglik:2.218705 
## [385]	train-poisson-nloglik:2.218656 
## [386]	train-poisson-nloglik:2.218616 
## [387]	train-poisson-nloglik:2.218508 
## [388]	train-poisson-nloglik:2.218410 
## [389]	train-poisson-nloglik:2.218374 
## [390]	train-poisson-nloglik:2.218274 
## [391]	train-poisson-nloglik:2.217874 
## [392]	train-poisson-nloglik:2.217726 
## [393]	train-poisson-nloglik:2.217619 
## [394]	train-poisson-nloglik:2.217441 
## [395]	train-poisson-nloglik:2.217226 
## [396]	train-poisson-nloglik:2.217129 
## [397]	train-poisson-nloglik:2.216982 
## [398]	train-poisson-nloglik:2.216892 
## [399]	train-poisson-nloglik:2.216807 
## [400]	train-poisson-nloglik:2.216671 
## [401]	train-poisson-nloglik:2.216614 
## [402]	train-poisson-nloglik:2.216539 
## [403]	train-poisson-nloglik:2.216401 
## [404]	train-poisson-nloglik:2.216225 
## [405]	train-poisson-nloglik:2.216165 
## [406]	train-poisson-nloglik:2.216063 
## [407]	train-poisson-nloglik:2.215953 
## [408]	train-poisson-nloglik:2.215888 
## [409]	train-poisson-nloglik:2.215746 
## [410]	train-poisson-nloglik:2.215650 
## [411]	train-poisson-nloglik:2.215542 
## [412]	train-poisson-nloglik:2.215376 
## [413]	train-poisson-nloglik:2.215231 
## [414]	train-poisson-nloglik:2.215003 
## [415]	train-poisson-nloglik:2.214858 
## [416]	train-poisson-nloglik:2.214783 
## [417]	train-poisson-nloglik:2.214646 
## [418]	train-poisson-nloglik:2.214510 
## [419]	train-poisson-nloglik:2.214354 
## [420]	train-poisson-nloglik:2.214275 
## [421]	train-poisson-nloglik:2.214141 
## [422]	train-poisson-nloglik:2.213975 
## [423]	train-poisson-nloglik:2.213862 
## [424]	train-poisson-nloglik:2.213680 
## [425]	train-poisson-nloglik:2.213584 
## [426]	train-poisson-nloglik:2.213448 
## [427]	train-poisson-nloglik:2.213310 
## [428]	train-poisson-nloglik:2.213244 
## [429]	train-poisson-nloglik:2.213085 
## [430]	train-poisson-nloglik:2.213001 
## [431]	train-poisson-nloglik:2.212957 
## [432]	train-poisson-nloglik:2.212819 
## [433]	train-poisson-nloglik:2.212803 
## [434]	train-poisson-nloglik:2.212685 
## [435]	train-poisson-nloglik:2.212534 
## [436]	train-poisson-nloglik:2.212421 
## [437]	train-poisson-nloglik:2.212185 
## [438]	train-poisson-nloglik:2.212023 
## [439]	train-poisson-nloglik:2.211844 
## [440]	train-poisson-nloglik:2.211698 
## [441]	train-poisson-nloglik:2.211302 
## [442]	train-poisson-nloglik:2.211155 
## [443]	train-poisson-nloglik:2.211003 
## [444]	train-poisson-nloglik:2.210782 
## [445]	train-poisson-nloglik:2.210569 
## [446]	train-poisson-nloglik:2.210418 
## [447]	train-poisson-nloglik:2.210296 
## [448]	train-poisson-nloglik:2.210184 
## [449]	train-poisson-nloglik:2.209974 
## [450]	train-poisson-nloglik:2.209854 
## [451]	train-poisson-nloglik:2.209690 
## [452]	train-poisson-nloglik:2.209568 
## [453]	train-poisson-nloglik:2.209446 
## [454]	train-poisson-nloglik:2.209166 
## [455]	train-poisson-nloglik:2.209055 
## [456]	train-poisson-nloglik:2.208956 
## [457]	train-poisson-nloglik:2.208808 
## [458]	train-poisson-nloglik:2.208733 
## [459]	train-poisson-nloglik:2.208581 
## [460]	train-poisson-nloglik:2.208492 
## [461]	train-poisson-nloglik:2.208401 
## [462]	train-poisson-nloglik:2.208281 
## [463]	train-poisson-nloglik:2.208252 
## [464]	train-poisson-nloglik:2.208040 
## [465]	train-poisson-nloglik:2.207910 
## [466]	train-poisson-nloglik:2.207877 
## [467]	train-poisson-nloglik:2.207855 
## [468]	train-poisson-nloglik:2.207738 
## [469]	train-poisson-nloglik:2.207702 
## [470]	train-poisson-nloglik:2.207593 
## [471]	train-poisson-nloglik:2.207493 
## [472]	train-poisson-nloglik:2.207448 
## [473]	train-poisson-nloglik:2.207425 
## [474]	train-poisson-nloglik:2.207335 
## [475]	train-poisson-nloglik:2.207278 
## [476]	train-poisson-nloglik:2.207258 
## [477]	train-poisson-nloglik:2.207163 
## [478]	train-poisson-nloglik:2.207016 
## [479]	train-poisson-nloglik:2.206856 
## [480]	train-poisson-nloglik:2.206680 
## [481]	train-poisson-nloglik:2.206585 
## [482]	train-poisson-nloglik:2.206462 
## [483]	train-poisson-nloglik:2.206372 
## [484]	train-poisson-nloglik:2.206271 
## [485]	train-poisson-nloglik:2.206173 
## [486]	train-poisson-nloglik:2.206074 
## [487]	train-poisson-nloglik:2.205930 
## [488]	train-poisson-nloglik:2.205788 
## [489]	train-poisson-nloglik:2.205707 
## [490]	train-poisson-nloglik:2.205508 
## [491]	train-poisson-nloglik:2.205360 
## [492]	train-poisson-nloglik:2.205217 
## [493]	train-poisson-nloglik:2.205097 
## [494]	train-poisson-nloglik:2.204891 
## [495]	train-poisson-nloglik:2.204742 
## [496]	train-poisson-nloglik:2.204669 
## [497]	train-poisson-nloglik:2.204555 
## [498]	train-poisson-nloglik:2.204470 
## [499]	train-poisson-nloglik:2.204394 
## [500]	train-poisson-nloglik:2.204268
```


---
background-image: url(Picture2.png)
background-position: center
background-size: contain

# Variable Importance Plot

```r
importance_pizza &lt;- xgb.importance(feature_names = colnames(sparse_matrix_train_pizza),
                                     model = xgb_pizza)
head(importance_pizza)
```

```
##        Feature       Gain      Cover  Frequency
## 1:    latitude 0.47377362 0.24006541 0.16762733
## 2:   longitude 0.20631037 0.23344744 0.18643611
## 3: age30대40대 0.17176325 0.02149253 0.08150470
## 4:     age20대 0.03176725 0.01840349 0.04766239
## 5:       month 0.02475850 0.04985258 0.05346007
## 6: age50대이상 0.02257392 0.01094811 0.04314558
```

---
background-image: url(Picture2.png)
background-position: center
background-size: contain


```r
xgb.plot.importance(importance_matrix = importance_pizza,
                    top_n=15)
```

![](Service_1__files/figure-html/unnamed-chunk-18-1.png)&lt;!-- --&gt;

---
class: center, middle

background-image: url(Picture1.png)
background-position: center


.white[
#서비스 제안]

---
class: center, middle


#예측 모델 이용한 서비스 제안
###xgboost을 이용하여 예측을 통한 수요 대비

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

#서비스 1&lt;br&gt;
데이터를 이용하여 미래 예상 배달주문 건수 예측을 통한 수요 대비. 

knitr::kable(head(hongje_0),format = "html")
---
background-image: url(Picture2.png)
background-position: center
background-size: contain

#서비스 1
예측결과

knitr::kable(head(hongje_1),format = "html")

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

#서비스 1
실제 배달량

knitr::kable(head(hongje_2),format = "html")
---
background-image: url(Picture2.png)
background-position: center
background-size: contain

#서비스 1의 장점 및 발전 방안

--

- 손쉽게 접할 수 있는 날씨 정보 &amp; 고객의 기본적인 특성, 위치 정보 등을 이용하여 배달 수요를 손쉽게 예측 가능.&lt;br&gt;


--

- 주문량 수요를 예측하여 배달앱에 정보를 제공하면 날씨에 따른 소비 고객군의 변화 파악하여 효율적인 마케팅 전략 수립 가능. &lt;br&gt;


--

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

#서비스 2: 고객 맞춤 팝업 광고

.center[![](chicken.png)]

---

class: center, middle

background-image: url(Picture1.png)
background-position: center


.white[
#제언]

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

#개선 방향

1.파생 변수 생성 과정 &lt;행정동 vs 법정도&gt;

.center[![](woori.png)]

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

#개선 방향

2.비용의 한계

.center[![](money.png)]

---
background-image: url(Picture2.png)
background-position: center
background-size: contain

#개선 방향

3.위도 경도

.center[![](map2.png)]

---


class: center, middle

background-image: url(Picture1.png)
background-position: center


.white[
#감사합니다]

---
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
